import{s as R,A as ae,w as wo,x as To,y as Dt,z as vn,C as yn,D as de,E as ot,H as lt,J as jt,K as qt,U as wn,S as bo,d as Q,b as se,h as at,B as _e,O as Ht,P as Vt,Q as Tn,R as So,m as At,W as bn,X as ko,Y as Sn,p as ue,a as pe,T as Ie,Z as kn,c as He,$ as Ve,a0 as Eo,a1 as Gt,k as B,v as En,a2 as Cn,a3 as Co,I as _n,a4 as In}from"./index.bddb5c0b.js";import{u as m,w as T,x as g,ad as _o,q as $,N as ge,O as De,A as P,D as Y,I as me,z as U,y as z,B as rt,e as y,E as F,P as G,G as le,S as Un,J as Ae,s as Io,H as Qt,L as Xt,f as st,F as Fn}from"./vue.1c9db5c2.js";import{P as dt}from"./index.dc8bb212.js";import{i as $n}from"./ellipsis.a1b9ac84.js";import{i as Ln}from"./plus.45a16331.js";var Uo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Fo=g("path",{class:"attachment_svg__st0",d:"M21.2 6c-1.2-1.1-2.7-1.8-4.4-1.8-.8 0-1.6.1-2.3.4-.8.3-1.4.7-2 1.3l-5.7 5.7c-.7.7-1 1.5-1 2.5 0 .9.4 1.8 1 2.5.7.7 1.5 1 2.5 1 .9 0 1.8-.4 2.5-1l5-5c.2-.2.3-.4.3-.6 0-.2-.1-.5-.3-.6-.2-.2-.4-.3-.6-.3-.2 0-.5.1-.6.3l-5 5c-.3.3-.8.5-1.2.5-.5 0-.9-.2-1.3-.5-.3-.3-.5-.8-.5-1.2 0-.5.2-.9.5-1.2l5.7-5.7c.8-.8 1.9-1.3 3.1-1.3 1.2 0 2.3.5 3.1 1.3.8.8 1.3 1.9 1.3 3.1s-.4 2.3-1.3 3.1l-6.1 6a6.42 6.42 0 0 1-4.6 1.9c-1.7 0-3.4-.7-4.6-1.9s-1.9-2.8-1.9-4.6c0-1.7.7-3.3 1.9-4.5l7.9-7.8c.2-.2.3-.4.3-.6 0-.2-.1-.5-.3-.6-.3-.3-.5-.4-.7-.4s-.5.1-.6.3L3.4 9c-.8.8-1.4 1.7-1.8 2.7-.4 1-.6 2-.6 3.1s.2 2.1.6 3.1c.4 1 1 1.9 1.8 2.7.8.8 1.7 1.4 2.7 1.8 1 .4 2 .6 3.1.6s2.1-.2 3.1-.6c1-.4 1.9-1 2.7-1.8l6.1-6c.6-.6 1-1.3 1.3-2 .3-.7.4-1.5.4-2.3.2-1.6-.4-3.2-1.6-4.3z"},null,-1),$o=[Fo];function Lo(e,t){return m(),T("svg",Uo,[].concat($o))}var Do={render:Lo},Dn=function(){return R({name:"IconAttachment",component:Do})()},Ao={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Po=g("path",{d:"M670.344 369.644c-6.248-6.249-16.371-6.249-22.62 0L511.992 505.376 376.258 369.644c-6.247-6.249-16.386-6.249-22.62 0-6.248 6.247-6.248 16.37 0 22.619l135.733 135.732L353.64 663.73c-6.249 6.248-6.249 16.37 0 22.619 6.233 6.248 16.37 6.248 22.619 0l135.733-135.734 135.734 135.734c6.248 6.248 16.37 6.248 22.619 0s6.248-16.371 0-22.62L534.61 527.996l135.734-135.732c6.248-6.248 6.248-16.372-.001-22.62zM511.99 128.092c-212.026 0-383.906 171.881-383.906 383.907 0 212.027 171.88 383.908 383.906 383.908 212.027 0 383.923-171.881 383.923-383.908 0-212.026-171.896-383.907-383.923-383.907zm0 735.823c-194.36 0-351.914-157.556-351.914-351.915s157.556-351.914 351.914-351.914c194.345 0 351.915 157.555 351.915 351.914s-157.57 351.915-351.915 351.915z"},null,-1),Oo=[Po];function Ro(e,t){return m(),T("svg",Ao,[].concat(Oo))}var Mo={render:Ro},No=function(){return R({name:"IconCloseCircle",component:Mo})()},zo={viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},xo=g("path",{d:"M8.54 2.6c0-.28-.22-.5-.5-.5s-.5.22-.5.5v8.359l-2.02-2.01c-.19-.199-.51-.199-.71 0-.19.19-.19.51 0 .701l2.83 2.83c.2.2.51.2.71 0l2.83-2.83a.502.502 0 0 0 0-.7l-.07-.061a.492.492 0 0 0-.64.06l-1.93 1.93v-8.28ZM14 10.5c.27 0 .5.219.5.5v1.28c0 1.22-1 2.22-2.22 2.22H3.71c-1.22 0-2.21-1-2.21-2.22V11a.501.501 0 0 1 1 0v1.28c0 .67.54 1.22 1.21 1.22h8.57c.67 0 1.22-.55 1.22-1.22V11c0-.281.22-.5.5-.5Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1),Bo=[xo];function jo(e,t){return m(),T("svg",zo,[].concat(Bo))}var Ho={render:jo},ct=function(){return R({name:"IconDownload",component:Ho})()},Vo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Wo=g("path",{class:"file-cloudupload_svg__st0",d:"M22.3 5.1H11.5l-.6-1.9C10.7 2.5 10 2 9.3 2H1.7C.8 2 0 2.8 0 3.7v16.5c0 1 .8 1.7 1.7 1.7H13c.5 0 1-.5 1-1s-.5-.9-1-.9H2V7h20v3c0 .5.5 1 1 1s1-.5 1-1V6.8c0-.9-.8-1.7-1.7-1.7zM2 4h6.6L9 5H2V4zm13.9 12.5c.2 0 .4-.1.6-.2l1.7-1.5v6.5c0 .4.4.8.9.8s.9-.4.9-.8v-6.5l1.7 1.5c.2.2.4.2.6.2s.4-.1.6-.2c.3-.3.3-.8 0-1.1l-3.1-2.9c-.4-.2-.6-.3-.8-.3-.2 0-.4.1-.6.2l-3.1 2.9c-.3.3-.3.8 0 1.1.1.2.3.3.6.3z"},null,-1),Zo=[Wo];function Yo(e,t){return m(),T("svg",Vo,[].concat(Zo))}var Ko={render:Yo},Wt=function(){return R({name:"IconFileCloudupload",component:Ko})()},qo={viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Go=g("path",{d:"M8 0a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8Zm4.86 12.86a6.84 6.84 0 0 1-2.185 1.474c-.847.36-1.747.541-2.675.541a6.835 6.835 0 0 1-4.86-2.012 6.84 6.84 0 0 1-1.474-2.186A6.822 6.822 0 0 1 1.125 8a6.835 6.835 0 0 1 2.013-4.86 6.84 6.84 0 0 1 2.185-1.474A6.822 6.822 0 0 1 8 1.125a6.835 6.835 0 0 1 4.86 2.013 6.84 6.84 0 0 1 1.474 2.185c.36.849.541 1.749.541 2.677a6.835 6.835 0 0 1-2.014 4.86ZM7.92 10.374a.563.563 0 0 1-.56-.619c.075-.779.647-1.409 1.277-2.038C9.644 6.708 9.66 6.387 9.678 6.048a1.447 1.447 0 0 0-.412-1.08 1.756 1.756 0 0 0-1.27-.54h-.002a1.682 1.682 0 0 0-1.677 1.68.562.562 0 1 1-1.125 0c0-.749.29-1.452.819-1.981a2.785 2.785 0 0 1 1.98-.824 2.887 2.887 0 0 1 2.09.89c.502.529.758 1.209.72 1.915-.039.723-.26 1.294-1.37 2.403-.562.562-.917.984-.953 1.355a.563.563 0 0 1-.56.507Zm-.697 1.646a.677.677 0 1 0 1.353 0 .677.677 0 0 0-1.353 0Z","fill-rule":"nonzero"},null,-1),Qo=[Go];function Xo(e,t){return m(),T("svg",qo,[].concat(Qo))}var Jo={render:Xo},er=function(){return R({name:"IconHelpQuery",component:Jo})()},tr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},nr=g("path",{class:"pause_svg__st0",d:"M17 4c-.6 0-1 .5-1 1v14c0 .5.5 1 1 1s1-.5 1-1V5c0-.5-.4-1-1-1zM7 4c-.6 0-1 .5-1 1v14c0 .5.5 1 1 1s1-.5 1-1V5c0-.5-.4-1-1-1z"},null,-1),or=[nr];function rr(e,t){return m(),T("svg",tr,[].concat(or))}var ir={render:rr},An=function(){return R({name:"IconPause",component:ir})()},lr={viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},ar=g("path",{d:"M12 1.5c1.38 0 2.5 1.11 2.5 2.5v8a2.5 2.5 0 0 1-2.5 2.5H4c-1.39 0-2.5-1.12-2.5-2.5V4c0-1.39 1.11-2.5 2.5-2.5h8Zm-8 1h8.1c.78.05 1.4.7 1.4 1.5v7.01l-2.18-2.1c-.42-.41-1.1-.4-1.52.02l-.75.76c-.04.03-.08.03-.12 0l-2.7-2.66a1.08 1.08 0 0 0-1.51 0L2.5 9.19V4c0-.83.67-1.5 1.5-1.5ZM10.02 4c.83 0 1.5.67 1.5 1.5 0 .82-.67 1.5-1.5 1.5s-1.5-.68-1.5-1.5c0-.83.67-1.5 1.5-1.5Zm-.5 1.5c0-.28.23-.5.5-.5.28 0 .5.22.5.5 0 .27-.22.5-.5.5-.27 0-.5-.23-.5-.5Zm-4.1 2.25-2.91 2.81L2.5 12c0 .79.61 1.44 1.39 1.49l.11.01h8a1.5 1.5 0 0 0 1.44-1.11l-2.81-2.76c-.04-.03-.09-.03-.12 0l-.75.77c-.42.42-1.1.42-1.53.01l-2.7-2.66a.08.08 0 0 0-.11 0Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1),sr=[ar];function dr(e,t){return m(),T("svg",lr,[].concat(sr))}var cr={render:dr},ur=function(){return R({name:"IconPicture",component:cr})()},pr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},hr=g("path",{class:"plus-circle_svg__st0",d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.6 0 12 0zm7.1 19.1c-.9.9-2 1.6-3.2 2.1-1.2.5-2.5.8-3.9.8s-2.7-.3-3.9-.8c-1.2-.5-2.3-1.2-3.2-2.1-.9-.9-1.6-2-2.1-3.2-.5-1.2-.8-2.5-.8-3.9s.3-2.7.8-3.9C3.3 6.9 4 5.8 4.9 4.9c.9-.9 2-1.6 3.2-2.1C9.3 2.3 10.6 2 12 2s2.7.3 3.9.8c1.2.5 2.3 1.2 3.2 2.1.9.9 1.6 2 2.1 3.2.5 1.2.8 2.5.8 3.9s-.3 2.7-.8 3.9c-.5 1.2-1.2 2.3-2.1 3.2zM17 11h-4V7c0-.5-.5-1-1-1s-1 .5-1 1v4H7c-.5 0-1 .5-1 1s.6 1 1 1h4v4c0 .5.5 1 1 1s1-.5 1-1v-4h4c.5 0 1-.5 1-1s-.5-1-1-1z"},null,-1),fr=[hr];function mr(e,t){return m(),T("svg",pr,[].concat(fr))}var gr={render:mr},vr=function(){return R({name:"IconPlusCircle",component:gr})()},yr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},wr=g("path",{class:"refres_svg__st0",d:"M12.2 22.9c.5-.1.8-.5.7-1-.1-.5-.5-.8-1-.7-.4.1-.9.1-1.4.1-2.4 0-4.6-1-6.2-2.7S1.7 14.5 1.7 12s.9-4.8 2.6-6.5 3.9-2.7 6.2-2.7 4.6 1 6.2 2.7 2.6 4.1 2.6 6.5v.3l-1.9-2c-.3-.3-.9-.3-1.2 0-.3.3-.3.9 0 1.2l3.2 3.3c.3.3.9.3 1.2 0l3.2-3.3c.3-.3.3-.9 0-1.2-.3-.3-.9-.3-1.2 0L21 11.9c0-1.5-.3-2.9-.8-4.2-.5-1.3-1.3-2.5-2.2-3.5s-2.1-1.8-3.3-2.4c-1.4-.5-2.8-.8-4.2-.8s-2.8.3-4.1.9C5.2 2.4 4 3.2 3.1 4.2c-1 1-1.7 2.2-2.2 3.5C.3 9.1 0 10.5 0 12s.3 2.9.8 4.3c.5 1.3 1.3 2.5 2.2 3.5 1 1 2.1 1.8 3.3 2.4 1.3.6 2.7.9 4.1.9.7-.1 1.2-.1 1.8-.2z"},null,-1),Tr=[wr];function br(e,t){return m(),T("svg",yr,[].concat(Tr))}var Sr={render:br},kr=function(){return R({name:"IconRefres",component:Sr})()},Er={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",style:{"enable-background":"new 0 0 16 16"},"xml:space":"preserve"},Cr=g("rect",{style:{fill:"none"}},null,-1),_r=g("path",{class:"refresh_svg__st1",d:"M11.81 2.75a6.433 6.433 0 0 1 1.75 8.55l1.7-.45c.23-.06.46.05.56.25l.02.08c.07.25-.08.52-.34.58l-2.9.78a.467.467 0 0 1-.58-.34l-.78-2.9a.482.482 0 0 1 .93-.25l.5 1.84c1.56-2.42.97-5.67-1.41-7.38-2.47-1.78-5.91-1.23-7.71 1.22s-1.24 5.88 1.22 7.66c1.66 1.2 3.53 1.45 5.64.78.25-.08.52.06.61.3.08.25-.06.52-.3.61-2.4.78-4.58.47-6.48-.91C1.32 11.09.66 7.06 2.77 4.18 4.86 1.3 8.91.67 11.81 2.75z"},null,-1),Ir=[Cr,_r];function Ur(e,t){return m(),T("svg",Er,[].concat(Ir))}var Fr={render:Ur},$r=function(){return R({name:"IconRefresh",component:Fr})()},Lr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Dr=g("path",{class:"right_svg__st0",d:"M6 2v20l13-10z"},null,-1),Ar=[Dr];function Pr(e,t){return m(),T("svg",Lr,[].concat(Ar))}var Or={render:Pr},Pn=function(){return R({name:"IconRight",component:Or})()},Rr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Mr=g("path",{class:"start-circle_svg__st0",d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.6 0 12 0zm7.1 19.1c-.9.9-2 1.6-3.2 2.1-1.2.5-2.5.8-3.9.8s-2.7-.3-3.9-.8c-1.2-.5-2.3-1.2-3.2-2.1-.9-.9-1.6-2-2.1-3.2-.5-1.2-.8-2.5-.8-3.9s.3-2.7.8-3.9C3.3 6.9 4 5.8 4.9 4.9c.9-.9 2-1.6 3.2-2.1C9.3 2.3 10.6 2 12 2s2.7.3 3.9.8c1.2.5 2.3 1.2 3.2 2.1.9.9 1.6 2 2.1 3.2.5 1.2.8 2.5.8 3.9s-.3 2.7-.8 3.9c-.5 1.2-1.2 2.3-2.1 3.2zm-2.3-7.4-7-5.6c0-.1-.1-.1-.3-.1-.2 0-.5.2-.5.4v11.1c0 .3.3.5.5.5.1 0 .2 0 .3-.1l7-5.6c.3-.2.3-.4 0-.6z"},null,-1),Nr=[Mr];function zr(e,t){return m(),T("svg",Rr,[].concat(Nr))}var xr={render:zr},Br=function(){return R({name:"IconStartCircle",component:xr})()},jr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","xml:space":"preserve"},Hr=g("path",{class:"view_svg__st0",d:"M11.7 9.3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1s-1-.4-1-1v-3h-3c-.6 0-1-.4-1-1s.4-1 1-1h3v-3c0-.6.4-1 1-1s1 .4 1 1v3z"},null,-1),Vr=g("path",{class:"view_svg__st0",d:"M22.4 20.8 17.6 16c1.3-1.6 2.1-3.6 2.1-5.7 0-5-4-9-9-9s-9 4-9 9 4 9 9 9c2.2 0 4.2-.8 5.7-2.1l4.8 4.8c.2.2.4.2.6.2s.4-.1.6-.2c.3-.3.3-.8 0-1.2zm-9-4.1c-.9.4-1.8.5-2.7.5S8.8 17 8 16.7c-.8-.4-1.6-.9-2.2-1.5-.6-.6-1.1-1.4-1.5-2.2-.4-.9-.5-1.8-.5-2.7s.2-1.9.5-2.7c.3-.9.8-1.6 1.4-2.3s1.4-1.1 2.2-1.5c.9-.4 1.8-.5 2.7-.5s1.9.2 2.7.5c.8.4 1.6.9 2.2 1.5.6.6 1.1 1.4 1.5 2.2.4.9.5 1.8.5 2.7s-.2 1.9-.5 2.7c-.4.8-.9 1.6-1.5 2.2-.5.8-1.3 1.3-2.1 1.6z"},null,-1),Wr=[Hr,Vr];function Zr(e,t){return m(),T("svg",jr,[].concat(Wr))}var Yr={render:Zr},Kr=function(){return R({name:"IconView",component:Yr})()},qr={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Gr=g("path",{d:"M2.857 10.25a.75.75 0 0 1 .744.648l.006.102v2a.75.75 0 0 1-1.493.102L2.108 13v-2a.75.75 0 0 1 .75-.75Zm3.857-2.5a.75.75 0 0 1 .743.648l.007.102v7a.75.75 0 0 1-1.493.102l-.007-.102v-7a.75.75 0 0 1 .75-.75Zm11.571 1a.75.75 0 0 1 .743.648l.007.102v5a.75.75 0 0 1-1.493.102l-.007-.102v-5a.75.75 0 0 1 .75-.75Zm2.858 2a.75.75 0 0 1 .743.648l.007.102v1a.75.75 0 0 1-1.494.102l-.006-.102v-1a.75.75 0 0 1 .75-.75Zm-6.714-4a.75.75 0 0 1 .743.648l.007.102v9a.75.75 0 0 1-1.493.102l-.007-.102v-9a.75.75 0 0 1 .75-.75Zm-3.858-3a.75.75 0 0 1 .744.648l.006.102v15a.75.75 0 0 1-1.493.102l-.007-.102v-15a.75.75 0 0 1 .75-.75Z"},null,-1),Qr=[Gr];function Xr(e,t){return m(),T("svg",qr,[].concat(Qr))}var Jr={render:Xr},On=function(){return R({name:"IconAudio",component:Jr})()},ei={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ti=g("path",{d:"M18.006 11.41a.75.75 0 0 1 .75.75 6.757 6.757 0 0 1-6.005 6.715V20.5h1.248a.75.75 0 0 1 .101 1.494L14 22h-3.997a.75.75 0 0 1-.102-1.493l.102-.007h1.248v-1.625a6.758 6.758 0 0 1-6.006-6.715.75.75 0 1 1 1.5 0 5.257 5.257 0 0 0 10.512 0 .75.75 0 0 1 .75-.75ZM12.002 2a3.833 3.833 0 0 1 3.833 3.833V12a3.833 3.833 0 0 1-7.667 0V5.833A3.833 3.833 0 0 1 12 2Zm0 1.5a2.333 2.333 0 0 0-2.334 2.333V12a2.333 2.333 0 0 0 4.667 0V5.833A2.333 2.333 0 0 0 12 3.5Z"},null,-1),ni=[ti];function oi(e,t){return m(),T("svg",ei,[].concat(ni))}var ri={render:oi},Rn=function(){return R({name:"IconMic",component:ri})()},ii={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},li=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{fill:"#FFF",d:"M18.805 22 19 19.989h-5.674v-4.274h5.079V13.85h-5.08V9.992h5.387L18.935 8H11v14z"})],-1),ai=[li];function si(e,t){return m(),T("svg",ii,[].concat(ai))}var di={render:si},Mn=function(){return R({name:"IconExcelType",component:di})()},ci={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},ui=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"M19.583 10.21c.575 0 1.042.467 1.042 1.04v.417h-5.28a.827.827 0 0 1-.59-.243l-1.213-1.215h6.041Zm2.292 1.477v-.436a2.294 2.294 0 0 0-2.292-2.292h-7.291l-.381-.381a.827.827 0 0 0-.59-.245H8.334c-.51 0-.962.238-1.269.602A1.65 1.65 0 0 0 6.667 10v9.167c0 1.375 1.126 2.5 2.5 2.5h11.666c.766 0 1.445-.356 1.905-.902a2.47 2.47 0 0 0 .595-1.598v-5.834c0-.845-.64-1.541-1.458-1.646Z",fill:"#FFF"})],-1),pi=[ui];function hi(e,t){return m(),T("svg",ci,[].concat(pi))}var fi={render:hi},Nn=function(){return R({name:"IconFileType",component:fi})()},mi={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},gi=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"M20.774 18.946a5.662 5.662 0 0 1-3.288-1.337c-1.821.4-3.554.98-5.287 1.693C10.82 21.752 9.533 23 8.422 23c-.222 0-.489-.045-.667-.178A1.313 1.313 0 0 1 7 21.619c0-.401.089-1.515 4.31-3.342.978-1.782 1.733-3.609 2.355-5.525-.533-1.069-1.688-3.698-.889-5.034.267-.49.8-.758 1.378-.713.444 0 .888.223 1.155.579.578.802.533 2.495-.222 4.99a13.434 13.434 0 0 0 2.755 3.565c.933-.179 1.866-.312 2.8-.312 2.088.044 2.399 1.024 2.354 1.604 0 1.515-1.466 1.515-2.222 1.515ZM8.333 21.708l.133-.045c.622-.222 1.111-.668 1.467-1.247-.667.267-1.2.713-1.6 1.292Zm5.91-13.367h-.134c-.044 0-.133 0-.177.045-.178.757-.045 1.56.266 2.272.267-.757.267-1.56.045-2.317Zm.31 6.46-.044.09-.044-.045c-.4 1.025-.844 2.05-1.333 3.03l.089-.044v.089a25.823 25.823 0 0 1 3.021-.891l-.044-.045h.133a13.645 13.645 0 0 1-1.777-2.183Zm6.044 2.362c-.4 0-.756 0-1.156.09.445.222.89.311 1.333.356.311.044.623 0 .89-.09 0-.133-.179-.356-1.067-.356Z",fill:"#FFF"})],-1),vi=[gi];function yi(e,t){return m(),T("svg",mi,[].concat(vi))}var wi={render:yi},zn=function(){return R({name:"IconPdfType",component:wi})()},Ti={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},bi=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"M7 10v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2Zm14.165 2.632a1 1 0 0 1 .335.747v6.616a.5.5 0 0 1-.5.5H10.468a.5.5 0 0 1-.407-.79l2.37-3.338a1 1 0 0 1 1.449-.195l1.249 1.02a.5.5 0 0 0 .69-.055l3.934-4.423a1 1 0 0 1 1.412-.082ZM10.5 10a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z",fill:"#FFF"})],-1),Si=[bi];function ki(e,t){return m(),T("svg",Ti,[].concat(Si))}var Ei={render:ki},xn=function(){return R({name:"IconPictureType",component:Ei})()},Ci={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},_i=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"M13.851 22v-5.395c.67.129 1.267.193 1.787.193.953 0 1.796-.185 2.53-.556a4.1 4.1 0 0 0 1.716-1.595c.41-.693.616-1.503.616-2.432 0-1.366-.458-2.41-1.373-3.132S16.892 8 15.167 8H11.5v14h2.351Zm1.354-7.048c-.313 0-.765-.049-1.354-.145v-4.97h1.28c.99 0 1.74.19 2.251.57.511.38.767 1.003.767 1.866 0 .851-.25 1.51-.752 1.978-.502.467-1.232.7-2.192.7Z",fill:"#FFF"})],-1),Ii=[_i];function Ui(e,t){return m(),T("svg",Ci,[].concat(Ii))}var Fi={render:Ui},Bn=function(){return R({name:"IconPptType",component:Fi})()},$i={class:"text-type_svg__tiny-icon-text-type",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Li=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{fill:"#FFF",d:"M16.3 22.5V9.665h4.46L21 7.5H9.23L9 9.665h4.69V22.5z"})],-1),Di=[Li];function Ai(e,t){return m(),T("svg",$i,[].concat(Di))}var Pi={render:Ai},jn=function(){return R({name:"IconTextType",component:Pi})()},Oi={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Ri=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"M23.257 10.647a1.519 1.519 0 0 0-1.507-.042l-2.035 1.079v-.668a2.516 2.516 0 0 0-2.51-2.516H8.51A2.516 2.516 0 0 0 6 11.016v7.968A2.516 2.516 0 0 0 8.51 21.5h8.695a2.516 2.516 0 0 0 2.51-2.516v-.65l2.035 1.06c.479.255 1.041.24 1.507-.041.465-.281.743-.773.743-1.318v-6.07c0-.545-.278-1.037-.743-1.318m-7.66 4.986-3.388 1.769a.87.87 0 0 1-.806 0A.711.711 0 0 1 11 16.77v-3.54c0-.263.15-.499.403-.63a.863.863 0 0 1 .806 0l3.388 1.769A.713.713 0 0 1 16 15c0 .264-.15.5-.403.633",fill:"#FFF"})],-1),Mi=[Ri];function Ni(e,t){return m(),T("svg",Oi,[].concat(Mi))}var zi={render:Ni},Hn=function(){return R({name:"IconVideoType",component:zi})()},xi={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Bi=g("g",null,[g("rect",{width:"30",height:"30",rx:"2"}),g("path",{d:"m12.077 21.5 2.174-7.532c.155-.527.287-1.009.397-1.446.11-.437.224-.937.343-1.5a27.753 27.753 0 0 0 .74 3l2.21 7.478h2.299L24 8.5h-2.237l-2.076 8.044a34.23 34.23 0 0 0-.561 2.29c-.095-.653-.291-1.46-.588-2.424L16.185 8.5h-2.317l-2.236 7.82c-.19.634-.404 1.472-.642 2.514a22.638 22.638 0 0 0-.517-2.37L8.353 8.5H6l3.805 13h2.272Z",fill:"#FFF"})],-1),ji=[Bi];function Hi(e,t){return m(),T("svg",xi,[].concat(ji))}var Vi={render:Hi},Vn=function(){return R({name:"IconWordType",component:Vi})()},Wi={viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Zi=_o('<g><rect width="30" height="30" rx="2"></rect><g transform="translate(11 4)" fill="#FFF"><rect width="4" height="4" rx=".5"></rect><rect x="4" y="4" width="4" height="4" rx=".5"></rect><rect y="8" width="4" height="4" rx=".5"></rect><path d="M7 14a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h6Zm-.5 4h-5a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Z"></path></g></g>',1),Yi=[Zi];function Ki(e,t){return m(),T("svg",Wi,[].concat(Yi))}var qi={render:Ki},Wn=function(){return R({name:"IconZipType",component:qi})()},Gi={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Qi=g("path",{d:"M512.331 932c-8.559.045-16.764-3.216-22.674-9.014-6.09-5.495-9.448-13.126-9.284-21.047a28.477 28.477 0 0 1 2.53-11.383c1.663-3.626 3.896-6.95 6.754-9.865 12.78-11.116 32.526-11.116 45.308 0a34.928 34.928 0 0 1 6.784 9.865 28.953 28.953 0 0 1 2.562 11.383c-.134 16.531-14.367 29.907-31.98 30.06m255.64-150.056c-11.424 0-21.979-5.726-27.688-15.01-5.706-9.279-5.706-20.718 0-30.005 5.709-9.288 16.264-15.002 27.687-15.002 105.928 0 191.797-80.604 191.797-180.035 0-99.432-85.87-180.034-191.797-180.034h-28.192l-5.639-26.128c-13.803-105.132-108.95-184.11-221.794-184.11-112.853 0-207.989 78.978-221.792 184.11l-3.648 27.417-29.426-1.15h-.18c-105.873-.169-191.853 80.258-192.03 179.638-.18 99.388 85.501 180.085 191.382 180.254 17.232.542 30.91 13.822 30.91 30.012s-13.678 29.462-30.91 30.004C119.913 782.412 6.968 681.829.308 553.63c-6.66-128.197 95.332-238.62 231.467-250.604C261.125 179.697 377.717 92 512.345 92c134.63 0 251.222 87.697 280.57 211.027 67.49 6.105 129.625 37.128 172.747 86.247 43.115 49.111 63.673 112.292 57.153 175.644-12.633 123.191-122.995 217.17-254.845 217.025"},null,-1),Xi=g("path",{d:"M511.99 822c-7.954.007-15.584-3.034-21.2-8.448-5.624-5.421-8.78-12.778-8.773-20.436V475.888c-.366-10.553 5.265-20.463 14.696-25.848 9.424-5.387 21.148-5.387 30.58 0 9.424 5.385 15.063 15.295 14.69 25.848v317.228c-.038 15.946-13.452 28.864-29.994 28.884"},null,-1),Ji=g("path",{d:"M631.81 603a30.144 30.144 0 0 1-21.274-8.715l-99.075-98.432-99.105 98.468c-11.893 10.721-30.166 10.282-41.53-.99-11.356-11.276-11.813-29.43-1.029-41.255l105.33-104.612c20.332-19.285 52.336-19.285 72.67 0l105.292 104.612c8.673 8.508 11.298 21.39 6.622 32.578-4.674 11.189-15.707 18.439-27.902 18.345"},null,-1),el=[Qi,Xi,Ji];function tl(e,t){return m(),T("svg",Gi,[].concat(el))}var nl={render:tl},Zn=function(){return R({name:"IconFileuploadPro",component:nl})()},ol={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",style:{"enable-background":"new 0 0 16 16"},"xml:space":"preserve"},rl=g("rect",{style:{fill:"none"}},null,-1),il=g("path",{class:"document_svg__st1",d:"m13.4 5.6-4-4c-.1 0-.3-.1-.4-.1H5C3.6 1.5 2.5 2.6 2.5 4v8c0 1.4 1.1 2.5 2.5 2.5h6c1.4 0 2.5-1.1 2.5-2.5V6c0-.1-.1-.3-.1-.4zm-.9 6.4c0 .8-.7 1.5-1.5 1.5H5c-.8 0-1.5-.7-1.5-1.5V4c0-.8.7-1.5 1.5-1.5h3.8l3.7 3.7V12zm-7-4.5h5c.3 0 .5.2.5.5s-.2.5-.5.5h-5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5zM11 11c0 .3-.2.5-.5.5h-5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h5c.3 0 .5.2.5.5z"},null,-1),ll=[rl,il];function al(e,t){return m(),T("svg",ol,[].concat(ll))}var sl={render:al},dl=function(){return R({name:"IconDocument",component:sl})()};const cl=()=>e=>parseInt(e,10),ul=({props:e,api:t,parent:n})=>(o,r)=>{if(o.preventDefault(),n.state.isEdm){const{downloadFile:l}=t.getApi();e.openDownloadFile&&l&&l(r)}else e.openDownloadFile&&t.downloadFile(r);return e.handlePreview&&e.handlePreview(r)},Yn=e=>t=>{const n=t&&t.response&&t.response.data;let o;if(Array.isArray(n))o=n[0];else if(n&&typeof n=="object")for(let r in n){o=n[r];break}if(o)e.getFileDownloadUrl().then(r=>{window.open(ae.filterUrl(r+"&id="+o.attachmentId+"&type=AttachmentDemo")).opener=null});else if(t.url)window.open(ae.filterUrl(t.url)).opener=null;else throw new Error("[TINY Error][FileUpload]file.url must not be empty")},pl=e=>t=>{e.startPostion=t,e.shows=!0},hl=e=>t=>{e("remove",t)},fl=({state:e})=>({file:t})=>{e.currentFile=t,e.showPanel=!0},ml=({emit:e,props:t,parent:n})=>o=>{n.state.isEdm?e("start",[o&&o.raw],"",!0):t.handleReUpload&&t.handleReUpload(o)},gl=({type:e,el:t},n)=>t&&t.addEventListener(e,n),it=({type:e,el:t},n)=>t&&t.removeEventListener(e,n),vl=({vm:e,api:t,props:n})=>({file:o,index:r,type:l})=>{if(n.isHwh5)return n.triggerPlay(o,l,"play");const i=e.$refs[l+(o.uid||r)]&&e.$refs[l+(o.uid||r)][0];if(o.isPlay)return t.pause({file:o,index:r,type:l});i&&i.play&&(o.playEvent=()=>{o&&(o.isPlay=!1,it({type:"ended",el:i},o.playEvent))},o.el=i,it({type:"ended",el:i},o.playEvent),gl({type:"ended",el:i},o.playEvent),e.$set(o,"isPlay",!0),i.play())},yl=({vm:e,props:t})=>({file:n,index:o,type:r})=>{if(t.isHwh5)return t.triggerPlay(n,r,"pause");const l=e.$refs[r+(n.uid||o)]&&e.$refs[r+(n.uid||o)][0];l&&l.pause&&(it({type:"ended",el:l},n.playEvent),n.isPlay=!1,l.pause())},wl=({vm:e})=>({e:t,file:n})=>{var o,r;e.$set(n,"totalSecond",parseInt((o=t.target)==null?void 0:o.duration)),e.$set(n,"currentSecond",parseInt((r=t.target)==null?void 0:r.currentTime))},Tl=()=>({e,file:t})=>{var n;t.currentSecond=parseInt((n=e.target)==null?void 0:n.currentTime)},bl=()=>({file:e})=>e.name&&e.name.split(".")[e.name.split(".").length-1].toLowerCase(),Sl=({constants:e})=>({type:t})=>{const{EXCEL:n,FILE:o,PDF:r,PICTURE:l,PPT:i,TEXT:a,WORD:s,ZIP:c,VIDEO:p,AUDIO:u}=e.FILE_TYPE;let h={[n]:{name:"icon-excel-type",color:"#09AA71"},[o]:{name:"icon-file-type",color:"#09AA71"},[r]:{name:"icon-pdf-type",color:"#E02128"},[l]:{name:"icon-picture-type",color:"#5531EB"},[i]:{name:"icon-ppt-type",color:"#E02128"},[a]:{name:"icon-text-type",color:"#2CB8C9"},[s]:{name:"icon-word-type",color:"#0067D1"},[c]:{name:"icon-zip-type",color:"#2CB8C9"},[p]:{name:"icon-video-type",color:"#0067D1"},[u]:{name:"icon-audio",color:"#5531EB"},default:{name:"icon-other-type",color:"#9185F0"}};for(const w in h)if(Object.hasOwnProperty.call(h,w)){const f=h[w];delete h[w],w.split("/").forEach(v=>h[v]=f)}return h[t]||h.default},kl=({emit:e})=>({file:t})=>e("remove",t),El=({vm:e,nextTick:t,props:n,constants:o})=>()=>{const{listType:r}=n,{LIST_TYPE:l}=o;t(()=>{const i=e.$refs.uploadList,a=i&&i.querySelectorAll('[data-tag="tiny-upload-list-item"]');if(!(!i||!(a&&a[0]))&&(r===l.TEXT||r===l.SAAS)){const{minWidth:s}=window.getComputedStyle(a&&a[0]),c=8,p=Math.floor(i.offsetWidth/(parseFloat(s)+c));Array.from(a).forEach((u,h)=>{!((h+1)%p)||p===1?(u.style.marginRight=0,u.style.width=`${100/p}%`):(u.style.marginRight=`${c}px`,u.style.width=`calc(${100/p}% - ${c}px)`)})}})},Cl=({props:e,constants:t,emit:n})=>()=>{const{SUCESS:o}=t.FILE_STATUS,r=e.files.every(({status:l})=>l===o||!l);n("update:visible",!r)},_l=({props:e,constants:t})=>()=>{const{SUCESS:n}=t.FILE_STATUS;let o=e.files;return e.mode===t.MODE.BUBBLE&&e.listType===t.LIST_TYPE.TEXT&&(o=e.files.filter(({status:r})=>r!==n)),o},Il=({state:e,constants:t})=>n=>{const{SOURCE_AUDIO:o}=t.SOURCE_TYPE;n===o?e.showAudioPanel=!0:e.showTriggerPanel=!0,e.triggerClickType=n},Ul=({state:e,props:t})=>(n,o)=>new Promise(r=>{let l=t.triggerClick(n,e.triggerClickType,o);l&&l.then?l.then(()=>{e.showTriggerPanel=!1,r()}).catch(()=>{e.showTriggerPanel=!1,e.showAudioPanel=!1}):(e.showTriggerPanel=!1,r())}),Fl=({api:e,vm:t})=>()=>{const n=t.$refs.uploadList;n&&(wo(n,e.calcUploadListLiWidth),t._removeResizeListener=()=>To(n,e.calcUploadListLiWidth))},$l=({props:e,vm:t})=>()=>{t._removeResizeListener&&(t._removeResizeListener(),t._removeResizeListener=null),e.files.forEach(n=>{it({type:"ended",el:n.el},n.playEvent),delete n.playEvent,delete n.isPlay,delete n.el})};let $t=null;const H=(e,t)=>e||(()=>t?Promise.reject(new Error(`[TINY Error][FileUpload] Prop ${t} is mandatory when the framework service is not used`)):Promise.reject(new Error("[TINY Error][FileUpload] Prop action is mandatory when the framework service is not used"))),Kn=({props:e,service:t})=>{const{network:n={},common:o={}}=t||{},{request:r,get:l,post:i,all:a,spread:s,CancelToken:c={}}=n;let p;if(Dt(e.hwh5))r?p=e.httpRequest||r:p=e.httpRequest||vn;else{const{HWH5:u}=e.hwh5,{uploadToEDM:h}=u();p=e.httpRequest||h}return{get:H(l),post:H(i),request:H(r),all:H(a),spread:H(s),cancelToken:H(c.source),getSingleUploadUrl:H(o.getSingleUploadUrl),getFileUploadUrl:H(o.getFileUploadUrl),getFileDownloadUrl:H(o.getFileDownloadUrl),getSingleDownloadUrl:H(o.getSingleDownloadUrl),getPackageDownloadUrl:H(o.getPackageDownloadUrl),getAsyncPackageDownload:H(o.getAsyncPackageDownload),getLargeFileInitUrl:H(o.getLargeFileInitUrl),getChunkUploadUrl:H(o.getChunkUploadUrl),getPreviewUrl:H(o.getPreviewUrl),getDocumentInfoUrl:H(o.getDocumentInfoUrl),getPreviewUrlBatch:H(o.getPreviewUrlBatch),httpRequest:H(p,"httpRequest")}},Ll=({props:e,state:t})=>()=>e.disabled||(t.form||{}).disabled,Dl=({state:e,constants:t})=>()=>e.uploadingFiles.reduce((n,o)=>n+o.status!==t.FILE_STATUS.FAIL?o.size:0,0),Al=({constants:e,state:t,api:n})=>o=>{[e.LIST_TYPE.PICTURE_CARD,e.LIST_TYPE.PICTURE,e.LIST_TYPE.PICTURE_SINGLE,e.LIST_TYPE.DRAG_SINGLE].includes(o)&&(t.uploadFiles=t.uploadFiles.map(r=>{if(r.type=n.getFileSourceType({file:r}),!r.url&&r.raw)try{r.url=URL.createObjectURL(r.raw)}catch{return null}return r}))},Pl=({constants:e,state:t,props:n,api:o})=>r=>{let l=r&&r.map(i=>(i.uid=i.uid||Date.now()+t.tempIndex++,i.status=i.status||e.FILE_STATUS.SUCESS,i));[e.LIST_TYPE.PICTURE_SINGLE,e.LIST_TYPE.DRAG_SINGLE].includes(n.listType)&&(l=l.slice(0,1)),t.uploadFiles=l},Ol=({flag:e,doUpload:t,file:n})=>!e&&t(n),Rl=({before:e,rawFile:t,file:n,doUpload:o,autoRemove:r,api:l})=>{e.then(i=>{const a=Object.prototype.toString.call(i);if(a==="[object File]"||a==="[object Blob]"){a==="[object Blob]"&&(i=new File([i],t.name,{type:t.type}));for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);n.raw=i}o(n)},()=>{r&&(Array.isArray(t)?t.forEach(i=>l.handleRemove(null,i)):l.handleRemove(null,t))})},Jt=(e,t,n,o)=>e.some(r=>r.toLowerCase()===n.IMAGE_TYPE?n.FILE_TYPE.PICTURE.split("/").includes(o):new RegExp(`(${r.trim()})$`,"i").test(t.name)),Pt=({file:e})=>{const{name:t,url:n}=e;let o="";return t&&/\.[^.]+$/.test(t)?o=t.split(".")[t.split(".").length-1].toLowerCase():n&&/\.[.]+$/.test(n)&&(o=n.split(".")[n.split(".").length-1].toLowerCase()),o},Lt=({api:e,file:t,autoRemove:n})=>{if(n){const o=t.raw;Array.isArray(o)?o.forEach(r=>e.handleRemove(null,r)):e.handleRemove(null,o)}},Ml=({props:e,api:t,Modal:n,constants:o,t:r,state:l})=>(i,a,s,c=!1)=>{if(l.isEdm&&i.name.length>255)return Lt({api:t,file:i,autoRemove:a}),n.message({message:`${r(o.EDM.THEFILENAME)}"${i.name}"${r(o.EDM.FILENAMEEXCEEDS)}`,status:"warning"});if(i){let u=!0;const h=l.isEdm?l.accept:e.accept,w=o.FILE_TYPE[l.triggerClickType.toUpperCase()],f=h?h.split(","):[];let v="";if(c){const S=[];v=i.raw.flatMap(b=>{const E=Pt({file:b});return h?Jt(f,b,o,E)?S.push(b):Lt({api:t,file:b,autoRemove:a}):S.push(b),E}),S.length||(u=!1),i.raw=S}else v=Pt({file:i}),h&&!Jt(f,i,o,v)&&(u=!1);if(l.triggerClickType&&w&&!w.split("/").includes(v)&&(u=!1),!u)return Lt({api:t,file:i,autoRemove:a}),n.message({message:v?r(o.EDM.notSupport,{format:v}):r(o.EDM.NOT_SUPPORT_NO_SUFFIX),status:"warning"})}let p=typeof e.beforeUpload=="function";if(Ol({flag:p,doUpload:s,file:i}),p){const{rawFile:u=i.raw,before:h=e.beforeUpload(u)}={};h&&h.then?Rl({before:h,rawFile:u,file:i,doUpload:s,autoRemove:a,api:t}):h!==!1?s(i):a&&(Array.isArray(u)?u.forEach(w=>t.handleRemove(null,w)):t.handleRemove(null,u))}},Nl=({state:e,constants:t,vm:n,Modal:o,api:r,t:l})=>(i,a)=>{if(e.isHwh5){n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(i.raw);return}i.size>e.docSize&&i.size>e.chunkSize?(i.isLargeFile=!0,a&&e.uploadFiles.forEach(s=>{s.cacheSign===i.cacheSign&&(s.percentage=0)}),r.largeDocumentUpload(i),o.message({message:`${i.name}${l(t.EDM.LARGEFILEKEY)}`,status:"warning"})):n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(i.raw)},zl=(e,t)=>{const n=e.name.lastIndexOf("."),o=e.name.length;t.fileType=e.name.substring(n+1,o);const r=e.size/1024;if(r<1024)t.size=Math.round(r*10**1)/10**1+"KB";else{const l=r/1024;t.size=Math.round(l*10**1)/10**1+"MB"}},xl=({props:e,state:t,api:n,constants:o,Modal:r,t:l})=>i=>{if([void 0,null].includes(i.size))return!0;let a=0;if(Array.isArray(e.fileSize)&&e.fileSize[1]?a=t.isEdm?Math.min(t.singleMaxSize,e.fileSize[1]/1024):Math.max(e.fileSize[0]/1024,e.fileSize[1]/1024):a=t.isEdm?Math.min(t.singleMaxSize):e.fileSize/1024,(t.isEdm||Array.isArray(e.fileSize)&&e.fileSize[1])&&!isNaN(Number(a))&&i.size>a*1024*1024)return r.message({message:l(o.EDM.EXCEED,{fileName:i.name,maxSize:n.formatFileSize(Number(a*1024*1024))}),status:"warning"}),!1;if(i.size<=0)return r.message({message:l(o.EDM.FILEEMPTY),status:"warning"}),!1;const s=e.fileSize&&(e.fileSize[0]||e.fileSize)||0;return i.size<=s*1024?(r.message({message:`${l(o.EDM.SIZE,{fileName:i.name,minSize:n.formatFileSize(Number(s),"KB"),sizeUnit:""})}`,status:"warning"}),!1):!0},Bl=({api:e,constants:t,emit:n,props:o,state:r,mode:l})=>(i,a,s)=>{!s&&(i.uid=Date.now()+r.tempIndex++);let c={status:t.FILE_STATUS.READY,name:i.name,size:i.size};if(Object.assign(c,{percentage:0,uid:i.uid,raw:i,response:{}}),c.type=e.getFileSourceType({file:c}),r.isEdm){let p={serverName:"",docRelativePath:"",docId:"",docVersion:"",cacheSign:i.uid};c=Object.assign(c,p),o.edm.upload.isFolder&&i.webkitRelativePath&&(c.path=i.webkitRelativePath.match(/.*\//g)[0])}if(r.cacheDocuments[c.uid]=c,l==="mobile"&&zl(i,c),[t.LIST_TYPE.PICTURE_CARD,t.LIST_TYPE.PICTURE,t.LIST_TYPE.PICTURE_SINGLE,t.LIST_TYPE.DRAG_SINGLE].includes(o.listType))try{r.isHwh5?c.url=i.filePath:c.url=URL.createObjectURL(i)}catch{return}if(r.isEdm&&r.isSuccess){if(!e.properFileSize(c))return;if(r.updateId=a||o.edm.updateId||"",s){const u=r.uploadFiles.findIndex(h=>h.uid===c.uid);r.uploadFiles.splice(u,1)}else if(r.updateId){const u=r.uploadFiles.findIndex(h=>h.docId===a);r.uploadFiles.splice(u,1,c),n("change",c,r.uploadFiles);return}}!r.isEdm&&!e.properFileSize(c)||(r.uploadFiles.push(c),r.currentUploadingFileUids.push(c.uid),n("change",c,r.uploadFiles))},jl=({emit:e,Modal:t,constants:n,t:o,state:r})=>({file:l,showTips:i})=>(i&&t.message({message:`${o(n.EDM.CALCHASH)}`,status:"warning"}),new Promise(a=>{const s=new FileReader;s.readAsArrayBuffer(l.raw),s.onload=async c=>{if(l.status===n.FILE_STATUS.FAIL)return;const p=yn(c.target&&c.target.result);l.hash=l.raw.hash=p,a(p),e("hash-progress",100)},s.onerror=c=>{l.status=n.FILE_STATUS.FAIL,e("error",c,l,r.uploadFiles)}})),Hl=(e,t)=>{const n=t&&t.fileMap;return e.map(o=>{if(o instanceof File)return o;let r,l={};lt(o)?(r=o.url,l=o):r=o;const[i,a]=r.match(/[^/]*$/),[s]=r.match(/\.[^.]*$/),c=r.substring(0,a),p=jt(de({},l),{type:s,name:i,filePath:c,webkitRelativePath:c});return typeof n=="function"?n(p):p})},Vl=({api:e,constants:t,props:n,state:o,vm:r})=>(l,i,a=!1)=>{o.isHwh5&&(l=Hl(l,n.hwh5)),o.currentUploadingFileUids=[],l.forEach(p=>e.addFileToList(p,i,a));const{UPLOADING:s,READY:c}=t.FILE_STATUS;if(o.uploadingFiles=o.uploadFiles.filter(p=>[s,c].includes(p.status)),o.isEdm&&o.isSuccess&&l.forEach(p=>{const u=e.getFile(p);!u||e.beforeUpload(u,!0,h=>{typeof n.edm.upload.loading=="function"&&n.edm.upload.loading(h),new Promise(w=>{if(o.isHwh5)return w();let f=!1;if(n.edm.isCheckCode!==!0)return w();if(h.size>o.docSize&&h.size>o.chunkSize)if(o.isEntireCheckCode)f=!0;else return w();e.getFileHash({file:h,showTips:f}).then(v=>w(v))}).then(()=>{if(n.autoUpload){const w={token:n.edm.upload.token,file:h,type:"upload"};e.getToken(w).then(f=>{f&&(h.status=t.FILE_STATUS.UPLOADING,e.startUpload(h,!0))})}})})}),!o.isEdm&&n.autoUpload)if(n.multiple&&n.mergeService){const p=u=>r.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(u.raw);l.length&&e.beforeUpload({raw:l},!0,p,!0)}else l.forEach(p=>{const u=e.getFile(p);if(!u)return;const h=w=>r.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(w.raw);e.beforeUpload(u,!0,h)})},Wl=({state:e,constants:t})=>()=>{let n;if(e.isHwh5){const r=e.uploadingFiles.reduce((l,i)=>{const a=i.status!==t.FILE_STATUS.FAIL?i.percentage/100:0;return l+a},0);n=Math.floor(r/e.uploadingFiles.length*100)}else{const r=e.uploadingFiles.reduce((l,i)=>{const a=i.status!==t.FILE_STATUS.FAIL?i.size*i.percentage/100:0;return l+a},0);n=Math.floor(r/e.uploadingSize*100)}n=Math.min(n,100);const o=e.uploadingFiles.filter(r=>r.percentage===100);return{percentage:n,uploadList:e.uploadingFiles,uploadedCount:o.length}},Zl=({api:e,constants:t,emit:n,state:o})=>(r,l)=>{if(Array.isArray(l))o.uploadFiles.forEach(i=>{l.some(a=>i.uid===a.uid)&&(i.status=t.FILE_STATUS.UPLOADING,r.lengthComputable&&(i.percentage=Math.floor(r.loaded*100/r.total)||0),n("progress",i,o.uploadFiles,e.calcUploadingFilesInfo()))});else{const i=e.getFile(l);if(i)if(i.status=t.FILE_STATUS.UPLOADING,o.isHwh5){const{progress:a}=JSON.parse(r);i.percentage=a,i.percentage>=100&&(i.isFinished=!0),n("progress",i,o.uploadFiles,e.calcUploadingFilesInfo())}else r.lengthComputable&&!i.isLargeFile&&(i.percentage=Math.floor(r.loaded*100/r.total)||0,i.percentage>=100&&(i.isFinished=!0),n("progress",i,o.uploadFiles,e.calcUploadingFilesInfo()))}},Yl=({api:e,constants:t,emit:n,state:o,props:r,Modal:l,t:i})=>(a,s)=>{var c;const p=o.uploadFiles.filter(u=>o.currentUploadingFileUids.includes(u.uid));if(Array.isArray(s))o.uploadFiles.forEach(u=>{s.some(h=>u.uid===h.uid)&&(u.status=t.FILE_STATUS.SUCESS,u.percentage=100,u.response=a,n("success",a,u,p),n("change",u,o.uploadFiles),delete u.cancelToken)});else{const u=e.getFile(s),h=(c=a==null?void 0:a.data)==null?void 0:c.status,{STATUS_SPECIAL_CHARACTERS:w,NOT_SUPPORT_SPECIAL_CHARACTERS:f}=t.EDM;if(u&&delete u.cancelToken,r.edm.upload&&u&&a.data&&h!==200){h===w&&l.message({message:`${i(f)}`,status:"warning"}),u.status=t.FILE_STATUS.FAIL,n("error",a,u,o.uploadFiles);return}if(u){if(u.status=t.FILE_STATUS.SUCESS,u.percentage=100,u.isFinished||n("progress",u,o.uploadFiles,e.calcUploadingFilesInfo()),u.isLargeFile&&delete a.config,u.response=a,o.isEdm){const v=o.isHwh5?a:a.data.result;if(!v)return;u.serverName=v.serverName,u.docRelativePath=v.docRelativePath,u.docId=v.docId,u.docVersion=v.version,u.docSize=v.docSize,u.isLargeFile&&delete u.raw,Object.assign(u,v)}n("success",a,u,p),n("change",u,o.uploadFiles)}}e.clearUploadingFiles()},Kl=({api:e,constants:t,emit:n,state:o,props:r})=>(l,i)=>{const a=e.getFile(i);!a||(a.status=t.FILE_STATUS.FAIL,a.percentage=100,!o.isEdm&&!r.reUploadable&&o.uploadFiles.splice(o.uploadFiles.indexOf(a),1),e.clearUploadingFiles(),n("error",l,a,o.uploadFiles),n("change",a,o.uploadFiles))},ql=({api:e,emit:t,props:n,state:o,constants:r})=>(l,i)=>{i&&(l=e.getFile(i));let a=()=>{e.abort(l);let s=o.uploadFiles;s.splice(s.indexOf(l),1),t("remove",jt(de({},l),{status:r.FILE_STATUS.FAIL}),s)};if(!n.beforeRemove)a();else if(typeof n.beforeRemove=="function"){const s=n.beforeRemove(l,o.uploadFiles);s&&s.then?s.then(()=>{a()},()=>{}):s!==!1&&a()}},Gl=({vm:e,constants:t})=>n=>{const{READY:o}=t.FILE_STATUS;n.status=o,n.percentage=0,e.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(n.raw)},Ql=e=>t=>{t.forEach(n=>{n.status==="fail"&&e.handleReUpload(n)})},Xl=({constants:e,state:t})=>()=>{const{SUCESS:n,FAIL:o}=e.FILE_STATUS;t.uploadingFiles.every(l=>[n,o].includes(l.status))&&(t.uploadingFiles=[])},Jl=e=>t=>{let n=e.uploadFiles,o;return n.every(r=>(o=t.uid===r.uid?r:null,!o)),o},ea=({constants:e,vm:t,state:n})=>o=>{const{READY:r,UPLOADING:l,FAIL:i}=e.FILE_STATUS;o?n.uploadingFiles.forEach(a=>{const s=o.uid||o;a.uid===s&&[r,l].includes(a.status)&&(a.status=i)}):n.uploadingFiles.forEach(a=>{[r,l].includes(a.status)&&(a.status=i)}),t.$refs[e.UPLOAD_INNER].$refs[e.UPLOAD_INNER_TEMPLATE].abort(o)},ta=({state:e})=>(t,n=!1)=>{const o=r=>{if(!r)return;const l=e.downloadCancelToken[r];l&&l.forEach(a=>a()),delete e.downloadCancelToken[r];const i=e.downloadCancelData[r];i&&i(r)};Array.isArray(t)?n?o(t.map(r=>r.docId||r).sort().join(",")):t.forEach(r=>r&&o(t.docId||t)):t?o(t.docId||t):Object.keys(e.downloadCancelToken).forEach(r=>{o(r)})},na=e=>()=>{e.uploadFiles=[]},oa=({api:e,constants:t,vm:n,state:o,props:r})=>()=>{const l=o.uploadFiles.filter(i=>i.status===t.FILE_STATUS.READY);if(o.isEdm&&o.isSuccess)l.forEach(i=>{e.getToken({token:r.edm.upload.token,file:i,type:"upload"}).then(a=>{a&&e.beforeUpload(i,!1,s=>{e.startUpload(s)})})});else if(r.multiple&&r.mergeService){const i=l.map(a=>a.raw);i.length&&e.beforeUpload({raw:i},!1,a=>{n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(a.raw)})}else l.forEach(i=>{e.beforeUpload(i,!1,a=>{n.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(a.raw)})})},ra=({constants:e,vm:t})=>()=>t.$refs[e.UPLOAD_INNER].$refs[e.UPLOAD_INNER_TEMPLATE].handleClick(),ia=e=>()=>e.getFileUploadUrl(),la=({api:e,props:t,state:n})=>()=>{t.action?n.url=t.action:e.getFileUploadUrl().then(o=>n.url=o)},aa=({props:e,emit:t})=>n=>{t("preview",n),e.preview&&e.preview(n)},qn=({api:e,isChunk:t,isLessThan17G:n,file:o,state:r})=>(l,i,a)=>{if(t)a===0&&(r.downloadCancelData[o.docId]=e.setWriterFile({data:l,index:a,isLessThan17G:n,file:o}));else{const s=l.headers["content-disposition"],c=s?s.match(/fileName.?=(.*)/)[1]||s.match(/fileName=(.*)/)[1]:"";let p="application/zip";c.includes(".")?p!=="zip"&&(p="application / x - xls"):p=l.headers["content-type"];const u=new Blob([l.data],{type:p});Gn({blob:u,name:c})}},Gn=({blob:e,name:t})=>{if(window&&window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(e,decodeURIComponent(t));return}const n=window.URL||window.webkitURL||window.moxURL,o=ae.filterUrl(n.createObjectURL(e));let r=document.createElement("a");r.href=o,r.download=decodeURIComponent(t),r.click(),n.revokeObjectURL&&n.revokeObjectURL(o)},Qn=({state:e,downloadOps:t,file:n,translateFile:o,isChunk:r,isLessThan17G:l})=>(i,a,s)=>{if(r){const c=l?i.data:new Uint8Array(i.data);let p=e.downloadChunkFile[n.docId];p||(p={}),p[s]=c,o(i,a,s)}else typeof t.loading=="function"&&t.loading(n),o(i,a);return!0},Xn=()=>e=>{let t;e.target&&e.target.getResponseHeader?t=Number(e.target.getResponseHeader("Content-Size")):t=Number(e.total),t=Math.max(t,e.loaded);let n=Math.ceil(e.loaded/t*100)||0;return n=Math.max(n,0),n=Math.min(n,100),n},sa=({state:e,props:t,constants:n})=>({file:o,serviceUrl:r,range:l})=>{if(typeof o=="object"){const i=t.edm.download||{},a=Array.isArray(i.paramsWhitelist)?i.paramsWhitelist:[],s=e.downloadParamsWhitelist.concat(a);let c={};s.forEach(p=>c[p]=o[p]),c=Object.assign(c,l),delete c.docId,delete c.docVersion,delete c["x-download-sign"];for(let p in c){const u=c[p],h=typeof u;~["undefined","object","function"].indexOf(h)||(r+=`&${p}=${u}`)}o.status=n.FILE_STATUS.DOWNLOADING,o.percentage=0}return r},da=({Modal:e,constants:t,t:n})=>({data:o})=>{if(o.status===t.EDM.KIASTATUS)return e.message({message:`${n(t.EDM.KIASCANTIP)}`,status:"warning"})},ca=({state:e,Modal:t})=>({downloadOps:n,file:o,isLessThan17G:r,data:l})=>{const i=({state:a,file:s,errRes:c,Modal:p,downloadOps:u})=>{a.currentDownloadFiles&&a.currentDownloadFiles.docId===s.docId||(c&&c.message&&p.message({message:c.message,status:"warning"}),a.currentDownloadFiles=s,typeof u.fail=="function"&&u.fail(c,s))};if(l.data&&l.data.type&&l.data.type.includes("application/json")){const a=new FileReader;return a.onload=s=>{const c=JSON.parse(s.target.result);i({state:e,file:o,errRes:c,Modal:t,downloadOps:n})},a.readAsText(l.data),!0}if(!r&&l.headers["content-type"].includes("application/json")){const a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(l.data)));return i({state:e,file:o,errRes:a,Modal:t,downloadOps:n}),!0}},ua=({state:e,service:t})=>n=>{let o;Array.isArray(n)?o=n.map(i=>i.docId||i).sort().join(","):o=n.docId||n,e.downloadCancelToken[o]||(e.downloadCancelToken[o]=[]);const{cancel:r,token:l}=t.cancelToken();return e.downloadCancelToken[o].push(r),l},pa=({service:e,constants:t,props:n,state:o,api:r,emit:l})=>i=>{let{file:a,batchIndex:s,isChunk:c,calcProgress:p,handleSuccess:u,range:h={},isBatch:w,isLessThan17G:f,url:v}=i,S;v?S=Promise.resolve(v):S=e.getSingleDownloadUrl().then(b=>{let E=b.replace(/{docId}/,a.docId||a)+`${~b.indexOf("?")?"&":"?"}x-download-sign=true&docVersion=${a.docVersion||""}${a.decryptKey?"&decryptKey="+a.decryptKey:""}`;return E=r.modifyServiceUrlSingle({file:a,serviceUrl:E,range:h}),E}),S.then(b=>{b=ae.filterUrl(b);let E={withCredentials:n.withCredentials,headers:Object.assign(n.headers,o.headers),responseType:c&&!f?"arraybuffer":"blob",hideErr:!0,cancelToken:r.createDownloadCancelToken(a),onDownloadProgress(k){let d=p(k,c);d!==100&&!c&&l("download",d,k,{},a),typeof a=="object"&&(a.percentage=d)}};e.get(b,E).then(k=>{if(r.getKiaScanTip({data:k})||r.validateDownloadStatus({downloadOps:n.edm.download||{},file:a,isLessThan17G:f,data:k}))return;u(k,"",h.index);const{checkcode:d,"content-size":_}=k.headers;!c&&l("download",100,"",{checkcode:d,fileSize:_},a),typeof a=="object"&&(a.percentage=100,setTimeout(()=>a.status=t.FILE_STATUS.SUCESS,1e3)),r.afterDownload({batchIndex:s,data:k,file:a})}).catch(k=>{if(k.response&&o.errorStatusCodes.includes(k.response.status)){const _={token:(n.edm.download||{}).token,file:a,type:"download"};r.getToken(_).then(C=>{r.afterDownload({batchIndex:s,data:C,file:a,range:h,isChunk:c,isBatch:w,isLessThan17G:f})})}})})},ha=({api:e,service:t,props:n,state:o,emit:r})=>l=>{let{downloadOps:i,file:a,calcProgress:s,handleSuccess:c,range:p={},isLessThan17G:u}=l,h={token:i.packageToken,file:a,type:"download"};const{asyncPackages:w}=i||{};e.getToken(h).then(f=>{if(!f)return;const v={downloadTOs:[],attachdownloadTOs:[],isZip:"true",transformType:"sync",type:"package"};if(a.forEach(S=>{S.wmType?v.attachdownloadTOs.push(S):v.downloadTOs.push(S)}),w){e.downloadAsyncPackage(v);return}t.getPackageDownloadUrl().then(S=>{S=ae.filterUrl(S+`${~S.indexOf("?")?"&":"?"}x-download-sign=true`),t.post(S,de(de({},v),p),{withCredentials:n.withCredentials,headers:Object.assign(n.headers,o.headers),responseType:"blob",cancelToken:e.createDownloadCancelToken(a),onDownloadProgress(b){let E=s(b);E!==100&&r("download",E,b,{},a)}}).then(b=>{if(e.getKiaScanTip({data:b})||e.validateDownloadStatus({downloadOps:n.edm.download||{},file:a,isLessThan17G:u,data:b}))return;const{"content-size":E,checkcode:k}=b.headers;r("download",100,"",{fileSize:E,checkcode:k},a),c(b,"zip")})})})},fa=({state:e,props:t,service:n,api:o,constants:r})=>l=>n.getAsyncPackageDownload().then(i=>{n.request({method:"post",url:ae.filterUrl(i),withCredentials:t.withCredentials,headers:Object.assign(t.headers,e.headers),data:l}).then(a=>{if(a&&a.data&&a.data.status===200){const s=(a.data.result||[]).map(({downloadLink:w,fileSize:f})=>({url:w,fileSize:f})),{SIZE_17G:c}=r.EDM,p=!1,u=!1,h=t.edm.download||{};s.forEach(w=>{const f=!w.fileSize||w.fileSize<c*1024,v=qn({api:o,isChunk:u,isLessThan17G:f,file:w,state:e}),S=Qn({downloadOps:h,file:w,translateFile:v,isChunk:u,state:e,isLessThan17G:f}),b=Xn(),E={url:w.url,calcProgress:b,handleSuccess:S,downloadOps:h,file:w,isLessThan17G:f,isFinished:!1,range:{},batchIndex:0,isBatch:p,isChunk:u};o.downloadFileSingle(E)})}})}),ma=({state:e,props:t,emit:n,constants:o})=>({file:r})=>{const{HWH5:l,appId:i}=t.hwh5,{downloadToEDM:a}=l(),s={edmAuth:{edmToken:e.headers[o.EDM.EDMTOKEN],appId:i},docId:r.docId||r,docVersion:r.docVersion,filePath:r.filePath,progress:1,onProgress:c=>{const{progress:p}=JSON.parse(c);p*1!==100&&n("download",p,c,{},r)}};a(s).then(c=>{n("download",100,"",{data:c},r)})},ga=({api:e,state:t})=>n=>{if(t.currentDownloadFiles="",!t.isEdm)e.ordinaryDownload(n);else{const o=Array.isArray(n);if(t.isHwh5){let r=n;o||(r=[n]),r.forEach(l=>e.downloadFileSingleInner({file:l,isBatch:!1}));return}o?e.downloadFileInner({file:n,isBatch:o}):e.downloadFileSingleInner({file:n,isBatch:o})}},va=({props:e,state:t,api:n,constants:o})=>({file:r,isBatch:l})=>{const{SIZE_17G:i}=o.EDM;let s={token:(e.edm.download||{}).token,file:r,type:"download"};n.getToken(s).then(c=>{if(!c)return;if(t.isHwh5){n.downloadFileSingleHwh5({file:r});return}const p={docId:r.docId,docVersion:r.docVersion};(t.hasFileInfoInterface?n.getDownloadFileInfo(p):Promise.resolve()).then(h=>{const{fileSize:w}=h||{},f=w>t.docSize&&w>t.chunkSize;w&&f?n.largeDocumentDownload({file:h,isBatch:l,isLessThan17G:w<i*1024}):n.downloadFileInner({file:r,isBatch:l})})})},ya=({api:e,state:t,props:n,service:o})=>({docId:r,docVersion:l})=>o.getDocumentInfoUrl().then(i=>new Promise((a,s)=>{o.request({method:"post",url:ae.filterUrl(i),withCredentials:n.withCredentials,headers:Object.assign(n.headers,t.headers),cancelToken:e.createDownloadCancelToken({docId:r}),data:{docInfoVO:{ids:[r],docType:"",docVersion:l||""}}}).then(c=>{const{data:p}=c||{};if(p&&p.status===200){const u=p.result.outDocQueryList&&p.result.outDocQueryList[0].verInfo[0].docInfo[0];a(u)}else s(c)})})),wa=({api:e,state:t})=>({file:n,isBatch:o,isLessThan17G:r})=>{const{fileSize:l,docId:i,docName:a}=n,s=Math.ceil(l/t.chunkSize);t.downloadChunkFile[i]={chunkNum:s,fileSize:l,docName:a},n.chunkSize=s;const c=e.sliceDownloadChunk(n);e.batchSegmentDownload({batchIndex:0,batches:c,docId:n.docId,isBatch:o,isLessThan17G:r})},Ta=({state:e})=>t=>{const n=t.chunkSize,o=[[]];e.downloadBatchQueue[t.docId+"-0"]=0,e.downloadBatchQueueListen[t.docId+"-0"]=0;let r=0,l=-1;for(let i=0;i<n;i++){if(r=l+1,l=Math.min(t.fileSize,r+e.chunkSize-1),l<r)return o;const a=o.length-1;o[a].length<e.downloadChunkLimit?o[a].push({startRange:r,endRange:l,index:i}):(e.downloadBatchQueue[t.docId+"-"+o.length]=0,e.downloadBatchQueueListen[t.docId+"-"+o.length]=0,o.push([]),o[a+1].push({startRange:r,endRange:l,index:i}))}return o},ba=({state:e,api:t})=>({batchIndex:n,batches:o,docId:r,isBatch:l,isLessThan17G:i})=>{if(n<o.length){const a=o[n],s=r+"-"+n;Object.defineProperty(e.downloadBatchQueue,s,{get(){return e.downloadBatchQueueListen[s]},set(p){e.downloadBatchQueueListen[s]=p,p>=a.length&&t.batchSegmentDownload({docId:r,batchIndex:++n,batches:o,isBatch:l,isLessThan17G:i})}});let c=0;for(;a.length-c>0;)t.downloadFileInner({batchIndex:n,range:a[c++],file:{docId:r},isBatch:l,isChunk:!0,isLessThan17G:i})}},Sa=({api:e,props:t,state:n})=>({batchIndex:o,file:r,range:l,isBatch:i,isChunk:a,isLessThan17G:s})=>{const c=t.edm.download||{},p=qn({api:e,isChunk:a,isLessThan17G:s,file:r,state:n}),u=Qn({downloadOps:c,file:r,translateFile:p,isChunk:a,state:n,isLessThan17G:s}),h=Xn();let{isFinished:w=!1}={};if(!i){const v={calcProgress:h,isFinished:w,handleSuccess:u,range:l,batchIndex:o,isBatch:i,downloadOps:c,file:r,isChunk:a,isLessThan17G:s};e.downloadFileSingle(v);return}const f={downloadOps:c,file:r,calcProgress:h,handleSuccess:u,range:l,isLessThan17G:s};i&&e.downloadFileBatch(f)},ka=({api:e,state:t})=>({batchIndex:n,range:o,data:r,file:l,isBatch:i,isChunk:a,isLessThan17G:s})=>{if(r.status===200){const c=l.docId+"-"+n;t.downloadBatchQueue[c]!==void 0?t.downloadBatchQueue[c]+=1:t.downloadBatchQueue[c]=0}else{const c=l.docId+"-"+o.index,p=t.downloadReplayAtoms[c];if(p&&p>=2){const u=["The number of retry times exceeds the threshold! [docId:",l.docId,", chunk:",o.index,"]"];ot.warn(u.join("")),delete t.downloadReplayAtoms[c]}else{t.downloadReplayAtoms[c]===void 0&&(t.downloadReplayAtoms[c]=0);const u=["replay ",p,"! [docId:",l.docId,", chunk:",o.index,"]"];ot.warn(u.join("")),t.downloadReplayAtoms[c]+=1,e.downloadFileInner({batchIndex:n,range:o,file:l,isBatch:i,isChunk:a,isLessThan17G:s})}}},Ea=({state:e,emit:t,Streamsaver:n})=>({data:o,index:r,isLessThan17G:l,file:i})=>{let{fileStream:a,writer:s,fileData:c=[],downloaded:p=0}={};const{checkcode:u}=o.headers,h=o.headers["content-disposition"];let{chunkNum:w,fileSize:f,docName:v}=e.downloadChunkFile[i.docId];h&&(v=h.match(/fileName.?=(.*)/)[1]||h.match(/fileName=(.*)/)[1]||v),l||(a=n.createWriteStream(v,{size:o.byteLength}),s=a.getWriter());const S=()=>{const b=e.downloadChunkFile[i.docId]||{};let E=b[r];if(E)if(!l)s.write(E).then(()=>{if(p+=E.byteLength,b[r]=null,delete b[r],r+1>=w)delete e.downloadChunkFile[i.docId],t("download",100,"",{fileSize:f,checkcode:u},i),s.close();else{const k=Math.ceil(p/f*100)||0;k!==100&&t("download",k,"",{fileSize:f,checkcode:u},i),r++,S()}});else if(c.push(E),p+=E.size,e.downloadChunkFile[i.docId][r]=null,delete e.downloadChunkFile[i.docId][r],r+1>=w)delete e.downloadChunkFile[i.docId],Gn({blob:new Blob(c),name:v}),t("download",100,"",{fileSize:f,checkcode:u},i);else{const k=Math.ceil(p/f*100)||0;k!==100&&t("download",k,"",{fileSize:f,checkcode:u},i),r++,S()}else setTimeout(()=>S(),1e3)};return S(),b=>{const E=e.downloadChunkFile[b];Object.keys(E).forEach(k=>E[k]=null),delete e.downloadChunkFile[b],l?c=[]:s&&s.close()}},Ca=({constants:e,props:t,state:n})=>({formData:o,file:r,type:l})=>{if(n.isEdm&&t.edm.upload){const a=Object.assign({},t.data||{},t.edm.upload.params||{});for(let s in a)o.set(s,a[s]||"")}t.edm.isCheckCode===!0?(o.append(e.EDM.ISCHECKCODE,"Y"),r.hash&&o.append(e.EDM.CHECKCODE,r.hash)):o.append(e.EDM.ISCHECKCODE,"N");const i=n.updateId||t.edm.updateId;if(l===e.EDM.CHUNKINIT)o.append(e.EDM.FILESIZE,r.size),o.append(e.EDM.CHUNKS,r.chunkSize),o.append(e.EDM.FILENAME,r.name),i&&o.append(e.EDM.DOCID,i);else{o.append(e.EDM.MULTIPART,r,r.filename),o.append(e.EDM.CHUNK,r.chunk),o.append(e.EDM.LOWERNAME,r.filename);const a=i||r.docId;o.append(e.EDM.DOCID,a)}return i&&o.append("updateFile",!0),o},_a=({api:e,Modal:t,state:n,t:o,emit:r,constants:l})=>i=>{const a=Math.ceil(i.size/n.chunkSize);i.chunkSize=a,i.cancelToken=[],e.segmentUploadInit(i).then(s=>{if(s&&s.docId){i.records=s.chunks,i.docId=s.docId,n.largeFileInfo[s.docId]=i;const c=e.sliceChunk(i);e.batchSegmentUpload({docId:s.docId,batchIndex:0,batches:c,progress:{size:i.size,trunks:[],file:i}})}else{t.message({message:o("ui.fileUpload.init"),status:"warning",duration:"1000"});const c=e.getFile(c);n.uploadFiles.splice(n.uploadFiles.indexOf(c),1)}}).catch(s=>{i.status=l.FILE_STATUS.FAIL,r("error",s,i,n.uploadFiles)})},Ia=({api:e,props:t,service:n,state:o,constants:r})=>l=>{const i=new FormData;return new Promise((a,s)=>{n.getLargeFileInitUrl().then(c=>{n.request({method:"post",url:ae.filterUrl(c),data:e.getFormData({formData:i,file:l,type:r.EDM.CHUNKINIT}),withCredentials:t.withCredentials,headers:Object.assign(t.headers,o.headers)}).then(p=>{p.data.status===200?a(p.data.result):s(p)})})})},en=({data:e,file:t,batchIndex:n,state:o,api:r,progress:l})=>{if(e.status===200){const i=t.docId+"-"+n;o.batchQueue[i]!==void 0?o.batchQueue[i]+=1:o.batchQueue[i]=0}else{const i=t.docId+"-"+t.chunk,a=o.replayAtoms[i];if(a&&a>=2){const s=["The number of retry times exceeds the threshold! [docId:",t.docId,", chunk:",t.chunk,"]"];ot.warn(s.join("")),delete o.replayAtoms[i]}else{o.replayAtoms[i]===void 0&&(o.replayAtoms[i]=0);const s=["replay ",a,"! [docId:",t.docId,", chunk:",t.chunk,"]"];ot.warn(s.join("")),o.replayAtoms[i]+=1,r.segmentUpload(n,t,l)}}},tn=({api:e,props:t,service:n,state:o,emit:r,constants:l,batchIndex:i,file:a,progress:s})=>{const c=new FormData,p=u=>{const h=n.cancelToken();if(s.file.cancelToken){s.file.cancelToken.push(h.cancel);const{SUCESS:w,FAIL:f}=l.FILE_STATUS;n.request({method:"post",url:ae.filterUrl(u),data:e.getFormData({formData:c,file:a,type:""}),withCredentials:t.withCredentials,headers:Object.assign(t.headers,o.headers),cancelToken:h.token,hideErr:!0,onUploadProgress(v){s.trunks[a.chunk]=v.loaded;const S=s.trunks.reduce((E,k)=>E+k);let b=Math.floor(S/s.size*100)||0;a.percentage=Math.floor(v.loaded/v.total*100),v.percentage=s.file.percentage=b>100?100:b,b>=100&&(s.file.isFinished=!0),r("progress",s.file,o.uploadFiles,e.calcUploadingFilesInfo())}}).then(v=>{en({data:v,file:a,batchIndex:i,state:o,api:e,progress:s}),s.file.percentage===100&&(s.file.status=w)}).catch(v=>{if(v.response&&o.errorStatusCodes.includes(v.response.status)){const S={token:t.edm.upload.token,file:a,type:"upload"};e.getToken(S).then(b=>en({data:b,file:a,batchIndex:i,state:o,api:e,progress:s}))}else s.file.status!==f&&r("error",v,s.file,o.uploadFiles),s.file.status=f,s.file.docId=""})}};o.chunkUploadUrl?p(o.chunkUploadUrl):n.getChunkUploadUrl().then(u=>{o.chunkUploadUrl=u,p(u)})},Ua=({api:e,props:t,service:n,state:o,emit:r,constants:l})=>(i,a,s)=>{typeof a.then=="function"?a.then(c=>new Promise(p=>{if(t.edm.isCheckCode!==!0)return p(c);const u=new FileReader;u.readAsArrayBuffer(c),u.onload=async h=>{if(t.edm.isCheckCode===!0){const w=yn(h.target&&h.target.result);c.hash=w}p(c)}})).then(c=>{tn({batchIndex:i,api:e,service:n,state:o,emit:r,props:t,file:c,constants:l,progress:s})}):tn({api:e,props:t,service:n,state:o,emit:r,constants:l,batchIndex:i,file:a,progress:s})},Fa=({api:e,constants:t,props:n,vm:o,state:r})=>({docId:l,batchIndex:i,batches:a,progress:s})=>{if(i<a.length&&s.file.cancelToken){const c=l+"-"+i,p=a[i];Object.defineProperty(r.batchQueue,c,{get(){return r.batchQueueListen[c]},set(h){r.batchQueueListen[c]=h,h>=p.length&&e.batchSegmentUpload({docId:l,batchIndex:++i,batches:a,progress:s})}});let u=0;for(;p.length-u>0;)e.segmentUpload(i,p[u++],s)}else typeof n.edm.upload.closeloading=="function"&&n.edm.upload.closeloading(),o.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].upload(r.largeFileInfo[l])},$a=({state:e})=>t=>{const n=t.chunkSize,o=[[]];e.batchQueue[t.docId+"-0"]=0,e.batchQueueListen[t.docId+"-0"]=0;for(let r=0;r<n;r++){if(t.records.includes(r.toString()))continue;const l=r*e.chunkSize,i=Math.min(t.size,l+e.chunkSize),a=t.raw.slice(l,i);a.chunk=r+1,a.filename=t.name,a.docId=t.docId,a.chunkSize=n,a.cacheSign=t.cacheSign,a.records=t.records,a.percentage=t.percentage;const s=Promise.resolve(a),c=o.length-1;o[c].length<e.chunkBatchLimit?o[c].push(s):(e.batchQueue[t.docId+"-"+o.length]=0,e.batchQueueListen[t.docId+"-"+o.length]=0,o.push([]),o[c+1].push(s))}return o},Jn=({constants:e,props:t,state:n,t:o,Modal:r})=>({token:l,file:i,isOnlinePreview:a=!1,type:s="",isinit:c=!1})=>t.edm.isExtranet&&!a?(n.isSuccess=!0,n.accept=t.accept,n.singleMaxSize=t.edm.singleFileMaxSize||200,Promise.resolve(!0)):n.isEdm&&!l||typeof l!="function"?(r.message({message:o(e.EDM.I18NKEY),status:"warning",duration:"2000"}),new Promise(p=>{p(!1)})):new Promise((p,u)=>{try{let h;c&&t.cacheToken?(!$t&&($t=l(i)),h=$t):h=l(i),h.then(w=>{const f=w||{},v=f.config&&f.config.fileWhiteList||"";if(n.isSuccess=!0,["preview","download"].includes(s)&&t.accept)n.accept=t.accept;else if(v)if(t.accept){let S="";t.accept.toString().split(",").forEach(b=>{v.includes(b)||(S+=`,${b}`)}),n.accept=v+S}else n.accept=v;n.headers[e.EDM.EDMTOKEN]=f.edmToken||"",n.headers[e.EDM.TRACEID]=f.traceId||"",f.config&&(n.singleMaxSize=f.config.singleFileMaxSize),n.edmToken=f,p(!0)})}catch(h){u(new Error(h))}}),La=({api:e,props:t})=>(n,o=!1)=>new Promise((r,l)=>{try{const i={isOnlinePreview:!0,file:n,type:"preview",token:t.edm.preview.token};e.getToken(i).then(a=>{if(!a){const s="[TINY Error][FileUpload] No edm token";l(new Error(s));return}lt(n)||Array.isArray(n)&&n.length===1?e.previewFileSingle({file:Array.isArray(n)?de({},n[0]):n,resolve:r,open:o}):Array.isArray(n)&&n.length>1&&e.previewFileBatch({file:n,resolve:r,open:o})}).catch(a=>l(new Error(a)))}catch(i){l(new Error(i))}}),Da=({api:e})=>t=>e.previewFile(t,!0),Aa=({api:e,state:t,props:n,constants:o,service:r})=>({file:l,resolve:i,open:a})=>{const s=e.getPreviewUrlSync(l);if(a)return i(s);if(s){t.showPreview=!0,t.iframeUrl=s,i(t.iframeUrl);return}const c=n.edm.preview.watermark||{},p=t.fileWater?o.EDM.FORMAT:"",u=t.fileWater?o.EDM.WATER:o.EDM.SOURCE,h=n.edm.preview.plugin;r.all([r.getPreviewUrl(),r.getSingleDownloadUrl()]).then(r.spread((w,f)=>{const v=n.edm.preview.serviceUrl,S=v||w.replace(/{docId}/,l.docId)+`?${p}docVersion=${l.docVersion}`,b=v||w.replace(/{docId}/,l.docId)+`?type=doc&pageNum=1&${p}docVersion=${l.docVersion}`,E=v+f.replace(/{docId}/,l.docId)+`?docId=${l.docId}&docVersion=${l.docVersion}&${u}from=Experience&`;h.setIsEDM3(!0),h.setDocumentInfoUrl(S),h.setDownloadUrl(E,!0),h.setPageUrl(b),h.setWatermarkParameters({showWatermark:c.showWatermark||1,rotation:c.rotation||30,text:c.text||""}),h.setPdfjsPaht(n.edm.preview.packageName||o.EDM.JSLIB),h.setAuthToken(t.headers[o.EDM.EDMTOKEN]),t.showPreview=!0,t.iframeUrl=n.edm.preview.previewUrl+`${o.EDM.URLCONTS}${l.docVersion}&docId=${l.docId}`,i(t.iframeUrl)}))},Pa=({service:e,props:t,state:n,api:o})=>({file:r,resolve:l,open:i})=>{e.getPreviewUrlBatch().then(a=>{const c=(t.edm||{}).preview||{},p=c.online||{},{jslibhtml:u,baseurl:h}=p,{text:w}=c.watermark||{};e.request({method:"post",url:ae.filterUrl(a),withCredentials:t.withCredentials,headers:n.headers,data:{documents:r,asposeClient:u,asposeService:h,watermark:w}}).then(({data:f})=>{const v=o.getPreviewUrlSync({generate:f.result.generate,size:r.length},!0);if(i)return l(v);v&&(n.showPreview=!0,n.iframeUrl=v,l(n.iframeUrl))})})},Oa=({constants:e,props:t,state:n})=>(o,r)=>{const i=(t.edm||{}).preview||{},{watermark:a,online:s,bar:c={},lang:p}=i,{webPreview:u=!1,http:h=!1,jslibhtml:w,appid:f,baseurl:v}=s;let S;u?S=`${h?"http:":"https:"}${v.replace(/\/$/,"")}/edm/projects/${f}/web/preview`:S=w.split("?").shift();const b=[];let E;const k=n.headers[e.EDM.EDMTOKEN];if(r){S=S=`${v.replace(/\/$/,"")}/edm/projects/${f}/web/batchPreview`;const{generate:d,size:_}=o;E={generate:d,"EDM-Authorization":k,docIndex:1,size:_}}else if(u){const{styles:d}=c;E=Object.assign({},a,{"EDM-Authorization":k,lang:p,bar:window.btoa(JSON.stringify(jt(de({},c),{styles:JSON.stringify(d)}))),docId:o.docId})}else E=Object.assign({},s,a,{authToken:k,jslibhtml:S,docId:o.docId,docVersion:o.docVersion||o.version||"",type:"doc",pageNum:"1"});for(let d in E){const _=E[d];lt(_)||(d==="text"&&b.push(`watermark=${encodeURIComponent(_)}`),b.push(`${d}=${_}`))}return S+"?"+b.join("&")},Ra=({api:e,props:t,service:n})=>o=>new Promise((r,l)=>{try{e.getToken({token:t.edm.preview.token,file:o,type:"preview"}).then(i=>{if(!i){l(new Error("[TINY Error][FileUpload] No edm token"));return}n.getPreviewUrl().then(a=>{lt(o)||Array.isArray(o)&&o.length===1?e.previewImageSingle({url:a,file:Array.isArray(o)?de({},o[0]):o}).then(s=>r(s)):Array.isArray(o)&&o.length>1&&e.previewImageBatch({url:a,file:o}).then(s=>r(s))})})}catch(i){l(new Error(i))}}),Ma=({service:e,state:t,props:n})=>({file:o,url:r})=>{const i=(n.edm||{}).preview||{};let{text:a,textStyle:s}=i.watermark||{};s=de({tile:!0},s);const c=Object.assign(o,{type:"image",imageType:"image",watermark:a,textStyle:s});return e.post(ae.filterUrl(r.replace(/{docId}/,o.docId)),c,{withCredentials:n.withCredentials,headers:Object.assign(n.headers,t.headers),responseType:"blob"}).then(p=>{const u=new Blob([p.data]);return(window.URL||window.webkitURL).createObjectURL(u)})},Na=({service:e,api:t})=>({url:n,file:o})=>{const r=[];return o.forEach(l=>{r.push(t.previewImageSingle({url:n,file:l}))}),e.all(r)},za=({props:e,state:t,t:n,constants:o})=>()=>{const r={class:"single-download-modal single-download-modal1",style:"",props:{lockScroll:!0,visible:t.showPreview,dragable:!0,title:n(o.EDM.DOC_PREVIEW),width:"60%"},on:{"update:visible":p=>t.showPreview=p}};let l={};e.edm&&e.edm.preview&&typeof e.edm.preview.dialogConfig=="object"&&(l=e.edm.preview.dialogConfig||{});const i=qt(!0,{},l),a=i.events||{},s=i.class||"",c=i.style||"";return delete i.events,delete i.class,delete i.style,qt(!0,{},r,{class:`${r.class} ${s}`,style:`${c}`,props:de({},i),on:de({},a)})},xa=({props:e,state:t,constants:n})=>()=>{const o=!(e.edm&&e.edm.chunkSize),{SIZE_0M:r,SIZE_2M:l,SIZE_4M:i,SIZE_8M:a,SIZE_16M:s,SIZE_20M:c,SIZE_32M:p,SIZE_64M:u,SIZE_2G:h}=n.EDM;let{docSize:w=c,chunkSize:f=a}=e.edm||{};w=w<0?0:w,w=w>h?h:w,w&&(f=f<0?0:f),o||[u,p,s,a,i,l,r].some(S=>f>=S?(f=Math.max(S,l),!0):!1),t.docSize=w*1024,t.chunkSize=f*1024},Ba=({props:e,constants:t})=>()=>{const{sourceType:n,listType:o}=e;let r=n.split("/");return o!==t.LIST_TYPE.PICTURE_CARD&&(r=r.slice(0,1)),r},ja=({state:e,props:t,constants:n})=>({file:o})=>{const{PICTURE_SINGLE:r,PICTURE_CARD:l}=n.LIST_TYPE,{listType:i}=t;if(![r,l].includes(i))return;let a=e.types[0];if(o.type)a=o.type;else if(i===l){const{VIDEO:s,AUDIO:c,PICTURE:p}=n.FILE_TYPE,{SOURCE_VIDEO:u,SOURCE_AUDIO:h,SOURCE_PICTURE:w}=n.SOURCE_TYPE,f={[s]:u,[c]:h,[p]:w},v=Pt({file:o}),S=Object.keys(f).find(b=>b.split("/").includes(v));f[S]&&(a=f[S])}return a},Ha=({constants:e,vm:t})=>n=>{t.$refs[e.UPLOAD_INNER].$refs[e.UPLOAD_INNER_TEMPLATE].handleUpdate(n)},Va=({vm:e,constants:t})=>n=>{if(typeof n=="object"&&n!==null&&n!==void 0){let o=n;Array.isArray(n)||(o=[n]),e.$refs[t.UPLOAD_INNER].$refs[t.UPLOAD_INNER_TEMPLATE].handleChange({target:{files:o}})}},Wa=({vm:e,state:t,constants:n,props:o,emit:r})=>(l,i)=>{const{PICTURE_CARD:a,PICTURE_SINGLE:s}=n.LIST_TYPE,{isHwh5:c}=t,{listType:p}=o;if([a,s].includes(p)||(i=""),t.triggerClickType=i,p===a&&c){e.$refs[n.UPLOAD_LIST_INNER].$refs[n.UPLOAD_LIST_INNER_TEMPLATE].chooseFile(i);return}r("trigger-click",l,i)},Za=e=>()=>{!Array.isArray(e.uploadFiles)||e.uploadFiles.forEach(t=>{t.url&&t.url.indexOf("blob:")===0&&URL.revokeObjectURL(t.url)})},Ya=({state:e,emit:t})=>n=>{e.selected=n,t("click-file-list",n)},Ka=({vm:e,state:t})=>()=>{e.$on("drag-over",n=>t.isDragover=n)},qa=({state:e})=>()=>{const t=e.encryptDialogConfig.selectFileMethod;e.encryptDialogConfig.show=!1,typeof t=="function"&&t()},Ga=({vm:e,constants:t,state:n,props:o})=>()=>{const{PICTURE_CARD:r}=t.LIST_TYPE,{isHwh5:l}=n,{listType:i}=o;i===r&&l&&(e.$refs[t.UPLOAD_LIST_INNER].$refs[t.UPLOAD_LIST_INNER_TEMPLATE].state.showAudioPanel=!1)},Qa=({t:e,api:t,constants:n})=>({accept:o,fileSize:r,limit:l})=>{let i="";o&&(i=e(n.ONLY_SUPPORT,{type:o.split(",").map(p=>p.trim().replace(/^\./,"")).join(e(n.COMMA))})),r&&i.length!==0&&(i+=`${e(n.COMMA)} `);let a="",s=1024;typeof r=="number"?a=`${e(n.FILE_NOT_LESS_THAN)}${t.formatFileSize(r*s)}`:Array.isArray(r)&&(a+=!isNaN(r[0])&&!isNaN(r[1])?e(n.FILE_SIZE_RANGE,{moreThan:t.formatFileSize(Number(r[0])*s),lessThan:t.formatFileSize(Number(r[1])*s)}):"");let c=l?e(n.NUMBER_LIMIT,{number:l}):"";return(r||i.length!==0)&&l&&(c=`${e(n.COMMA)} `+c),i+a+c},eo=["state","getNewTabPreviewUrl","previewFile","downloadFile","abort","clearFiles","getFile","handleStart","handleProgress","handleSuccess","handleError","handleRemove","handleReUpload","handleReUploadTotal","submit","handleClick","handleFileClick","getFileUploadUrl","updateUrl","previewImage","updateFile","handleChange","abortDownload","handleClickFileList","handleTriggerClick","closeRecordPanel","encryptDialogConfirm","formatFileSize","getTipMessage"],Xa=({api:e,reactive:t,computed:n,inject:o,ref:r,vm:l,props:i,httpRequest:a,service:s,useBreakpoint:c})=>{const{current:p}=c();return t({url:"",updateId:"",currentDownloadFiles:"",tempIndex:1,draging:!1,uploadFiles:[],dragOver:!1,httpRequest:a,form:o("form",r({default:""})),listeners:l.$listeners,docSize:0,chunkSize:0,chunkBatchLimit:5,downloadChunkLimit:5,batchQueue:{},batchQueueListen:{},batchCancelToken:{},replayAtoms:{},chunkUploadUrl:"",largeFileInfo:{},headers:{},accept:"",edmToken:{},isSuccess:!1,singleMaxSize:200,formData:{},showPreview:!1,iframeUrl:"",fileWater:!1,tabUrl:"",cacheDocuments:{},isEdm:n(()=>!Dt(i.edm)),uploadDisabled:n(()=>e.computedUploadDisabled()),dialogConfigObj:n(()=>e.getDialogConfigObj()),uploadingFiles:[],currentUploadingFileUids:[],uploadingSize:n(()=>e.computedUploadingSize()),isEntireCheckCode:n(()=>!("isEntireCheckCode"in i.edm&&i.edm.isEntireCheckCode!==!0)),downloadBatchQueue:{},downloadBatchQueueListen:{},downloadChunkFile:{},downloadReplayAtoms:{},errorStatusCodes:[0,401,429],hasFileInfoInterface:n(()=>s.setting.services.EDM&&s.setting.services.EDM.DocumentInfoUrl),currentDownloadFile:"",isDragover:!1,downloadCancelToken:{},downloadCancelData:{},isHwh5:n(()=>!Dt(i.hwh5)),selected:null,types:n(()=>e.computedSourcetype()),triggerClickType:"",visible:!1,downloadParamsWhitelist:["docId","wmType","docVersion"],encryptDialogConfig:{show:!1,selectFileMethod:null},current:p})},Ja=({api:e,state:t,props:n,constants:o,vm:r,$service:l,t:i,Modal:a,emit:s})=>{Object.assign(e,{state:t,sliceChunk:$a({state:t}),getFormData:Ca({constants:o,props:n,state:t}),abort:ea({constants:o,vm:r,state:t}),handleClick:ra({constants:o,vm:r}),handleFileClick:aa({props:n,emit:s}),getFile:Jl(t),clearFiles:na(t),watchFileList:Pl({constants:o,state:t,props:n,api:e}),watchListType:Al({constants:o,state:t,api:e}),onBeforeDestroy:Za(t),computedUploadDisabled:Ll({props:n,state:t}),computedUploadingSize:Dl({state:t,constants:o}),getFileUploadUrl:ia(l),getToken:Jn({constants:o,props:n,state:t,t:i,Modal:a}),getDialogConfigObj:za({props:n,state:t,t:i,constants:o}),computeDocChunkSize:xa({props:n,state:t,constants:o}),updateFile:Ha({constants:o,vm:r}),getPreviewUrlSync:Oa({constants:o,props:n,state:t}),ordinaryDownload:Yn(l),clearUploadingFiles:Xl({constants:o,state:t}),calcUploadingFilesInfo:Wl({state:t,constants:o}),properFileSize:xl({props:n,state:t,api:e,constants:o,Modal:a,t:i}),mounted:Ka({vm:r,state:t}),previewFileSingle:Aa({api:e,state:t,props:n,constants:o,service:l}),previewFileBatch:Pa({service:l,props:n,state:t,api:e}),previewImageSingle:Ma({state:t,props:n,service:l}),previewImageBatch:Na({service:l,api:e}),abortDownload:ta({state:t}),createDownloadCancelToken:ua({state:t,service:l}),computedSourcetype:Ba({props:n,constants:o}),getFileSourceType:ja({state:t,props:n,constants:o}),encryptDialogConfirm:qa({state:t}),getTipMessage:Qa({t:i,api:e,constants:o}),formatFileSize:wn})},es=({api:e,props:t,$service:n,state:o,constants:r,emit:l,mode:i,Modal:a,t:s,vm:c,Streamsaver:p})=>{Object.assign(e,{segmentUploadInit:Ia({api:e,props:t,service:n,state:o,constants:r}),segmentUpload:Ua({api:e,props:t,service:n,state:o,emit:l,constants:r}),addFileToList:Bl({api:e,constants:r,emit:l,props:t,state:o,mode:i}),downloadFile:ga({api:e,state:o}),downloadFileSingleInner:va({props:t,state:o,api:e,constants:r}),previewImage:Ra({api:e,props:t,service:n}),previewFile:La({api:e,props:t}),getNewTabPreviewUrl:Da({api:e}),submit:oa({api:e,constants:r,vm:c,props:t,state:o}),handleStart:Vl({api:e,constants:r,props:t,state:o,vm:c}),batchSegmentUpload:Fa({api:e,constants:r,props:t,vm:c,state:o}),largeDocumentUpload:_a({api:e,Modal:a,state:o,emit:l,constants:r,t:s}),handleProgress:Zl({api:e,constants:r,emit:l,state:o}),handleSuccess:Yl({api:e,constants:r,emit:l,Modal:a,props:t,state:o,t:s}),handleError:Kl({api:e,constants:r,emit:l,state:o,props:t}),handleRemove:ql({api:e,emit:l,props:t,state:o,constants:r}),handleReUpload:Gl({vm:c,constants:r}),handleReUploadTotal:Ql(e),updateUrl:la({api:e,props:t,state:o}),startUpload:Nl({api:e,state:o,constants:r,vm:c,Modal:a,t:s}),beforeUpload:Ml({api:e,props:t,Modal:a,constants:r,t:s,state:o}),getDownloadFileInfo:ya({api:e,props:t,state:o,service:n}),largeDocumentDownload:wa({api:e,state:o}),sliceDownloadChunk:Ta({state:o}),batchSegmentDownload:ba({state:o,api:e}),downloadFileInner:Sa({api:e,props:t,state:o}),setWriterFile:Ea({state:o,emit:l,Streamsaver:p}),afterDownload:ka({api:e,state:o}),getFileHash:jl({emit:l,Modal:a,constants:r,t:s,state:o}),modifyServiceUrlSingle:sa({state:o,props:t,constants:r}),getKiaScanTip:da({Modal:a,constants:r,t:s}),downloadFileSingle:pa({service:n,constants:r,props:t,state:o,api:e,emit:l}),downloadFileBatch:ha({api:e,service:n,props:t,state:o,emit:l}),downloadFileSingleHwh5:ma({state:o,props:t,emit:l,constants:r}),downloadAsyncPackage:fa({state:o,props:t,api:e,constants:r,service:n}),validateDownloadStatus:ca({state:o,Modal:a}),handleChange:Va({vm:c,constants:r}),handleClickFileList:Ya({state:o,emit:l}),handleTriggerClick:Wa({vm:c,state:o,constants:r,props:t,emit:l}),closeRecordPanel:Ga({vm:c,constants:r,state:o,props:t})})},ts=({watch:e,state:t,api:n,props:o,$service:r})=>{e(()=>{var l;return(l=o.edm)==null?void 0:l.upload},l=>l&&n.getToken({token:l.token,isinit:!0}),{immediate:!0,deep:!0}),e(()=>o.listType,n.watchListType),e(()=>o.fileList,l=>n.watchFileList(l),{immediate:!0,deep:!0}),e(()=>o.action,()=>{!o.httpRequest&&!t.isEdm&&n.updateUrl()},{immediate:!0}),e(()=>t.isSuccess,l=>l&&r.getSingleUploadUrl().then(i=>t.url=i),{immediate:!0}),e(()=>o.edm,n.computeDocChunkSize,{deep:!0,immediate:!0})};let to=()=>({});const no=(e,{computed:t,inject:n,onBeforeUnmount:o,provide:r,reactive:l,ref:i,watch:a,onMounted:s},{t:c,vm:p,parent:u,emit:h,service:w,mode:f,constants:v,useBreakpoint:S},{Modal:b,Streamsaver:E})=>{let k={};const d=Kn({props:e,service:w}),_=d.httpRequest,C=Xa({reactive:l,computed:t,api:k,inject:n,ref:i,vm:p,props:e,httpRequest:_,service:w,useBreakpoint:S});return Ja({api:k,state:C,props:e,constants:v,vm:p,$service:d,t:c,Modal:b,emit:h}),es({api:k,props:e,$service:d,state:C,constants:v,emit:h,mode:f,Modal:b,t:c,vm:p,Streamsaver:E}),to=()=>k,r("uploader",u),s(k.mounted),o(()=>{k.onBeforeDestroy(),k=null,p.$off("drag-over")}),ts({watch:a,state:C,api:k,props:e,$service:d}),k},oo=["t","state","parsePercentage","handleClick","handlePreview","picturefilePreview","getDeleteData","downloadFile","play","pause","handleLoadedmetadata","handleTimeupdate","showOperatePanel","getFileType","getFileIcon","reUpload","remove","handleTriggerClick","chooseFile","formatFileSize"],ro=(e,{reactive:t,onMounted:n,onUnmounted:o,watch:r,inject:l,computed:i},{t:a,parent:s,mode:c,emit:p,service:u,vm:h,nextTick:w,designConfig:f,useBreakpoint:v},{Modal:S})=>{var b,E,k,d,_;const C={getApi:to};s=l("uploader").$children[0];const L=bo?null:s.$constants,q=Kn({props:e,service:u}),{current:K}=v(),V=t({focusing:!1,shows:!1,currentBreakpoint:K,progressType:((b=f==null?void 0:f.state)==null?void 0:b.progressType)||"line",progressWidth:(f==null?void 0:f.state)&&Object.hasOwnProperty.call(f.state,"progressWidth")?f.state.progressWidth:68,progressStrokeWidth:((E=f==null?void 0:f.state)==null?void 0:E.progressStrokeWidth)||4,tooltipDisabled:(d=(k=f==null?void 0:f.state)==null?void 0:k.tooltipDisabled)!=null?d:!1,closeComponent:((_=f==null?void 0:f.icons)==null?void 0:_.closeComponent)||"icon-del",preViewComponent:(f==null?void 0:f.icons)&&Object.hasOwnProperty.call(f.icons,"preViewComponent")?f.icons.preViewComponent:"icon-fullscreen-left",failUploadFileCount:i(()=>e.files.reduce((A,ee)=>A+=ee.status==="fail"?1:0,0)),startPostion:0,screenType:c==="mobile",showPanel:!1,showTriggerPanel:!1,triggerClickType:"",showAudioPanel:!1,files:i(()=>C.getNotSuccessFiles()),currentFile:null});return s.getToken=Jn({constants:L,props:s,state:s.state,t:a,Modal:S}),Object.assign(C,{state:V,getDeleteData:hl(p),parsePercentage:cl(),downloadFile:Yn(q),picturefilePreview:pl(V),handleClick:ul({props:e,api:C,parent:s}),play:vl({vm:h,api:C,props:e}),pause:yl({vm:h,props:e}),handleLoadedmetadata:wl({vm:h}),handleTimeupdate:Tl(),destroyed:$l({props:e,vm:h}),showOperatePanel:fl({state:V}),getFileType:bl(),getFileIcon:Sl({constants:L}),mounted:Fl({api:C,vm:h}),calcUploadListLiWidth:El({vm:h,nextTick:w,props:e,constants:L}),reUpload:ml({emit:p,props:e,parent:s}),remove:kl({emit:p}),handleTriggerClick:Ul({state:V,props:e}),chooseFile:Il({state:V,constants:L}),calcVisible:Cl({props:e,constants:L,emit:p}),getNotSuccessFiles:_l({props:e,constants:L}),formatFileSize:wn}),e.listType===L.LIST_TYPE.DRAG_SINGLE&&r(()=>e.files&&e.files[0],A=>{A&&A.status===L.FILE_STATUS.FAIL&&setTimeout(()=>{C.remove({file:A})},2e3)},{immediate:!0,deep:!0}),r(()=>e.files,C.calcUploadListLiWidth),e.mode===L.MODE.BUBBLE&&e.listType===L.LIST_TYPE.TEXT&&L&&r(()=>e.files,C.calcVisible,{immediate:!0,deep:!0}),n(C.mounted),o(C.destroyed),C};function ns(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=os(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function os(e,t){if(e){if(typeof e=="string")return nn(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}function nn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var rs=function(t,n){for(var o=t.__vccOpts||t,r=ns(n),l;!(l=r()).done;){var i=l.value,a=i[0],s=i[1];o[a]=s}return o},is=Q({name:se+"UploadList",components:{TinyProgress:dt,TinyTooltip:at,TinyButton:_e,TinyIconDocument:dl(),IconSuccessful:Ht(),IconClose:Vt(),IconView:Kr(),IconDel:Tn(),IconYes:So(),IconCloseCircle:No(),IconError:At(),IconFileCloudupload:Wt(),IconDownload:ct(),IconCueL:bn(),IconRefresh:$r(),IconOperationfaild:At(),IconFullscreenLeft:ko(),IconRight:Pn(),IconPause:An(),IconAudio:On(),IconEllipsis:$n(),IconExcelType:Mn(),IconFileType:Nn(),IconOtherType:Sn(),IconPdfType:zn(),IconPictureType:xn(),IconPptType:Bn(),IconTextType:jn(),IconVideoType:Hn(),IconWordType:Vn(),IconZipType:Wn(),IconFileuploadPro:Zn()},emits:["click-file-list","remove","start","update:visible","update","reUpload","ReUploadTotal"],props:[].concat(ue,["disabled","display","files","filesIcon","handlePreview","isEdm","isFolder","listType","openDownloadFile","srcList","isFolderTitle","listOption","maxNameLength","mode","reUploadable","reUploadTip","selected","displayOnly","handleDownloadFile","handleReUpload","compact"]),setup:function(t,n){return pe({props:t,context:n,renderless:ro,api:oo,extendOptions:{Modal:Ie}})}}),ls={key:0,class:"tiny-upload-list-panel"},as=["onClick"],ss={class:"tiny-upload-list-thumb"},ds=g("div",{class:"uploading-mask"},null,-1),cs={class:"uploading-progress"},us={class:"uploading-progress-panel"},ps={key:2,class:"upload-fail"},hs={class:"tiny-upload-list-content"},fs={class:"file-name"},ms={class:"file-name-box"},gs=["title"],vs={class:"operate-panel"},ys=["onClick"],ws=["onClick"],Ts=["onClick"],bs=["onClick"],Ss={class:"file-size"},ks={class:"file-size-content"},Es={key:0,class:"fail"},Cs={key:1},_s={key:2},Is={class:"file-size-right"},Us={key:1,class:"no-attachments"},Fs={key:1,class:"tiny-upload-list__wrapper"},$s=["onKeydown"],Ls=["src"],Ds={key:0,class:"tiny-upload-list__item-tooltip"},As={key:1,class:"tiny-upload-list__item-tooltip"},Ps=["onClick","title"],Os={key:2,class:"tiny-upload-list__item-status-label"},Rs=["title","onClick"],Ms=["title","onClick"],Ns=["title","onClick"],zs={key:6,class:"tiny-icon-close-tip"},xs=["onClick"],Bs={class:"tiny-upload-list__item-tooltip"},js={key:0,class:"tiny-upload-list__item-actions"},Hs=["title","onClick"],Vs=["title","onClick"],Ws=["title","onClick"],Zs=["title","onClick"],Ys=["title"],Ks={key:0,class:"tiny-upload-list__text-title"},qs={class:"tiny-upload-list__text-desc"};function Gs(e,t,n,o,r,l){var i=$("icon-cue-l"),a=$("tiny-progress"),s=$("icon-operationfaild"),c=$("tiny-icon-document"),p=$("tiny-tooltip"),u=$("icon-successful"),h=$("icon-yes"),w=$("icon-file-cloudupload"),f=$("icon-refresh"),v=$("icon-download"),S=$("icon-fullscreen-left"),b=$("icon-view"),E=$("icon-del"),k=$("tiny-button");return e.listType==="saas"?(m(),T("div",{key:0,ref:"uploadList",class:P(["tiny-upload-list--saas",[e.state.files.length||e.mode==="bubble"?"border-zero":"border-top",{"mode-bubble":e.mode==="bubble"}]])},[e.state.files.length?(m(),T("div",ls,[(m(!0),T(ge,null,De(e.state.files,function(d){return m(),T("div",{ref_for:!0,ref:"uploadListLi",class:P(["tiny-upload-list-item",{selected:d.uid===(e.selected&&e.selected.uid),compact:e.compact}]),"data-tag":"tiny-upload-list-item",key:d.uid,tabindex:"0",onClick:function(C){return e.$emit("click-file-list",d)}},[Y(e.$slots,"default",{file:d},function(){return[g("div",ss,[~["uploading"].indexOf(d.status)?(m(),T(ge,{key:0},[ds,g("div",cs,[g("div",us,[g("div",{class:"uploading-progress-bar",style:me({width:e.parsePercentage(Math.max(0,Math.min(d.percentage||0,100)))+"%"})},null,4)])])],64)):U("v-if",!0),~["uploading","success","downloading"].indexOf(d.status)?(m(),z(rt(e.getFileIcon({type:e.getFileType({file:d})}).name),{key:1,class:"file-icon",style:me({fill:e.getFileIcon({type:e.getFileType({file:d})}).color})},null,8,["style"])):U("v-if",!0),~["fail"].indexOf(d.status)?(m(),T("div",ps,[y(i,{class:"upload-fail-icon"})])):U("v-if",!0)]),g("div",hs,[g("div",fs,[g("div",ms,[g("span",{title:d.name},F(d.name.length>e.maxNameLength?d.name.substring(0,e.maxNameLength)+"...":d.name),9,gs)]),g("div",vs,[Y(e.$slots,"operate",{file:d},function(){return[e.handlePreview&&~["success","downloading"].indexOf(d.status)?(m(),T("span",{key:0,class:"operate-btn",onClick:function(C){return e.handlePreview(d)}},F(e.t("ui.uploadList.preview")),9,ys)):U("v-if",!0),e.handleDownloadFile&&!~["fail","uploading"].indexOf(d.status)?(m(),T("span",{key:1,class:"operate-btn",onClick:function(C){return e.handleDownloadFile(d)}},F(e.t("ui.uploadList.download")),9,ws)):U("v-if",!0),(e.isEdm?!0:e.handleReUpload)&&~["fail"].indexOf(d.status)?(m(),T("span",{key:2,class:"operate-btn",onClick:function(C){return e.reUpload(d)}},F(e.t("ui.uploadList.reUpload")),9,Ts)):U("v-if",!0),e.displayOnly?U("v-if",!0):(m(),T("span",{key:3,class:"operate-btn",onClick:G(function(_){return e.remove({file:d})},["stop"])},F(e.t("ui.uploadList.delete")),9,bs))]})])]),g("div",Ss,[g("span",ks,[~["fail"].indexOf(d.status)?(m(),T("span",Es,[g("span",null,F(e.t("ui.uploadList.uploadFailed")),1)])):~["uploading"].indexOf(d.status)?(m(),T("span",Cs,F(e.formatFileSize(d.size*d.percentage/100)+"/"+e.formatFileSize(d.size)),1)):(m(),T("span",_s,F(e.formatFileSize(d.size)),1))]),g("span",Is,[Y(e.$slots,"assist-content",{file:d})])])])]}),d.showDownloadBar?(m(),z(a,{key:0,class:"tiny-upload-list__download-bar","show-text":!1,"stroke-width":4,percentage:d.downloadPercentage||0,status:d.downloadStatus||"default"},null,8,["percentage","status"])):U("v-if",!0)],10,as)}),128))])):(m(),T("div",Us,F(e.t("ui.uploadList.noAttachments")),1))],2)):(m(),T("div",Fs,[y(Io,{tag:"ul",class:P(["tiny-upload-list","tiny-upload-list--"+e.listType,{"is-disabled":e.disabled}]),name:"tiny-list"},{default:le(function(){return[(m(!0),T(ge,null,De(e.files,function(d){return m(),T("li",{key:d.uid,tabindex:"0",class:"tiny-upload-list__li"},[g("div",{class:P(["tiny-upload-list__item","is-"+d.status,e.state.focusing?"focusing":"",{isEdm:e.isEdm},{showUpdate:e.listOption.showUpdate},{showDel:e.listOption.showDel}]),onKeydown:Un(function(_){return!e.disabled&&e.$emit("remove",d)},["delete"]),onFocus:t[0]||(t[0]=function(_){return e.state.focusing=!0}),onBlur:t[1]||(t[1]=function(_){return e.state.focusing=!1}),onClick:t[2]||(t[2]=function(_){return e.state.focusing=!1})},[Y(e.$slots,"default",{file:d},function(){return[d.status!=="uploading"&&d.status!=="fail"&&["picture-card","picture"].indexOf(e.listType)>-1?(m(),T("img",{key:0,class:"tiny-upload-list__item-thumbnail",src:d.url,alt:""},null,8,Ls)):U("v-if",!0),y(p,{placement:"top",effect:"light",disabled:e.state.tooltipDisabled},{content:le(function(){return[d.status==="fail"?(m(),T("span",Ds,[y(s,{class:"tiny-upload-list__icon-operationfaild"}),Ae(F(e.t("ui.fileUpload.networkError")),1)])):(m(),T("span",As,F(e.isFolderTitle?(d.path||"")+d.name:d.name),1))]}),default:le(function(){return[g("a",{class:P(["tiny-upload-list__item-name",{isFail:e.isEdm&&d.status==="fail"}]),onClick:function(C){return e.handleClick(C,d)},title:e.state.tooltipDisabled?e.isFolderTitle?(d.path||"")+d.name:d.name:""},[e.isFolder?U("v-if",!0):(m(),z(c,{key:0,fill:e.isEdm&&d.status==="fail"?"#f5222d":"",class:"tiny-svg-size"},null,8,["fill"])),Ae(F(d.name.length>e.maxNameLength?d.name.substring(0,e.maxNameLength)+"...":d.name),1)],10,Ps)]}),_:2},1032,["disabled"]),e.isEdm?(m(),T("div",{key:1,class:P(["tiny-upload-list__item-edminfo",{isFail:e.isEdm&&d.status==="fail"}])},[g("span",null,F(d.docId),1),g("span",null,F(d.version),1),g("span",null,F(d.size),1),g("span",null,F(d.serverName),1)],2)):U("v-if",!0),e.state.preViewComponent?U("v-if",!0):(m(),T("label",Os,[e.listType==="text"?(m(),z(u,{key:0,class:"tiny-svg-size icon-successful"})):U("v-if",!0),["picture-card","picture"].indexOf(e.listType)>-1?(m(),z(h,{key:1,class:"tiny-svg-size tiny-icon-check"})):U("v-if",!0)])),e.isEdm&&!e.isFolder&&!e.disabled&&d.status!=="fail"&&e.listOption.showUpdate?(m(),T("span",{key:3,title:e.t("ui.fileUpload.updateFile"),onClick:function(C){return e.$emit("update",d)}},[y(w,{class:"tiny-svg-size icon-refres",fill:e.isEdm&&d.status==="fail"?"#f5222d":""},null,8,["fill"])],8,Rs)):U("v-if",!0),!e.disabled&&e.reUploadable&&d.status==="fail"?(m(),T("span",{key:4,title:e.t("ui.fileUpload.reUploadFile"),onClick:function(C){return e.$emit("reUpload",d)}},[y(f,{class:"tiny-svg-size icon-refres",fill:e.isEdm?"#f5222d":""},null,8,["fill"])],8,Ms)):U("v-if",!0),!e.disabled&&e.listOption.showDel?(m(),T("span",{key:5,title:e.t("ui.fileUpload.deleteFile"),onClick:function(C){return e.$emit("remove",d)}},[(m(),z(rt(e.state.closeComponent),{class:"tiny-svg-size icon-close",fill:e.isEdm&&d.status==="fail"?"#f5222d":""},null,8,["fill"]))],8,Ns)):U("v-if",!0),!e.disabled&&e.listOption.showDel?(m(),T("i",zs,F(e.t("ui.fileUpload.deleteTip")),1)):U("v-if",!0),d.status==="uploading"||d.status==="downloading"?(m(),z(a,{key:7,status:"success",type:e.listType==="picture-card"?e.state.progressType:"line","stroke-width":e.listType==="picture-card"?e.state.progressStrokeWidth:2,width:e.state.progressWidth,percentage:e.parsePercentage(d.percentage),"show-text":!e.state.progressWidth},null,8,["type","stroke-width","width","percentage","show-text"])):U("v-if",!0),d.status==="uploading"&&e.listType==="picture-card"&&e.state.progressWidth?(m(),T("div",{key:8,class:"tiny-upload-list__item-cancel",onClick:function(C){return e.$emit("remove",d)}},F(e.t("ui.fileUpload.cancelFile")),9,xs)):U("v-if",!0),y(p,{placement:"top",effect:"light",disabled:e.state.tooltipDisabled||d.status!=="fail"},{content:le(function(){return[g("span",Bs,[y(s,{class:"tiny-upload-list__icon-operationfaild"}),Ae(F(e.t("ui.fileUpload.pictureNetworkError")),1)])]}),default:le(function(){return[e.listType==="picture-card"&&(e.state.progressWidth?d.status!=="uploading":!0)?(m(),T("span",js,[e.openDownloadFile?(m(),T("span",{key:0,class:"tiny-upload-list__item-download",title:e.t("ui.fileUpload.downloadFile"),onClick:function(C){return e.handleClick(d)}},[y(v,{class:"tiny-svg-size"})],8,Hs)):U("v-if",!0),e.handlePreview&&d.status!=="fail"?(m(),T("span",{key:1,class:"tiny-upload-list__item-preview",title:e.t("ui.fileUpload.previewFile"),onClick:function(C){return e.handlePreview(d)}},[e.state.preViewComponent?(m(),z(S,{key:0,class:"tiny-svg-size tiny-svg-fullscreen"})):(m(),z(b,{key:1,class:"tiny-svg-size"}))],8,Vs)):U("v-if",!0),e.isEdm&&!e.isFolder&&!e.disabled?(m(),T("span",{key:2,title:e.t("ui.fileUpload.updateFile"),class:"tiny-upload-list__item-refres",onClick:function(C){return e.$emit("update",d)}},[y(w,{class:"tiny-svg-size"})],8,Ws)):U("v-if",!0),e.disabled?U("v-if",!0):(m(),T("span",{key:3,class:"tiny-upload-list__item-delete",title:e.t("ui.fileUpload.deleteFile"),onClick:function(C){return e.$emit("remove",d)}},[y(E,{class:"tiny-svg-size icon-delete"})],8,Zs))])):U("v-if",!0)]}),_:2},1032,["disabled"])]})],42,$s),e.state.preViewComponent&&e.listType==="picture-card"?(m(),T("div",{key:0,class:P(["tiny-upload-list__li-title",d.status==="fail"&&"is-fail"]),title:e.isFolderTitle?(d.path||"")+d.name:d.name},F(d.name.length>e.maxNameLength?d.name.substring(0,e.maxNameLength)+"...":d.name),11,Ys)):U("v-if",!0)])}),128))]}),_:3},8,["class"]),e.reUploadable&&e.state.failUploadFileCount&&e.listType==="text"?(m(),T("div",Ks,[y(s,{class:"tiny-upload-list__icon-operationfaild"}),g("span",qs,F(typeof e.reUploadTip=="function"?e.reUploadTip(e.state.failUploadFileCount):e.t("ui.fileUpload.reUploadTip",{number:e.state.failUploadFileCount})),1),y(k,{type:"text",onClick:t[3]||(t[3]=function(d){return e.$emit("ReUploadTotal",e.files)})},{default:le(function(){return[Ae(F(e.t("ui.fileUpload.reUploadFile")),1)]}),_:1})])):U("v-if",!0)]))}var on=rs(is,[["render",Gs]]);class Qs{constructor(t){this.recorder=null,this.mediaStream=null,this.recorderFile=null,this.audioContext=null,this.timeId=null,this.config=t}start(){return this.getUserMedia().then(({stream:t})=>(t&&(this.initMideaRecoder(t),this.initAudioContext(t)),!!t))}getUserMedia(){return new Promise(t=>{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||window.getUserMedia;const n={audio:!0};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(n).then(o=>t({stream:o})).catch(t):navigator.getUserMedia?navigator.getUserMedia(n,o=>t({stream:o}),t):t(new Error("Not support userMedia"))})}initMideaRecoder(t){this.recorder=new MediaRecorder(t),this.mediaStream=t;let n=[];this.recorder.onpause=()=>{},this.recorder.onresume=()=>{},this.recorder.ondataavailable=o=>{n.push(o.data)},this.recorder.onstop=()=>{this.recorderFile=new Blob(n,{type:this.recorder.mimeType}),n=[];const{onstop:o}=this.config;o&&o(this.recorderFile)},this.recorder.onerror=()=>{},this.recorder.start()}stop(){this.recorder.state!=="inactive"&&(this.recorder.stop(),this.closeStream(this.mediaStream),this.audioContext.close()),clearInterval(this.timeId),this.timeId=null}closeStream(t){typeof t.stop=="function"?t.stop():[t.getAudioTracks(),t.getVideoTracks()].forEach(o=>o&&o.forEach(r=>typeof r.stop=="function"&&r.stop()))}pause(){this.recorder.pause(),this.audioContext.suspend(),clearInterval(this.timeId),this.timeId=null}resume(){this.recorder.resume(),this.audioContext.resume(),clearInterval(this.timeId),this.timeId=setInterval(()=>this.getRealTimeAudio(),100)}initAudioContext(t){this.audioContext=new(window.AudioContext||window.webkitAudioContext);const n=this.audioContext.createMediaStreamSource(t);this.analyser=this.audioContext.createAnalyser(),n.connect(this.analyser),clearInterval(this.timeId),this.timeId=setInterval(()=>this.getRealTimeAudio(),100)}getRealTimeAudio(){const{onMediaProgress:t}=this.config;t&&t(this.analyser,this.audioContext)}}const Xs=({state:e})=>(t=!1)=>{e.record.now=Date.now(),e.record.fn||(e.record.fn=()=>{const n=Date.now();e.record.currentTime+=(n-e.record.now)/1e3,e.record.now=n}),t?(clearInterval(e.record.timer),e.record.timer=null,e.record.fn()):e.record.timer=setInterval(e.record.fn,1e3)},Js=({state:e,api:t,emit:n,constants:o,props:r})=>l=>{const{READY:i,RECORDING:a,PAUSE:s}=o.STATUS;r.isHwh5?e.record.status===i?t.triggerClick(l,o.HWH5_STATUS.START,()=>e.record.status=a):e.record.status===s?t.triggerClick(l,o.HWH5_STATUS.CONTINUE,()=>e.record.status=a):t.triggerClick(l,o.HWH5_STATUS.PAUSE,()=>e.record.status=s):e.record.status===i?(!e.recorder&&(e.recorder=new Qs({onMediaProgress:(c,p)=>{e.record.currentTime=p.currentTime,e.voiceNum=id(c)},onstop:c=>n("confirm",c)})),e.recorder.start().then(c=>{if(!c)return n("error");e.record.status=a})):e.record.status===s?(e.record.status=a,e.recorder.resume()):(e.record.status=s,e.recorder.pause())},ed=({state:e,emit:t,props:n,constants:o,api:r})=>l=>{n.isHwh5?r.triggerClick(l,o.HWH5_STATUS.END,()=>{t("update:modelValue",!1)}):(e.isClickConfirm=!0,t("update:modelValue",!1))},td=({emit:e,props:t,constants:n,api:o,state:r})=>l=>{t.isHwh5?o.triggerClick(l,n.HWH5_STATUS.CANCEL,()=>e("update:modelValue",!1)):(r.isClickConfirm=!0,e("update:modelValue",!1))},nd=({state:e})=>(t,n,o)=>{const r=e.listeners["trigger-click"]&&e.listeners["trigger-click"](t,n);r&&r.then?r.then(()=>o&&o()):o&&o()},od=({api:e})=>t=>!t&&e.resetRecord(),rd=({api:e,props:t,constants:n,state:o})=>r=>{r===n.STATUS.RECORDING?(t.isHwh5&&e.calcRecordTime(),e.renderAudioGraph()):r===n.STATUS.PAUSE&&t.isHwh5&&e.calcRecordTime(!0),cancelAnimationFrame(o.handlerId)},id=e=>{const t=new Uint8Array(e.fftSize);e.getByteTimeDomainData(t);let n=0,o=0;for(let a=0;a<e.fftSize;a++)n+=t[a]>128?t[a]-128:0,o+=t[a]<128?128-t[a]:0;let r=1;return![0,500,1e3,5e3,1e4].some((a,s)=>n<=a?r=s+1+(a===0?o/1e3:n/a):!1)&&(r=6),r},ld=({canvasCtx:e,width:t})=>{const n=({canvasCtx:l,width:i,colors:a=[]})=>{const s=l.createLinearGradient(0,0,i,0);return a.forEach(({n:c,color:p})=>s.addColorStop(c,p)),s},o=[{q:0,a:8,w:.02857142857142857,speed:-.05},{q:4,a:7,w:.02857142857142857,speed:-.1},{q:10,a:6,w:.02857142857142857,speed:-.3}],r=[[{n:0,color:"rgba(0, 109, 213, 0)"},{n:.5,color:"rgba(0, 109, 213, 0.8)"},{n:1,color:"rgba(0, 109, 213, 0)"}],[{n:0,color:"rgba(0, 14, 215, 0)"},{n:.5,color:"rgba(0, 14, 215, 0.4)"},{n:1,color:"rgba(0, 14, 215, 0)"}],[{n:0,color:"rgba(0, 109, 213, 0)"},{n:.5,color:"rgba(0, 109, 213, 0.3)"},{n:1,color:"rgba(0, 109, 213, 0)"}]];return o.forEach((l,i)=>{l.strokeStyle=n({canvasCtx:e,width:t,colors:r[i]})}),o},ad=({vm:e,nextTick:t,state:n,props:o})=>()=>{t(()=>{let r=e.$refs.canvas;if(r){const l=r.offsetHeight,i=r.offsetWidth;r.height=l,r.width=i;const a=r.getContext("2d"),s=ld({canvasCtx:a,width:i}),c=()=>{n.handlerId=requestAnimationFrame(c);let p=1;!o.isHwh5&&n.voiceNum&&(p=n.voiceNum.toFixed(1)),a.clearRect(0,0,i,l),a.fillStyle="#fff",a.fillRect(0,0,i,l),s.forEach(u=>{const{a:h,w,speed:f,strokeStyle:v}=u;a.lineWidth=1,a.strokeStyle=v;let S=0;a.beginPath(),a.moveTo(S,l/2),u.q+=f;for(let b=0;b<=i;b++){const E=h*p*Math.sin(w*b+u.q)+l/2;a.lineTo(b,E)}a.stroke()})};c()}})},sd=({state:e,constants:t})=>()=>{e.record.status=t.STATUS.READY,e.record.currentTime=0,e.isClickConfirm&&e.recorder&&e.recorder.recorder&&e.recorder.stop(),e.isClickConfirm=!1,clearInterval(e.record.timer),e.record.timer=null},dd=({api:e})=>()=>e.resetRecord(),cd=["state","toogleRecord","handleConfirm","handleCancel"],ud=({vm:e,api:t,reactive:n,computed:o})=>{const r=n({listeners:e.$listeners,record:{status:"ready",currentTime:0},recodeTime:o(()=>{const l=parseInt(r.record.currentTime),i=Math.floor(l/60),a=Math.floor(l%60);return`${i.toString().padStart(2,0)}:${a.toString().padStart(2,0)}`})});return Object.assign(t,{state:r}),r},pd=({api:e,state:t,emit:n,vm:o,constants:r,props:l,nextTick:i})=>{Object.assign(e,{toogleRecord:Js({state:t,api:e,emit:n,constants:r,props:l}),handleConfirm:ed({state:t,emit:n,props:l,constants:r,api:e}),watchModelValue:od({api:e}),renderAudioGraph:ad({vm:o,nextTick:i,state:t,props:l}),unmounted:dd({api:e}),resetRecord:sd({state:t,constants:r}),handleCancel:td({emit:n,props:l,constants:r,api:e,state:t}),triggerClick:nd({state:t}),watchRecordStatus:rd({api:e,props:l,constants:r,state:t}),calcRecordTime:Xs({state:t})})},hd=({watch:e,props:t,api:n,state:o})=>{e(()=>t.modelValue,n.watchModelValue,{immediate:!0}),e(()=>o.record.status,n.watchRecordStatus)},fd=(e,{reactive:t,watch:n,computed:o,onUnmounted:r,nextTick:l},{emit:i,vm:a,constants:s})=>{const c={},p=ud({vm:a,api:c,reactive:t,computed:o});return pd({api:c,state:p,emit:i,vm:a,constants:s,props:e,nextTick:l}),hd({watch:n,props:e,api:c,state:p}),r(c.unmounted),c};function md(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=gd(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gd(e,t){if(e){if(typeof e=="string")return rn(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rn(e,t):void 0}}function rn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var vd=function(t,n){for(var o=t.__vccOpts||t,r=md(n),l;!(l=r()).done;){var i=l.value,a=i[0],s=i[1];o[a]=s}return o},yd=Q({emits:["confirm","error","update:modelValue"],props:[].concat(ue,["modelValue","isHwh5","lockScroll"]),components:{TinyActionSheet:kn,IconMic:Rn()},inheritAttrs:!1,setup:function(t,n){return pe({props:t,context:n,renderless:fd,api:cd})}}),wd={"data-tag":"tiny-record"},Td={"data-tag":"tiny-record-header-default",class:"flex justify-center flex-wrap text-base text-color-text-secondary"},bd={key:0,ref:"canvas",class:"w-full h-full"},Sd={key:1,class:"absolute left-0 bottom-0 w-full"},kd={key:1,class:"w-6 h-6 bg-color-error rounded"};function Ed(e,t,n,o,r,l){var i=$("icon-mic"),a=$("tiny-action-sheet");return m(),T("div",wd,[y(a,{title:e.t("ui.record.record"),visible:e.modelValue,"lock-scroll":e.lockScroll,"custom-class":"pb-0","mask-closable":!1,"onUpdate:visible":t[3]||(t[3]=function(s){return e.$emit("update:modelValue",s)})},{"header-left":le(function(){return[g("div",{"data-tag":"tiny-record-header-left",class:"text-base text-color-text-secondary",onClick:t[0]||(t[0]=function(){return e.handleCancel&&e.handleCancel.apply(e,arguments)})},F(e.t("ui.record.cancel")),1)]}),"header-right":le(function(){return[g("div",{"data-tag":"tiny-record-header-right",class:P(["text-color-brand",["recording","pause"].includes(e.state.record.status)?"":"hidden"]),onClick:t[1]||(t[1]=function(){return e.handleConfirm&&e.handleConfirm.apply(e,arguments)})},F(e.t("ui.record.confirm")),3)]}),default:le(function(){return[g("div",Td,[g("div",{"data-tag":"tiny-record-time",class:P(["font-light",["recording","pause"].includes(e.state.record.status)?"visible":"invisible"])},F(e.state.recodeTime),3),g("div",{"data-tag":"tiny-record-ready",class:P(["relative w-full text-center px-4",["recording"].includes(e.state.record.status)?"h-24":"h-10 my-7"])},[["recording"].includes(e.state.record.status)?(m(),T("canvas",bd,null,512)):(m(),T("span",Sd,F(["ready"].includes(e.state.record.status)?e.t("ui.record.clickToStartRecording"):e.t("ui.record.clickToResumeRecording")),1))],2),g("div",{"data-tag":"tiny-record-recording",class:P(["flex w-16 h-16 justify-center items-center mt-0 m-10 border rounded-full cursor-pointer",[["recording"].includes(e.state.record.status)?"border-color-border-separator shadow-sm":"border-color-brand"]])},[g("div",{"data-tag":"tiny-record-tooglerecord",onClick:t[2]||(t[2]=function(){return e.toogleRecord&&e.toogleRecord.apply(e,arguments)})},[["recording"].includes(e.state.record.status)?(m(),T("div",kd)):(m(),z(i,{key:0,"custom-class":"w-10 h-10 fill-color-brand"}))])],2)])]}),_:1},8,["title","visible","lock-scroll"])])}var Cd=vd(yd,[["render",Ed]]);function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ot.apply(null,arguments)}var _d=function(t){var n;return typeof process=="object"&&((n={})==null||n.TINY_MODE),Cd},Id={STATUS:{READY:"ready",RECORDING:"recording",PAUSE:"pause"},HWH5_STATUS:{START:"start",PAUSE:"pause",CONTINUE:"continue",CANCEL:"cancel",END:"end"}},Pe=Q({name:se+"Record",props:Ot({},Ve,{_constants:{type:Object,default:function(){return Id}},modelValue:Boolean,isHwh5:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0}}),setup:function(t,n){return He({props:t,context:n,template:_d})}}),Ud="3.undefined";Pe.model={prop:"modelValue",event:"update:modelValue"};Pe.install=function(e){e.component(Pe.name,Pe)};Pe.version=Ud;function Fd(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=$d(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $d(e,t){if(e){if(typeof e=="string")return ln(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(e,t):void 0}}function ln(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var Ld=function(t,n){for(var o=t.__vccOpts||t,r=Fd(n),l;!(l=r()).done;){var i=l.value,a=i[0],s=i[1];o[a]=s}return o},Dd=Q({name:se+"UploadList",components:{TinyProgress:dt,IconError:At(),IconCueL:bn(),IconEyeopen:Eo(),IconDownload:ct(),IconDel:Tn(),IconRefres:kr(),IconRight:Pn(),IconPause:An(),IconAudio:On(),IconEllipsis:$n(),TinyActionSheet:kn,IconExcelType:Mn(),IconFileType:Nn(),IconOtherType:Sn(),IconPdfType:zn(),IconPictureType:xn(),IconPptType:Bn(),IconTextType:jn(),IconVideoType:Hn(),IconWordType:Vn(),IconZipType:Wn(),IconFileuploadPro:Zn(),TinyRecord:Pe},emits:["remove","start","update:visible","click-file-list"],props:[].concat(ue,["disabled","display","files","filesIcon","handlePreview","isEdm","isFolder","listType","openDownloadFile","srcList","isFolderTitle","listOption","maxNameLength","scale","showName","types","edm","displayOnly","handleDownloadFile","handleReUpload","isDragover","selected","triggerClick","isHwh5","triggerPlay","mode","lockScroll","compact","imageBgColor"]),setup:function(t,n){return pe({props:t,context:n,renderless:ro,api:oo,extendOptions:{Modal:Ie}})}}),Ad={"data-tag":"tiny-upload-list"},Pd={key:0,"data-tag":"tiny-upload-list-files",class:"text-[0]"},Od=["onClick"],Rd=g("div",{class:"w-full h-full absolute top-0 left-0 bg-black opacity-50 rounded-sm"},null,-1),Md={class:"w-full h-full absolute top-0 left-0 overflow-hidden flex px-1 items-center justify-center rounded-sm"},Nd={"data-tag":"tiny-upload-list-animation",class:"bg-color-icon-tertiary w-full h-0.5 rounded"},zd={key:2,"data-tag":"tiny-upload-list-fail",class:"relative w-full h-full bg-black/50 rounded"},xd={"data-tag":"tiny-upload-list-content",class:"relative inline-block w-[calc(100%-theme(spacing.10))] text-xs pr-10 sm:pr-0"},Bd={class:"flex","data-tag":"tiny-upload-list-name"},jd={class:"flex-1 sm:mr-6 text-xs sm:text-sm leading-5.5 text-color-text-primary overflow-hidden text-ellipsis whitespace-nowrap"},Hd=["title"],Vd={"data-tag":"tiny-upload-list-operate",class:"hidden sm:block sm:invisible sm:group-hover:visible min-w-fit text-color-brand-hover text-xs"},Wd=["onClick"],Zd=["onClick"],Yd=["onClick"],Kd=["onClick"],qd={class:"flex h-5 leading-5","data-tag":"tiny-upload-list-content"},Gd={class:"overflow-hidden text-ellipsis whitespace-nowrap sm:font-normal"},Qd={key:0},Xd={class:"hidden sm:inline text-color-error-hover"},Jd={class:"inline sm:hidden text-color-error-hover"},ec={key:1,class:"text-color-text-secondary"},tc={key:2,class:"text-color-text-secondary"},nc={class:"flex-1 ml-2 overflow-hidden text-ellipsis whitespace-nowrap text-right text-color-none"},oc={"data-tag":"tiny-upload-list-icon",class:"sm:invisible absolute top-1/2 right-2 -translate-y-1/2 cursor-pointer"},rc=["onClick"],ic={key:1,"data-tag":"tiny-upload-list-drag-single",class:"border-dashed border-color-border text-center"},lc={key:0},ac={key:1,class:"h-full"},sc={key:0},dc={class:"mt-4.5"},cc={class:"mt-1 pl-1 align-middle text-color-error text-xs"},uc={key:1},pc={class:"relative inline-block w-12 h-12 mt-6 align-top"},hc={key:0,class:"w-1/2 h-full absolute top-0 left-0 rounded-l overflow-hidden"},fc={key:1,class:"w-1/2 h-full absolute top-0 left-1/2 rounded-r overflow-hidden"},mc={class:"mt-3 mb-2"},gc=["onClick"],vc=["onKeydown"],yc={class:"absolute top-0 left-0 w-full h-full"},wc=["src"],Tc=["src"],bc=["src"],Sc={key:1,class:"flex w-full h-full justify-center items-center border rounded border-transparent bg-color-info-secondary-subtle"},kc=["onLoadedmetadata","onTimeupdate"],Ec=["src"],Cc=["src"],_c=["src"],Ic=["src"],Uc=["title"],Fc={class:"absolute w-full top-1/2 left-0 -translate-y-1/2 z-[1] text-center hover:cursor-pointer"},$c={key:0},Lc={class:"mt-3 text-color-text-inverse text-xs"},Dc={key:1},Ac={class:"block sm:group-hover:hidden"},Pc={class:"mt-1 text-color-text-inverse text-xs"},Oc={class:"hidden sm:group-hover:block"},Rc={key:2},Mc={key:1},Nc=["onClick"],zc={class:"absolute top-0 left-0 w-full h-full"},xc={"data-tag":"tiny-upload-list-download",class:"text-center"},Bc=g("div",{class:"h-2 bg-color-bg-2"},null,-1),jc={"data-tag":"tiny-upload-list-vadio-content",class:"text-center"},Hc=g("div",{class:"h-2 bg-color-bg-2"},null,-1);function Vc(e,t,n,o,r,l){var i=$("icon-cue-l"),a=$("icon-ellipsis"),s=$("icon-error"),c=$("tiny-progress"),p=$("icon-fileupload-pro"),u=$("icon-refres"),h=$("icon-del"),w=$("icon-eyeopen"),f=$("icon-download"),v=$("icon-right"),S=$("icon-pause"),b=$("icon-audio"),E=$("tiny-action-sheet"),k=$("tiny-record");return m(),T("div",Ad,[e.listType==="text"||e.listType==="saas"?(m(),T("div",{key:0,"data-tag":"tiny-upload-list-text",ref:"uploadList",class:P(["border-dashed border-color-border",[e.state.files.length||e.mode==="bubble"?"sm:border-0":"sm:border-t",{"sm:h-52 overflow-y-auto overflow-x-hidden":e.mode==="bubble"}]])},[e.state.files.length?(m(),T("div",Pd,[(m(!0),T(ge,null,De(e.state.files,function(d,_){return m(),T("div",{"data-tag":"tiny-upload-list-item",ref_for:!0,ref:"uploadListLi",class:P(["group relative sm:inline-block min-w-full py-1.5 px-3 mr-2 border-0.5 sm:border border-color-border-separator rounded hover:bg-color-bg-2",{"sm:border-color-brand border-color-border-separator":d.uid===(e.selected&&e.selected.uid),"mb-2":_!==e.state.files.length-1,"sm:min-w-[theme(spacing.112)]":e.compact}]),key:d.uid,tabindex:"0",onClick:function(L){return e.$emit("click-file-list",d)}},[Y(e.$slots,"default",{file:d},function(){return[g("div",{"data-tag":"tiny-upload-list-status",class:P(["relative inline-block w-8 h-8 mr-2 align-top mt-1 pt-px",{"bg-color-error rounded-sm":~["fail"].indexOf(d.status)}])},[~["uploading"].indexOf(d.status)?(m(),T(ge,{key:0},[Rd,g("div",Md,[g("div",Nd,[g("div",{class:"bg-white h-full transition-all",style:me({width:e.parsePercentage(Math.max(0,Math.min(d.percentage||0,100)))+"%"})},null,4)])])],64)):U("v-if",!0),~["uploading","success","downloading"].indexOf(d.status)?(m(),z(rt(e.getFileIcon({type:e.getFileType({file:d})}).name),{key:1,"custom-class":"w-full h-full rounded-sm",style:me({fill:e.getFileIcon({type:e.getFileType({file:d})}).color})},null,8,["style"])):U("v-if",!0),~["fail"].indexOf(d.status)?(m(),T("div",zd,[y(i,{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 fill-color-error"})])):U("v-if",!0)],2),g("div",xd,[g("div",Bd,[g("div",jd,[g("span",{title:d.name},F(d.name.length>e.maxNameLength?d.name.substring(0,e.maxNameLength)+"...":d.name),9,Hd)]),g("div",Vd,[Y(e.$slots,"operate",{file:d},function(){return[e.handlePreview&&~["success","downloading"].indexOf(d.status)?(m(),T("span",{key:0,class:"mr-2 cursor-pointer",onClick:function(L){return e.handlePreview(d)}},F(e.t("ui.uploadList.preview")),9,Wd)):U("v-if",!0),e.handleDownloadFile&&!~["fail","uploading"].indexOf(d.status)?(m(),T("span",{key:1,class:"mr-2 cursor-pointer",onClick:function(L){return e.handleDownloadFile(d)}},F(e.t("ui.uploadList.download")),9,Zd)):U("v-if",!0),(e.isEdm?!0:e.handleReUpload)&&~["fail"].indexOf(d.status)?(m(),T("span",{key:2,class:"mr-2 cursor-pointer",onClick:function(L){return e.reUpload(d)}},F(e.t("ui.uploadList.reUpload")),9,Yd)):U("v-if",!0),e.displayOnly?U("v-if",!0):(m(),T("span",{key:3,class:"cursor-pointer",onClick:G(function(C){return e.remove({file:d})},["stop"])},F(e.t("ui.uploadList.delete")),9,Kd))]})])]),g("div",qd,[g("span",Gd,[~["fail"].indexOf(d.status)?(m(),T("span",Qd,[g("span",Xd,F(e.t("ui.uploadList.uploadFailed")),1),g("span",Jd,F(e.t("ui.uploadList.uploadFailedAndReupload")),1)])):~["uploading"].indexOf(d.status)?(m(),T("span",ec,F(e.formatFileSize(d.size*d.percentage/100)+"/"+e.formatFileSize(d.size)),1)):(m(),T("span",tc,F(e.formatFileSize(d.size)),1))]),g("span",nc,[Y(e.$slots,"assist-content",{file:d})])]),g("div",oc,[~["success","downloading"].indexOf(d.status)?(m(),z(a,{key:0,onClick:function(L){return e.showOperatePanel({file:d})},class:"fill-color-text-primary"},null,8,["onClick"])):U("v-if",!0),!e.displayOnly&&~["uploading","fail"].indexOf(d.status)?(m(),z(s,{key:1,class:"fill-color-none-hover",onClick:G(function(C){return e.remove({file:d})},["stop"])},null,8,["onClick"])):U("v-if",!0)]),g("div",{class:"absolute left-0 top-0 w-[calc(100%-theme(spacing.10))] h-full mr-10 sm:hidden sm:mr-0",onClick:function(L){return e.reUpload(d)}},null,8,rc)])]}),d.showDownloadBar?(m(),z(c,{key:0,class:"absolute left-0 bottom-0 w-full","show-text":!1,"stroke-width":4,percentage:d.downloadPercentage||0,status:d.downloadStatus||"default"},null,8,["percentage","status"])):U("v-if",!0)],10,Od)}),128))])):(m(),T("div",{key:1,"data-tag":"tiny-upload-list-noattachments",class:P(["mt-4 text-color-none text-xs sm:block",e.displayOnly?"":"hidden"])},F(e.t("ui.uploadList.noAttachments")),3))],2)):e.listType==="drag-single"?(m(),T("div",ic,[Y(e.$slots,"upload"),g("div",{class:P(["absolute w-full h-full top-0 left-0",[e.files.length?"z-0":"z-[-1]"]])},[e.files.length?(m(),T("div",ac,[(m(!0),T(ge,null,De(e.files,function(d){return m(),T("div",{key:d.uid,tabindex:"0"},[Y(e.$slots,"default",{file:d},function(){return[["fail"].includes(d.status)?(m(),T("div",sc,[y(p,{"custom-class":"w-12 h-12 mt-6",class:P([e.isDragover?"fill-color-brand":"fill-color-none-hover"])},null,8,["class"]),g("div",dc,[y(i,{class:"fill-color-error"}),g("span",cc,F(e.t("ui.uploadList.uploadFailed")),1)])])):(m(),T("div",uc,[g("div",pc,[~["uploading"].indexOf(d.status)?(m(),T("div",hc,[g("div",{class:"absolute w-16 h-16 top-1/2 right-0 origin-right bg-color-bg-7",style:me({transform:"translateY(-50%) rotate("+e.parsePercentage(Math.max(0,Math.min(d.percentage||0,100)-50)/50*180)+"deg)"})},null,4)])):U("v-if",!0),~["uploading"].indexOf(d.status)?(m(),T("div",fc,[g("div",{class:"absolute w-16 h-16 top-1/2 left-0 origin-left bg-color-bg-7",style:me({transform:"translateY(-50%) rotate("+e.parsePercentage(Math.min(50,d.percentage||0)/50*180)+"deg)"})},null,4)])):U("v-if",!0),~["uploading","success","downloading"].indexOf(d.status)?(m(),z(rt(e.getFileIcon({type:e.getFileType({file:d})}).name),{key:2,"custom-class":"w-full h-full rounded-sm",style:me({fill:e.getFileIcon({type:e.getFileType({file:d})}).color})},null,8,["style"])):U("v-if",!0)]),g("div",mc,F(d.name),1),g("div",null,[g("span",{class:"text-color-brand cursor-pointer",onClick:G(function(_){return e.remove({file:d})},["stop"])},F(e.t("ui.uploadList.delete")),9,gc)])]))]})])}),128))])):(m(),T("div",lc,[y(p,{"custom-class":"w-20 h-20 mt-6",class:P([e.isDragover?"fill-color-brand":"fill-color-none-hover"])},null,8,["class"]),g("div",{class:P(["mb-0.5 text-sm text-color-text-secondary",e.isDragover?"mt-4":""])},F(e.isDragover?e.t("ui.uploadList.releaseAndUpload"):e.t("ui.uploadList.dragOrClickImport")),3),e.isDragover?U("v-if",!0):Y(e.$slots,"tip",{key:0})]))],2)])):(m(),T("div",{key:2,"data-tag":"tiny-upload-list-picture-card",class:P([{"grid grid-cols-3 gap-x-4 sm:grid-cols-[repeat(auto-fit,theme(spacing.24))]":e.listType==="picture-card"},e.showName?"gap-y-8":"gap-y-4"])},[(m(!0),T(ge,null,De(e.files,function(d,_){return m(),T("div",{class:P(["group relative",{hidden:e.listType==="picture-single"&&_},e.listType==="picture-single"?"w-24 h-24 sm:w-[calc("+e.scale+"*theme(spacing.20))] sm:h-20":"w-full pt-[100%]"]),key:d.uid,tabindex:"0",onKeydown:Un(function(C){return!e.disabled&&e.remove({file:d})},["delete"])},[g("div",yc,[Y(e.$slots,"default",{file:d},function(){return[!e.displayOnly&&(d.status!=="uploading"||~["video","audio"].indexOf(d.type))?(m(),z(s,{key:0,class:P(["absolute w-5 h-5 -top-1.5 fill-color-none-hover hover:cursor-pointer z-[1]",[{"sm:hidden -top-1.5":!~["video","audio"].indexOf(d.type)},(e.listType==="picture-single","-right-1.5")]]),onClick:G(function(C){return e.remove({file:d})},["stop"])},null,8,["class","onClick"])):U("v-if",!0),g("div",{style:me({background:e.imageBgColor}),class:P(["relative w-full h-full after:absolute after:w-full after:h-full after:left-0 after:top-0 after:rounded after:bg-color-bg-7",[~["uploading","fail"].indexOf(d.status)?"":"after:hidden sm:after:group-hover:block",{"mb-7":e.listType==="picture-card"&&e.showName},~["video","audio"].indexOf(d.type)?"after:opacity-0":"after:opacity-50"]])},[d.type==="video"?(m(),T("video",{key:0,ref_for:!0,ref:"video"+(d.uid||_),class:"w-full h-full border rounded object-cover"},[g("source",{src:d.url,type:"video/mp4"},null,8,wc),g("source",{src:d.url,type:"video/ogg"},null,8,Tc),g("source",{src:d.url,type:"video/webm"},null,8,bc)],512)):d.type==="audio"?(m(),T("div",Sc,[g("audio",{ref_for:!0,ref:"audio"+(d.uid||_),onLoadedmetadata:function(L){e.handleLoadedmetadata({e:L,file:d})},onTimeupdate:function(L){e.handleTimeupdate({e:L,file:d})}},[g("source",{src:d.url,type:"video/mp3"},null,8,Ec),g("source",{src:d.url,type:"video/ogg"},null,8,Cc),g("source",{src:d.url,type:"video/wav"},null,8,_c)],40,kc)])):(m(),T("img",{key:2,class:"w-full h-full border rounded",src:d.url,alt:""},null,8,Ic)),g("div",{title:d.name,class:P(["mt-2 overflow-hidden overflow-ellipsis whitespace-nowrap text-color-text-primary text-xs",{hidden:!e.showName}])},F(d.name),11,Uc),g("div",Fc,[~["uploading"].indexOf(d.status)?(m(),T("div",$c,[y(c,{class:"inline-block w-[calc(100%-theme(spacing.10))]",percentage:e.parsePercentage(d.percentage),"show-text":!1,"stroke-width":4,color:"#fff"},null,8,["percentage"]),g("div",Lc,F(~["video","audio"].indexOf(d.type)?e.t("ui.uploadList.uploading"):e.t("ui.uploadList.pictureUploading")),1)])):~["fail"].indexOf(d.status)?(m(),T("div",Dc,[g("span",Ac,[y(i,{class:"w-6 h-6 fill-color-icon-inverse"}),g("div",Pc,F(e.t("ui.uploadList.uploadFailed")),1)]),g("span",Oc,[e.isEdm||e.handleReUpload?(m(),z(u,{key:0,class:"w-6 h-6 mr-2 fill-color-icon-inverse",onClick:function(L){return e.reUpload(d)}},null,8,["onClick"])):U("v-if",!0),!e.displayOnly&&e.listType!=="picture-single"?(m(),z(h,{key:1,class:"w-6 h-6 fill-color-icon-inverse",onClick:G(function(C){return e.remove({file:d})},["stop"])},null,8,["onClick"])):U("v-if",!0)])])):(m(),T("div",Rc,[g("div",{class:P(["hidden",{"sm:group-hover:block":!~["video","audio"].indexOf(d.type)}])},[Y(e.$slots,"operate",{file:d},function(){return[e.handlePreview?(m(),z(w,{key:0,class:"w-6 h-6 mr-2 fill-color-icon-inverse",onClick:function(L){return e.handlePreview(d)}},null,8,["onClick"])):U("v-if",!0),e.handleDownloadFile?(m(),z(f,{key:1,class:"w-6 h-6 mr-2 fill-color-icon-inverse",onClick:function(L){return e.handleDownloadFile(d)}},null,8,["onClick"])):U("v-if",!0),e.displayOnly?U("v-if",!0):(m(),z(h,{key:2,class:"w-6 h-6 fill-color-icon-inverse",onClick:G(function(C){return e.remove({file:d})},["stop"])},null,8,["onClick"]))]})],2),d.type==="video"?(m(),T("div",{key:0,class:P(["inline-block w-8 h-8 text-center rounded-full group-hover:bg-color-bg-7",d.isPlay?"bg-opacity-0":"bg-color-bg-7"])},[Qt(y(v,{class:"w-4 h-4 mt-2 fill-color-icon-inverse",onClick:function(L){return e.play({file:d,index:_,type:"video"})}},null,8,["onClick"]),[[Xt,!d.isPlay]]),Qt(y(S,{class:"w-6 h-6 hidden group-hover:inline-block mt-1 fill-color-icon-inverse",onClick:function(L){return e.pause({file:d,index:_,type:"video"})}},null,8,["onClick"]),[[Xt,d.isPlay]])],2)):U("v-if",!0),d.type==="audio"?(m(),T("div",Mc,[y(b,{class:"w-6 h-6 fill-color-brand",onClick:function(L){return e.play({file:d,index:_,type:"audio"})}},null,8,["onClick"]),g("div",null,F((d.currentSecond||0)+" / "+(d.totalSecond||0)),1)])):U("v-if",!0)]))])],6),e.handlePreview&&~["success"].indexOf(d.status)?(m(),T("div",{key:1,class:"absolute w-full h-full left-0 top-0 sm:hidden",onClick:function(L){return e.handlePreview(d)}},null,8,Nc)):U("v-if",!0)]})])],42,vc)}),128)),(m(!0),T(ge,null,De(e.types,function(d,_){return m(),T("div",{key:_,class:P(["relative",[e.listType==="picture-single"?"w-24 h-24 sm:w-[calc("+e.scale+"*theme(spacing.20))] sm:h-20":"pt-[100%]",{hidden:e.displayOnly&&e.files.length},{hidden:!e.displayOnly&&e.listType==="picture-single"&&e.files.length}]])},[g("div",zc,[Y(e.$slots,"upload",{type:d})])],2)}),128))],2)),y(E,{"show-header":!1,"lock-scroll":e.lockScroll,visible:e.state.showPanel,"onUpdate:visible":t[4]||(t[4]=function(d){return e.state.showPanel=d}),"custom-class":"!min-h-0 py-0"},{default:le(function(){return[Y(e.$slots,"operate",{file:e.state.currentFile||{}},function(){return[g("div",xc,[e.handleDownloadFile?(m(),T("div",{key:0,class:"h-12 flex items-center justify-center border-b border-color-border-separator cursor-pointer",onClick:t[0]||(t[0]=function(){e.state.showPanel=!1,e.handleDownloadFile(e.state.currentFile)})},F(e.t("ui.uploadList.download")),1)):U("v-if",!0),e.handlePreview?(m(),T("div",{key:1,"data-tag":"tiny-upload-list-handle-preview",class:"h-12 flex items-center justify-center border-b border-color-border-separator cursor-pointer",onClick:t[1]||(t[1]=function(){e.state.showPanel=!1,e.handlePreview(e.state.currentFile)})},F(e.t("ui.uploadList.preview")),1)):U("v-if",!0),e.displayOnly?U("v-if",!0):(m(),T("div",{key:2,"data-tag":"tiny-upload-list-panel",class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[2]||(t[2]=G(function(){e.state.showPanel=!1,e.remove({file:e.state.currentFile})},["stop"]))},F(e.t("ui.uploadList.delete")),1)),Bc,g("div",{class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[3]||(t[3]=function(d){return e.state.showPanel=!1})},F(e.t("ui.uploadList.cancel")),1)])]})]}),_:3},8,["lock-scroll","visible"]),y(E,{"show-header":!1,"lock-scroll":e.lockScroll,visible:e.state.showTriggerPanel,"onUpdate:visible":t[8]||(t[8]=function(d){return e.state.showTriggerPanel=d}),"custom-class":"!min-h-0 py-0"},{default:le(function(){return[g("div",jc,[g("div",{class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[5]||(t[5]=function(d){return e.handleTriggerClick(d,e.state.triggerClickType==="video"?3:2)})},F(e.t("ui.uploadList.shoot")),1),g("div",{class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[6]||(t[6]=function(d){return e.handleTriggerClick(d,1)})},F(e.t("ui.uploadList.selectFromAlbum")),1),Hc,g("div",{class:"h-12 flex items-center justify-center cursor-pointer",onClick:t[7]||(t[7]=function(d){return e.state.showTriggerPanel=!1})},F(e.t("ui.uploadList.cancel")),1)])]}),_:1},8,["lock-scroll","visible"]),y(k,{"is-hwh5":e.isHwh5,onTriggerClick:e.handleTriggerClick,modelValue:e.state.showAudioPanel,"onUpdate:modelValue":t[9]||(t[9]=function(d){return e.state.showAudioPanel=d})},null,8,["is-hwh5","onTriggerClick","modelValue"])])}var Wc=Ld(Dd,[["render",Vc]]);function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Rt.apply(null,arguments)}var Zc=function(t){var n,o=typeof process=="object"?(n={})==null?void 0:n.TINY_MODE:null;return(o||t)==="pc"?on:(o||t)==="mobile-first"?Wc:on},Yc=Rt({},Ve,{disabled:{type:Boolean,default:function(){return!1}},display:{type:Boolean,default:function(){return!0}},files:{type:Array,default:function(){return[]}},filesIcon:{type:Array,default:function(){return[]}},handlePreview:Function,isEdm:{type:Boolean,default:function(){return!1}},isFolder:{type:Boolean,default:function(){return!1}},listType:String,openDownloadFile:{type:Boolean,default:function(){return!1}},srcList:{type:Array,default:function(){return[]}},isFolderTitle:{type:Boolean,default:!1},listOption:{type:Object,default:function(){return{showUpdate:!0,showDel:!0}}},maxNameLength:{type:Number,default:20},scale:{type:[Number,String],default:1},showName:{type:Boolean,default:!1},types:Array,displayOnly:{type:Boolean,default:!1},handleDownloadFile:Function,handleReUpload:Function,isDragover:Boolean,selected:Object,triggerClick:{type:Function,default:function(){}},isHwh5:{type:Boolean,default:!1},triggerPlay:{type:Function,default:function(){}},mode:String,lockScroll:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},imageBgColor:String}),ve=Q({name:se+"UploadList",props:Yc,setup:function(t,n){return He({props:t,context:n,template:Zc,extend:{ref:"upload-list-inner-template"}})}}),Kc="3.undefined";ve.install=function(e){e.component(ve.name,ve)};ve.version=Kc;const qc=e=>e.includes("image"),Gc=e=>t=>{const n=t.target.files;!n||e.uploadFiles(n)},Qc=({api:e,props:t})=>n=>{var o;if(n.preventDefault(),!t.pasteUpload)return;const r=(o=n.clipboardData)==null?void 0:o.items;if(!r)return;const l=[];for(let i=0;i<r.length;i++){const a=r[i].getAsFile();a&&l.push(a)}!l.length||e.uploadFiles(l)},Xc=({constants:e,state:t,props:n})=>({formData:o,file:r,type:l})=>{const i=t.uploader.$refs[e.FILE_UPLOAD_INNER_TEMPLATE];if(i.edm.upload){const s=i.edm.upload.params;for(let c in s)o.set(c,s[c]||"")}o.append(e.EDM.FILENAME,r.name),i.edm.isCheckCode===!0?(o.append(e.EDM.ISCHECKCODE,"Y"),o.append(e.EDM.CHECKCODE,r.hash)):o.append(e.EDM.ISCHECKCODE,"N"),n.isFolder&&o.append("filePath",r.path);const a=t.updateId||i.edm.updateId;if(l===e.EDM.SINGLEUPLOAD)o.append(e.EDM.MULTIPART,r,n.isFolder?r.path+r.name:r.name),a&&o.append(e.EDM.DOCID,a);else{const s=a||r.docId;o.append(e.EDM.DOCID,s),o.append(e.EDM.FILESIZE,r.size)}a&&(o.append("updateFile",!0),t.updateId="")},Jc=({state:e,constants:t,Modal:n,props:o,t:r})=>l=>{if(e.updateId===""&&o.limit&&o.fileList.length+l.length>o.limit){const a=e.uploader.$refs[t.FILE_UPLOAD_INNER_TEMPLATE];a&&!a.state.listeners.exceed&&n.message({message:r(t.EDM.NumberExceed,{number:o.limit}),status:"warning"}),o.onExceed&&o.onExceed(l,o.fileList);return}let i=Array.prototype.slice.call(l);o.isFolder?i=i.filter(a=>{const s=a.webkitRelativePath.split("/");return a.path=s.slice(0,s.length-1).join("/")+"/",s.length>=7&&n.message({message:`${a.name}${r(t.EDM.FOLDERKEY)}`,status:"warning"}),s.length<7}):o.multiple||(i=i.slice(0,1)),i.length!==0&&o.onStart&&o.onStart(i,e.updateId)},eu=({api:e,props:t,refs:n})=>o=>{if(n.input.value=null,!t.beforeUpload)return e.post(o);const r=t.beforeUpload(o);r&&r.then?r.then(l=>{const i=Object.prototype.toString.call(l);if(i==="[object File]"||i==="[object Blob]"){i==="[object Blob]"&&(l=new File([l],o.name,{type:o.type}));for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&(l[a]=o[a]);e.post(l)}else e.post(o)},()=>{t.onRemove(null,o)}):r!==!1?e.post(o):t.onRemove(null,o)},tu=({state:e,props:t,constants:n})=>o=>{const{reqs:r}=e,l=function(i){var a;(a=r[i])!=null&&a.abort?r[i].abort(""):e.cancelToken[i]&&e.cancelToken[i](""),delete r[i],delete e.cancelToken[i]};if(o&&o.isLargeFile&&o.cancelToken)o.cancelToken&&o.cancelToken.forEach(i=>i("")),delete o.cancelToken;else if(o){let i=o;o.uid&&(i=o.uid),l(i)}else{const{READY:i,UPLOADING:a,FAIL:s}=n.FILE_STATUS;Object.keys(r).forEach(c=>l(c||"")),t.fileList.forEach(c=>{c.cancelToken&&c.cancelToken.forEach(p=>p("")),[i,a].includes(c.status)&&(c.status=s)})}},nu=({props:e,state:t,rawFile:n,uploaderInner:o,uid:r})=>({headers:Object.assign(e.headers||{},t.headers||{}),withCredentials:e.withCredentials,file:n,data:e.data,filename:e.name,action:o.action||e.action,onSuccess:l=>{e.onSuccess&&e.onSuccess(l,n),delete t.reqs[r]},onProgress:l=>{e.onProgress&&e.onProgress(l,n)},onError:l=>{e.onError&&e.onError(l,n),delete t.reqs[r]}}),ou=({service:e,props:t,options:n,rawFile:o,state:r,uid:l,uploaderInner:i,api:a,constants:s})=>{if(e&&e.network&&t.httpRequest===e.network.request){n.method="post",n.url=n.action,n.onUploadProgress=u=>{t.onProgress&&t.onProgress(u,o)},delete n.action,delete n.onProgress;const c=new FormData,p=e.network.CancelToken.source();n.cancelToken=p.token,r.cancelToken[l]=p.cancel,i.edm.upload&&(!o.isLargeFile&&(n.method="put"),n.data=n.data||{}),n.data&&Object.keys(n.data).forEach(u=>{c.append(u,n.data[u])}),Array.isArray(o)?o.forEach(u=>c.append(u.name,u.raw||u)):r.isEdm?a.getFormData({formData:c,file:o,type:o.isLargeFile?"":s.EDM.SINGLEUPLOAD}):c.append(n.filename,o,o.name),n.data=c}},ru=({state:e,props:t,rawFile:n,uploaderInner:o,uid:r})=>{const l=o.edm,i=l&&l.upload&&l.upload.params||{};return Object.assign({edmAuth:{edmToken:t.edmToken.edmToken,appId:o.hwh5.appId},filePath:n.filePath,progress:1},i,{onProgress:a=>{t.onProgress(a,n)},onSuccess:a=>{t.onSuccess(a,n),delete e.reqs[r]},onError:a=>{t.onError(a,n),delete e.reqs[r]}})},iu=({api:e,constants:t,props:n,state:o,service:r})=>l=>{const{uid:i}=l,a=o.uploader.$refs[t.FILE_UPLOAD_INNER_TEMPLATE];let s;a.state.isHwh5?s=ru({state:o,props:n,rawFile:l,uploaderInner:a,uid:i}):(s=nu({props:n,state:o,rawFile:l,uploaderInner:a,uid:i}),ou({service:r,props:n,options:s,rawFile:l,state:o,uid:i,uploaderInner:a,api:e,constants:t}));const c=p=>{if(n.httpRequest){const u=n.httpRequest(p);o.reqs[i]=u,u&&u.then&&u.then(p.onSuccess,p.onError)}};l.isLargeFile?r.common.getChunkMergeUrl().then(p=>{s.url=p,c(s)}):c(s)},lu=({props:e,refs:t,state:n})=>(o,r)=>{if(e.disabled||e.displayOnly||n.isStopPropagation)return;const{uploader:l,uploadInner:i}=n,{encryptConfig:a={}}=l,s=i.$parent,c=()=>{typeof e.handleTriggerClick=="function"&&e.handleTriggerClick(o,r),!e.isHwh5&&(t.input.value=null,n.isStopPropagation=!0,t.input.click(),n.isStopPropagation=!1)};if(typeof l.beforeAddFile=="function"){o.preventDefault();let p;const u=l.beforeAddFile(()=>{!p&&c()});p=u&&typeof u.then=="function",p?u.then(()=>c()).catch(()=>null):u&&c()}else a&&a.enabled&&s?(s.state.encryptDialogConfig.show=!0,s.state.encryptDialogConfig.selectFileMethod=()=>{c()}):c()},au=e=>t=>{t.target===t.currentTarget&&(t.keyCode===Gt.Enter||t.keyCode===Gt.Space)&&e.handleClick(t,"")},su=({props:e,state:t})=>n=>{!e.disabled&&t.updateInput&&(t.updateInput.value="",t.updateId=n.docId,t.updateInput.click())},du=({state:e,props:t,api:n})=>()=>{let o=document.createElement("input");o.type="file",o.name=t.name,o.accept=t.accept||"",o.onchange=n.handleChange,e.updateInput=Object.freeze(o)},cu=e=>()=>{e.updateInput=null},io=["state","isImage","handleChange","handlePaste","uploadFiles","upload","abort","post","handleClick","handleKeydown","handleUpdate"],lo=(e,{computed:t,inject:n,reactive:o,onMounted:r,onBeforeUnmount:l},{refs:i,service:a,t:s,useBreakpoint:c},{Modal:p})=>{const u={},h=n("uploader"),w=h.$constants,{current:f}=c(),v=o({currentBreakpoint:f,mouseover:!1,reqs:{},uploader:h,accecpt:"",uploadInner:t(()=>v.uploader.$refs[w.FILE_UPLOAD_INNER_TEMPLATE]),isEdm:t(()=>v.uploadInner.state.isEdm),openEdmDownload:t(()=>v.uploadInner.edm.download),headers:t(()=>{if(v.isEdm)return{[w.EDM.EDMTOKEN]:e.edmToken.edmToken||"",[w.EDM.TRACEID]:e.edmToken.traceId||""}}),formData:{},cancelToken:{},updateId:"",updateInput:null,isStopPropagation:!1});return Object.assign(u,{state:v,isImage:qc,abort:tu({state:v,props:e,constants:w}),getFormData:Xc({state:v,constants:w,props:e}),handleClick:lu({props:e,refs:i,state:v}),onBeforeDestroy:cu(v),handleUpdate:su({state:v,props:e}),uploadFiles:Jc({constants:w,Modal:p,props:e,state:v,t:s}),post:iu({api:u,constants:w,props:e,state:v,service:a}),handleChange:Gc(u),handlePaste:Qc({api:u,props:e}),handleKeydown:au(u),upload:eu({api:u,props:e,refs:i}),mounted:du({state:v,props:e,api:u})}),r(u.mounted),l(u.onBeforeDestroy),u},uu=({props:e,state:t})=>()=>!e.disabled&&(t.dragover=!0),pu=({emit:e,props:t,state:n})=>async o=>{if(t.disabled||!n.uploader)return;const r=n.uploader.accept;let l=o.dataTransfer.files;const i=o.dataTransfer.items&&o.dataTransfer.items[0].webkitGetAsEntry().isDirectory;if(n.uploadFiles=[],n.dragover=!1,i){const s=o.dataTransfer.items[0].webkitGetAsEntry();await ao(s,n),l=n.uploadFiles}if(!r){e("file",l);return}const a=[];[].slice.call(l).filter(s=>{const{type:c,name:p}=s,u=p.includes(".")?`.${p.split(".").pop()}`:"",h=c.replace(/\/.*$/,"");let w=r.split(",").map(f=>f.trim()).filter(f=>f).some(f=>/\..+$/.test(f)?u===f:/\/\*$/.test(f)?h===f.replace(/\/\*$/,""):!!/^[^/]+\/[^/]+$/.test(f));return!w&&a.push(s),w}),a.length&&n.uploader.$emit("drop-error",a),e("file",l)},hu=({state:e,constants:t})=>()=>{e.uploader.$refs[t.FILE_UPLOAD_INNER_TEMPLATE].$emit("drag-over",e.dragover)};async function ao(e,t){const n=e.createReader(),o=await new Promise(r=>{n.readEntries(l=>{r(l)})});for(let r=0;r<o.length;r++){const l=o[r];l.isFile?await new Promise(i=>{l.file(a=>{t.uploadFiles.push(a),i(void 0)})}):l.isDirectory&&await ao(l,t)}}const so=["state","onDragOver","onDrop"],co=(e,{inject:t,reactive:n,ref:o,watch:r},{emit:l})=>{const i=n({dragover:!1,uploadFiles:[],uploader:t("uploader")||o({default:""})}),a=i.uploader.$constants||{},s={state:i,onDragOver:uu({props:e,state:i}),onDrop:pu({emit:l,props:e,state:i}),watchDragover:hu({state:i,constants:a})};return r(()=>i.dragover,()=>s.watchDragover()),s};function fu(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=mu(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mu(e,t){if(e){if(typeof e=="string")return an(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}function an(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var gu=function(t,n){for(var o=t.__vccOpts||t,r=fu(n),l;!(l=r()).done;){var i=l.value,a=i[0],s=i[1];o[a]=s}return o},vu=Q({name:se+"UploadDragger",emits:["file"],props:[].concat(ue,["disabled"]),setup:function(t,n){return pe({props:t,context:n,renderless:co,api:so})}});function yu(e,t,n,o,r,l){return m(),T("div",{class:P(["tiny-upload-dragger",{"is-dragover":e.state.dragover}]),onDrop:t[0]||(t[0]=G(function(){return e.onDrop&&e.onDrop.apply(e,arguments)},["prevent"])),onDragover:t[1]||(t[1]=G(function(){return e.onDragOver&&e.onDragOver.apply(e,arguments)},["prevent"])),onDragleave:t[2]||(t[2]=G(function(i){return e.state.dragover=!1},["prevent"]))},[Y(e.$slots,"default")],34)}var sn=gu(vu,[["render",yu]]);function wu(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=Tu(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tu(e,t){if(e){if(typeof e=="string")return dn(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(e,t):void 0}}function dn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var bu=function(t,n){for(var o=t.__vccOpts||t,r=wu(n),l;!(l=r()).done;){var i=l.value,a=i[0],s=i[1];o[a]=s}return o},Su=Q({name:se+"UploadDragger",emits:["file"],props:[].concat(ue,["disabled","customClass"]),setup:function(t,n){return pe({props:t,context:n,renderless:co,api:so})}});function ku(e,t,n,o,r,l){return m(),T("div",{"data-tag":"tiny-upload-dragger",class:P(e.m("min-w-[theme(spacing.72)] min-h-[theme(spacing.40)] border border-dashed rounded",e.state.dragover?"border-color-brand":"border-color-none-hover",e.customClass)),onDrop:t[0]||(t[0]=G(function(){return e.onDrop&&e.onDrop.apply(e,arguments)},["prevent"])),onDragover:t[1]||(t[1]=G(function(){return e.onDragOver&&e.onDragOver.apply(e,arguments)},["prevent"])),onDragleave:t[2]||(t[2]=G(function(i){return e.state.dragover=!1},["prevent"]))},[Y(e.$slots,"default")],34)}var Eu=bu(Su,[["render",ku]]);function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Mt.apply(null,arguments)}var Cu=function(t){var n,o=typeof process=="object"?(n={})==null?void 0:n.TINY_MODE:null;return(o||t)==="pc"?sn:(o||t)==="mobile-first"?Eu:sn},_u=Mt({},Ve,{disabled:Boolean,customClass:[String,Object,Array]}),Oe=Q({name:se+"UploadDragger",props:_u,setup:function(t,n){return He({props:t,context:n,template:Cu})}}),Iu="3.undefined";Oe.install=function(e){e.component(Oe.name,Oe)};Oe.version=Iu;function Uu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!st(e)}var cn=Q({inheritAttrs:!1,name:se+"Upload",props:[].concat(ue,["accept","action","autoUpload","beforeUpload","pasteUpload","data","disabled","drag","edmToken","fileList","headers","httpRequest","isFolder","limit","listType","multiple","name","onError","onExceed","onPreview","onProgress","onRemove","onStart","onSuccess","type","withCredentials","isHidden","handleTriggerClick"]),setup:function(t,n){return pe({props:t,context:n,renderless:lo,api:io,h:B,extendOptions:{Modal:Ie}})},render:function(){var t=this.accept,n=this.disabled,o=this.drag,r=this.handleChange,l=this.handleClick,i=this.handlePaste,a=this.handleKeydown,s=this.isFolder,c=this.listType,p=this.multiple,u=this.name,h=this.uploadFiles,w=this.fileList,f=this.limit,v=this.isHidden,S=this.type,b=this.slots.default&&this.slots.default()||[],E=this.slots.operate&&this.slots.operate(),k=this.slots.tip&&this.slots.tip(),d=v&&w.length>=f;return!d&&y("div",{class:["tiny-upload","tiny-upload--"+c,n?"is-disabled":""]},[y("div",{class:"tiny-upload-btn",onClick:function(C){return l(C,S)},onPaste:i,onKeydown:a,tabindex:"0"},[o?y(Oe,{disabled:n,onFile:h},Uu(b)?b:{default:function(){return[b]}}):b]),E,k,y("input",{class:"tiny-upload__input",type:"file",webkitdirectory:s,ref:"input",name:u,onChange:r,multiple:s?!0:p,accept:t},null)])}});function un(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!st(e)}var Fu=Q({inheritAttrs:!1,name:se+"Upload",components:{TinyTooltip:at,TinyIconHelpCircle:En()},props:[].concat(ue,["accept","action","autoUpload","beforeUpload","data","disabled","drag","edmToken","fileList","headers","httpRequest","isFolder","limit","listType","multiple","name","onError","onExceed","onPreview","onProgress","onRemove","onStart","onSuccess","type","withCredentials","scale","sourceType","displayOnly","customClass","handleTriggerClick","mode","showTitle","isHwh5","tipMessage","promptTip","showFileList"]),setup:function(t,n){return pe({props:t,context:n,renderless:lo,api:io,h:B,extendOptions:{Modal:Ie}})},render:function(){var t,n=this.accept,o=this.disabled,r=this.handleChange,l=this.handleClick,i=this.handleKeydown,a=this.isFolder,s=this.multiple,c=this.name,p=this.uploadFiles,u=this.listType,h=this.displayOnly,w=this.customClass,f=this.sourceType,v=this.mode,S=this.showTitle,b=this.state,E=this.tipMessage,k=this.promptTip,d=this.showFileList,_=this.slots.default&&this.slots.default(),C=this.slots.tip&&this.slots.tip(),L=this.slots.operate&&this.slots.operate(),q=v==="bubble",K=S,V={bubbling:!0},A=function(){return y("div",{"data-tag":"tiny-upload-drag-single",class:"h-full",onClick:function(te){return l(te,f)},onKeydown:i,tabindex:"0"},[u==="drag-single"?y(Oe,{customClass:w,disabled:o,onFile:p},un(_)?_:{default:function(){return[_]}}):_])};return y("div",{"data-tag":"tiny-upload",class:[!h&&u==="text"?"flex mt-4 relative mb-2 "+(q?"sm:my-0":K?"sm:my-3":"sm:mt-0"):"h-full",d?"sm:mb-3":"sm:mb-0"]},[b.currentBreakpoint==="default"&&C&&y("div",{class:"flex items-center sm:hidden inline-block text-sm"},[C]),b.currentBreakpoint==="default"&&A(),b.currentBreakpoint!=="default"&&!h&&(k&&E?y("div",{class:"hidden sm:inline-flex sm:items-center"},[A(),y($("tiny-tooltip"),{effect:"light",content:E,placement:"right","popper-options":V},{default:function(){return[y($("tiny-icon-help-circle"),{"custom-class":"ml-2 cursor-pointer fill-color-icon-tertiary"},null)]}})]):u==="text"?y("div",{class:"hidden sm:inline-flex sm:items-center"},[A(),y("div",{title:typeof E=="string"?E:"",class:"hidden sm:block text-xs leading-4 overflow-hidden whitespace-nowrap text-ellipsis text-color-text-placeholder ml-2 cursor-pointer"},[E])]):y($("tiny-tooltip"),{effect:"light",content:E,placement:"top","popper-options":V},un(t=A())?t:{default:function(){return[t]}})),L,y("input",{class:"hidden",type:"file",webkitdirectory:a,ref:"input",name:c,onChange:r,multiple:a?!0:s,accept:n},null)])}});function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Nt.apply(null,arguments)}var $u=function(t){var n,o=typeof process=="object"?(n={})==null?void 0:n.TINY_MODE:null;return(o||t)==="pc"?cn:(o||t)==="mobile-first"?Fu:cn},Lu=Nt({},Ve,{accept:String,action:{type:String,default:""},autoUpload:Boolean,beforeUpload:Function,pasteUpload:Boolean,data:Object,disabled:Boolean,drag:Boolean,edmToken:{type:Object,default:function(){return{}}},fileList:{type:Array,default:function(){return[]}},headers:Object,httpRequest:{type:Function,default:vn},isFolder:{type:Boolean,default:!1},limit:Number,listType:String,multiple:Boolean,name:{type:String,default:"file"},onError:Function,onExceed:Function,onPreview:{type:Function,default:function(){}},onProgress:Function,onRemove:{type:Function,default:function(){}},onStart:Function,onSuccess:Function,type:String,withCredentials:Boolean,isHidden:{type:Boolean,default:!1},scale:{type:[Number,String],default:1},sourceType:{type:String,default:"picture",validator:function(t){return t.split("/").every(function(n){return["picture","video","audio"].includes(n)})}},displayOnly:{type:Boolean,default:!1},customClass:[String,Object,Array],handleTriggerClick:{type:Function,default:function(){}},mode:String,showTitle:Boolean,isHwh5:{type:Boolean,default:!1},tipMessage:{type:String,default:""},promptTip:{type:Boolean,default:!1},showFileList:{type:Boolean,default:!0}}),ye=Q({name:se+"Upload",props:Lu,setup:function(t,n){return He({props:t,context:n,template:$u,extend:{ref:"upload-inner-template"}})}}),Du="3.undefined";ye.install=function(e){e.component(ye.name,ye)};ye.version=Du;var uo={exports:{}};/*! streamsaver. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */(function(e){((t,n)=>{e.exports=n()})("streamSaver",()=>{const t=typeof window=="object"?window:this;t.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let n=null,o=!1;const r=f=>{try{f()}catch{}},l=t.WebStreamsPolyfill||{},i=t.isSecureContext;let a=/constructor/i.test(t.HTMLElement)||!!t.safari||!!t.WebKitPoint;const s=i||"MozAppearance"in document.documentElement.style?"iframe":"navigate",c={createWriteStream:w,WritableStream:t.WritableStream||l.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function p(f){if(!f)throw new Error("meh");const v=document.createElement("iframe");return v.hidden=!0,v.src=f,v.loaded=!1,v.name="iframe",v.isIframe=!0,v.postMessage=(...S)=>v.contentWindow.postMessage(...S),v.addEventListener("load",()=>{v.loaded=!0},{once:!0}),document.body.appendChild(v),v}function u(f){const v="width=200,height=100",S=document.createDocumentFragment(),b={frame:t.open(f,"popup",v),loaded:!1,isIframe:!1,isPopup:!0,remove(){b.frame.close()},addEventListener(...k){S.addEventListener(...k)},dispatchEvent(...k){S.dispatchEvent(...k)},removeEventListener(...k){S.removeEventListener(...k)},postMessage(...k){b.frame.postMessage(...k)}},E=k=>{k.source===b.frame&&(b.loaded=!0,t.removeEventListener("message",E),b.dispatchEvent(new Event("load")))};return t.addEventListener("message",E),b}try{new Response(new ReadableStream),i&&!("serviceWorker"in navigator)&&(a=!0)}catch{a=!0}r(()=>{const{readable:f}=new TransformStream,v=new MessageChannel;v.port1.postMessage(f,[f]),v.port1.close(),v.port2.close(),o=!0,Object.defineProperty(c,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})});function h(){n||(n=i?p(c.mitm):u(c.mitm))}function w(f,v,S){let b={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},E=0,k=null,d=null,_=null;if(Number.isFinite(v)?([S,v]=[v,S],console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),b.size=S,b.writableStrategy=v):v&&v.highWaterMark?(console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),b.size=S,b.writableStrategy=v):b=v||{},!a){h(),d=new MessageChannel,f=encodeURIComponent(f.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const L={transferringReadable:o,pathname:b.pathname||Math.random().toString().slice(-6)+"/"+f,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+f}};b.size&&(L.headers["Content-Length"]=b.size);const q=[L,"*",[d.port2]];if(o){const K=s==="iframe"?void 0:{transform(A,ee){if(!(A instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");E+=A.length,ee.enqueue(A),k&&(location.href=k,k=null)},flush(){k&&(location.href=k)}};_=new c.TransformStream(K,b.writableStrategy,b.readableStrategy);const V=_.readable;d.port1.postMessage({readableStream:V},[V])}d.port1.onmessage=K=>{K.data.download?s==="navigate"?(n.remove(),n=null,E?location.href=K.data.download:k=K.data.download):(n.isPopup&&(n.remove(),n=null,s==="iframe"&&p(c.mitm)),p(K.data.download)):K.data.abort&&(C=[],d.port1.postMessage("abort"),d.port1.onmessage=null,d.port1.close(),d.port2.close(),d=null)},n.loaded?n.postMessage(...q):n.addEventListener("load",()=>{n.postMessage(...q)},{once:!0})}let C=[];return!a&&_&&_.writable||new c.WritableStream({write(L){if(!(L instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");if(a){C.push(L);return}d.port1.postMessage(L),E+=L.length,k&&(location.href=k,k=null)},close(){if(a){const L=new Blob(C,{type:"application/octet-stream; charset=utf-8"}),q=document.createElement("a");q.href=URL.createObjectURL(L),q.download=f,q.click()}else d.port1.postMessage("end")},abort(){C=[],d.port1.postMessage("abort"),d.port1.onmessage=null,d.port1.close(),d.port2.close(),d=null}},b.writableStrategy)}return c})})(uo);var po=uo.exports;function zt(){return zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},zt.apply(null,arguments)}function pn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!st(e)}var Au=Dn(),Pu=Ht(),Ou=Vt(),hn=ct(),Ru=Wt(),Mu=Ln(),Nu=En(),fn=Q({inheritAttrs:!1,props:[].concat(ue,["edm","action","headers","data","multiple","name","drag","dragger","withCredentials","showFileList","accept","type","beforeUpload","beforeRemove","fileList","autoUpload","listType","httpRequest","disabled","limit","openDownloadFile","mergeService","fileSize","thumbOption","isFolderTitle","listOption","maxNameLength","isHidden","sourceType","cacheToken","pasteUpload","reUploadable","reUploadTip","encryptConfig","title","showTitle","displayOnly","compact","promptTip"]),emits:["change","hash-progress","progress","success","error","remove","download"],setup:function(t,n){return pe({props:t,context:n,renderless:no,api:eo,extendOptions:{Modal:Ie,Streamsaver:po}})},components:{TinyProgress:dt,UploadList:ve,Upload:ye,TinyDialogBox:Cn,Popover:Co,TinyButton:_e,TinyInput:_n,TinySwitch:In,TinyTooltip:at},render:function(){var t=this,n,o=this.state.listeners,r=o.exceed,l=r===void 0?function(){}:r,i=o.preview,a=i===void 0?void 0:i,s=o["download-all"],c=o["download-file"],p=o["re-upload"],u=this.state,h=u.uploadFiles,w=u.isEdm,f=u.dialogConfigObj,v=u.isSuccess,S=u.uploadDisabled,b=u.url,E=u.accept,k=u.httpRequest,d=u.edmToken,_=u.iframeUrl,C=this.downloadFile,L=this.handleRemove,q=this.handleReUpload,K=this.handleReUploadTotal,V=this.updateFile,A=this.slots,ee=this.edm,W=ee===void 0?{}:ee,te=this.t,we=this.$attrs,ut=this.a,pt=this.encryptConfig,Ue=this.encryptDialogConfirm,Re=this.handleTriggerClick,ht=this.handleClickFileList,ft=this.handleFileClick,he=this.displayOnly,fe=this.listType,mt=this.compact,We=this.promptTip,Ze=fe==="picture-card",Te=fe==="saas",be=this.thumbOption,Ye=be.showDel,Ke=be.showDownload,gt=be.showTooltip,vt=be.showUpdate,yt=be.icon,wt=this.thumbOption.downloadFile||C,Fe=W.upload?W.upload.isFolder:!1,Tt=this.slots.notice&&this.slots.notice(),bt=this.title||te("ui.fileUpload.attachment"),St=function(D,M){return y("div",{class:"tiny-upload-title"},[y("span",{class:[M?"title-show":"title-hide",he?"display-only":""]},[D])])},Me={bubbling:!0},ce=function(D,M){return y("div",{class:"trigger-btn"},[y($("tiny-button"),{disabled:M,onClick:Re},{default:function(){return[y(Mu,null,null),y("span",null,[D("ui.fileUpload.uploadFile")])]}})])},kt=function(D,M,J){return D&&Te?y("div",{class:"operate-content"},[y($("tiny-button"),{onClick:function(){return D(M)}},{default:function(){return[y("div",{class:"button-wrap"},[y(hn,null,null),y("span",null,[J("ui.fileUpload.downloadAll")])])]}})]):null},Et=function(D){return We?A.tip&&A.tip()||D&&We&&y($("tiny-tooltip"),{effect:"light",content:A.tip&&A.tip()||D,placement:"right","popper-options":Me},{default:function(){return[y("div",{class:"prompt-tip"},[y(Nu,null,null)])]}}):y("div",{class:"tip-wrap"},[y("div",{title:D,class:"tip-content"},[A.tip&&A.tip()||D])])},Ct=function(D){return[Ke&&y("span",{class:"thumb-icon",title:te("ui.fileUpload.downloadFile"),onClick:function(){return wt(D)}},[y(hn,{class:"download-icon"},null)]),w&&!Fe&&vt&&y("span",{class:"thumb-icon",title:te("ui.fileUpload.updateFile"),onClick:function(){return V(D)}},[y(Ru,{class:"refres-icon"},null)]),Ye&&y("span",{class:"thumb-icon",title:te("ui.fileUpload.deleteFile"),onClick:function(){return L(D)}},[y(Ou,{class:"close-icon"},null)])]},qe=function(D){var M=A.file&&A.file({file:D});return M||[y(Pu,{class:"thumb-success-icon"},null),y("span",{class:["thumb-item-name",Ye?"":"hide-close-icon",Ke?"":"hide-download-icon"]},[D.name]),Ct(D)]},$e=function(){return y("span",null,[h.length])};if(this.showFileList)if(fe==="thumb")n=h.length===0?"":B("div",{class:"tiny-upload--thumb__wrap"},[B("Popover",{props:{trigger:"hover",popperClass:this.thumbOption.popperClass,width:this.thumbOption.width},scopedSlots:{reference:function(){return B("div",{class:"tiny-upload--thumb__head"},[B(yt||Au,{class:"thumb-icon"}),$e()])},default:function(){return B("div",{class:"tiny-upload--thumb__body"},[B("div",{class:"tiny-upload--thumb__list"},[h.map(function(D){return B("Popover",{props:{content:D.name,trigger:gt?"hover":"manual",placement:"top"},scopedSlots:{reference:function(){return B("div",{class:"thumb-item",on:{click:function(){ft(D)}}},[qe(D)])}}})})])])}}})]);else{var _t={props:{disabled:S,reUploadable:this.reUploadable,reUploadTip:this.reUploadTip,isFolder:Fe,isEdm:w,edm:W,displayOnly:he,listType:fe,files:h,isFolderTitle:this.isFolderTitle,listOption:this.listOption,maxNameLength:this.maxNameLength,handlePreview:a,handleDownloadFile:c,handleReUpload:p,openDownloadFile:this.openDownloadFile,compact:mt},scopedSlots:{default:function(D){if(A.file)return A.file({file:D.file})},tip:function(){return Se},"assist-content":function(D){if(A["assist-content"])return A["assist-content"]({file:D.file})},operate:function(D){if(A.operate)return A.operate({file:D.file})}},on:{remove:L,reUpload:q,reUploadTotal:K,update:V,start:this.handleStart,"click-file-list":ht,"update:visible":function(D){return t.state.visible=D}},ref:"upload-list-inner"};n=B(ve,_t)}var Ne={props:{type:this.type,drag:this.drag,action:b,multiple:this.multiple,withCredentials:this.withCredentials,headers:this.headers,name:this.name,data:this.data,edm:this.edm,accept:w?E:this.accept,fileList:h,autoUpload:this.autoUpload,listType:fe,disabled:S,displayOnly:he,limit:this.limit,onExceed:l,onStart:this.handleStart,onProgress:this.handleProgress,onSuccess:this.handleSuccess,onError:this.handleError,onPreview:a,httpRequest:k,isFolder:Fe,edmToken:d,pasteUpload:this.pasteUpload,isHidden:this.isHidden},ref:"upload-inner"},It=this.getTipMessage({accept:w?E:this.accept,fileSize:this.fileSize,limit:this.limit}),Se=!he&&Te?Et(It):null;Se&&Se.data&&(Se.data.slot="tip");var Le=he?null:kt(s,h,te);Le&&Le.data&&(Le.data.slot="operate");var Ge=A.default&&A.default(),ne=A.trigger?A.trigger():Ge,Qe=function(){var D=!ne&&Te&&!he?ce(te,t.disabled):ne,M={default:function(){return D},tip:function(){return Se},operate:function(){return Le}};return M},ze=B(ye,Ne,Qe()),xe=null,Be=null;w&&v&&(Ne.props.accept=E,Ne.props.edmToken=d),this.edm.preview&&(xe=B("tiny-dialog-box",zt({minHeight:"600px",width:"60%"},f,{scopedSlots:{default:function(){return y("iframe",{id:"_iframe",style:"display: block;width: 100%;height: 500px;display: inline-block;",allowfullscreen:!0,allowtransparency:"true",frameborder:"0",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",src:_},null)}}}))),pt.enabled&&(Be=B("tiny-dialog-box",{class:"encrypt-config-dialog",style:"",props:{lockScroll:!0,visible:this.state.encryptDialogConfig.show,dragable:!0,title:this.t("ui.fileUpload.encryptDialogTitle"),width:"380px",height:"auto"},on:{"update:visible":function(D){return t.state.encryptDialogConfig.show=D}},scopedSlots:{default:function(){return y("div",{class:"encrypt-config-dialog-body"},[y("div",{class:"encrypt-item"},[t.t("ui.fileUpload.addWatermark")]),y("div",null,[y($("tiny-input"),{modelValue:t.encryptConfig.watermark,"onUpdate:modelValue":function(M){return t.encryptConfig.watermark=M}},null)]),y("p",null,[Ae("\xA0")]),y("div",{class:"encrypt-item"},[t.t("ui.fileUpload.encrypted")]),y("div",null,[y($("tiny-switch"),{modelValue:t.encryptConfig.encrypt,"onUpdate:modelValue":function(M){return t.encryptConfig.encrypt=M}},null)])])},footer:function(){var D,M;return[y(_e,{onClick:function(){return t.state.encryptDialogConfig.show=!1}},pn(D=t.t("ui.base.cancel"))?D:{default:function(){return[D]}}),[y(_e,{type:"primary",onClick:function(){return Ue()}},pn(M=t.t("ui.popupload.uploadButtonText"))?M:{default:function(){return[M]}})]]}}}));var Xe=ut(we,["^on[A-Z]"]);return y("div",Fn({class:"tiny-file-upload"},Xe),[Te?St(bt,this.showTitle):"",Tt,Ze?n:"",A.trigger?[ze,Ge]:ze,!Te&&A.tip&&A.tip(),Ze?"":n,xe,Be])}});function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},xt.apply(null,arguments)}function mn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!st(e)}var zu=Q({inheritAttrs:!1,emits:["change","hash-progress","error","progress","success","remove","download","trigger-click","click-file-list"],props:[].concat(ue,["edm","action","headers","data","multiple","name","drag","dragger","withCredentials","showFileList","accept","type","beforeUpload","beforeRemove","fileList","autoUpload","listType","httpRequest","disabled","limit","openDownloadFile","mergeService","fileSize","thumbOption","isFolderTitle","listOption","maxNameLength","scale","showName","sourceType","showTitle","title","displayOnly","customClass","hwh5","mode","cacheToken","lockScroll","compact","encryptConfig","imageBgColor","promptTip"]),setup:function(t,n){return pe({props:t,context:n,renderless:no,api:eo,extendOptions:{Modal:Ie,Streamsaver:po}})},components:{TinyProgress:dt,UploadList:ve,Upload:ye,TinyDialogBox:Cn,TinyTooltip:at,IconAttachment:Dn(),IconSuccessful:Ht(),IconCloseCircle:Vt(),IconDownload:ct(),IconFileCloudupload:Wt(),TinyButton:_e,IconPlus:Ln(),IconPlusCircle:vr(),IconPicture:ur(),IconMic:Rn(),IconStartCircle:Br(),IconHelpQuery:er(),TinyModal:Ie},render:function(){var t=this,n=this.state.listeners,o=n.exceed,r=o===void 0?function(){}:o,l=n.preview,i=l===void 0?void 0:l,a=n["download-file"],s=n["download-all"],c=n["re-upload"],p=n["trigger-click"],u=n.play,h=this.state,w=h.uploadFiles,f=h.isEdm,v=h.dialogConfigObj,S=h.isSuccess,b=h.uploadDisabled,E=h.url,k=h.accept,d=h.httpRequest,_=h.edmToken,C=h.iframeUrl,L=h.isDragover,q=h.selected,K=h.types,V=h.isHwh5,A=this.handleRemove,ee=this.updateFile,W=this.slots,te=this.edm,we=te===void 0?{}:te,ut=this.$attrs,pt=this.a,Ue=this.t,Re=this.showTitle,ht=this.isFolderTitle,ft=this.listOption,he=this.maxNameLength,fe=this.scale,mt=this.showName,We=this.openDownloadFile,Ze=this.type,Te=this.drag,be=this.multiple,Ye=this.withCredentials,Ke=this.headers,gt=this.name,vt=this.data,yt=this.autoUpload,wt=this.limit,Fe=this.handleStart,Tt=this.handleProgress,bt=this.handleSuccess,St=this.handleError,Me=this.fileSize,ce=this.displayOnly,kt=this.customClass,Et=this.handleClickFileList,Ct=this.handleTriggerClick,qe=this.showFileList,$e=this.mode,_t=this.lockScroll,Ne=this.compact,It=this.encryptConfig,Se=this.encryptDialogConfirm,Le=this.imageBgColor,Ge=this.promptTip,ne=this.listType==="saas"?"text":this.listType,Qe=this.title||Ue("ui.fileUpload.attachment"),ze=ne==="drag-single",xe=ne==="text",Be=we.upload?we.upload.isFolder:!1,Xe=function(I){var O=I.listType,N=I.title,Z=I.showTitle,oe=I.isInside,re=oe===void 0?!1:oe,X=I.displayOnly,ie=X===void 0?!1:X,ke=I.mode,Ee;if(re)Ee=y("span",{class:Z?"inline-block mr-1 text-sm text-color-text-primary font-bold":"hidden"},[N]);else{var Ce="text-sm text-color-text-primary font-bold leading-5.5 ";O!=="text"?Ce+="hidden":!ie&&Z?Ce+="hidden sm:block":!ie||!Z?Ce+="hidden":Ce+="mt-4 mb-2",Ee=ke!=="bubble"?y("div",{class:Ce},[y("span",{class:"mr-1"},[N]),ie&&D({isEdm:f,fileSize:Me})]):null}return Ee},x=function(I){var O=I.listType,N=I.title,Z=I.showTitle,oe=I.isEdm,re=I.accept,X=I.fileSize,ie=I.slots,ke,Ee=t.getTipMessage({accept:oe?re:t.accept,fileSize:X,limit:t.limit}),Ce={bubbling:!0};return O==="text"?ke=y("div",{class:"inline-block w-full sm:pl-4 text-color-none"},[y("div",{class:"block sm:hidden"},[Xe({listType:O,title:N,showTitle:Z,isInside:!0}),y($("tiny-tooltip"),{effect:"dark",content:Ee,placement:"top","popper-options":Ce},{default:function(){return[y($("icon-help-query"),{class:"-mt-0.5 fill-color-none-hover"},null)]}})])]):O==="drag-single"?ke=y("div",{title:Ee,class:"leading-5 text-color-text-primary overflow-hidden text-ellipsis whitespace-nowrap"},[ie.tip&&ie.tip()||Ee]):ke=ie.tip?y("div",{class:"mb-4 text-color-none"},[ie.tip()]):null,ke},D=function(I){var O=I.isEdm,N=I.fileSize,Z={bubbling:!0};return y($("tiny-tooltip"),{class:"inline-block sm:hidden",effect:"dark",content:t.getTipMessage({accept:O?k:t.accept,fileSize:N,limit:t.limit}),placement:"top","popper-options":Z},{default:function(){return[y($("icon-help-query"),{class:"-mt-0.5  fill-color-none-hover"},null)]}})},M=function(I){var O=I.listType,N=I.t,Z=I.type,oe=I.disabled,re={picture:y("div",null,[y($("icon-picture"),{class:"w-6 h-6 fill-color-icon-secondary"},null),y("div",{class:"mt-1 sm:mt-2 text-color-text-secondary text-xs"},[N("ui.upload.addPicture")])]),audio:y("div",null,[y($("icon-mic"),{class:"w-6 h-6 fill-color-icon-secondary"},null),y("div",{class:"mt-1 sm:mt-2 text-color-text-secondary text-xs"},[N("ui.upload.addAudio")])]),video:y("div",null,[y($("icon-start-circle"),{class:"w-6 h-6 fill-color-icon-secondary"},null),y("div",{class:"mt-1 sm:mt-2 text-color-text-secondary text-xs"},[N("ui.upload.addVideo")])])},X;if(O==="text")X=y("div",{class:"inline-block"},[y($("tiny-button"),{disabled:oe,class:"hidden sm:block"},{default:function(){return[y("div",{class:"flex items-center"},[y($("icon-plus"),null,null),y("span",{class:"ml-2"},[N("ui.fileUpload.uploadFile")])])]}}),y($("icon-plus-circle"),{"custom-class":"sm:hidden w-5 h-5 absolute top-0.5 right-5"},null)]);else if(O==="drag-single")X=null;else{var ie="relative h-full border border-dashed border-color-border rounded bg-color-bg-2 align-top hover:cursor-pointer";O==="picture-single"&&w.length&&(ie+=" hidden"),X=y("div",{class:ie},[y("div",{class:"absolute w-full top-1/2 left-0 -translate-y-1/2 z-[1] text-center"},[re[Z||"picture"]])])}return X},J=function(I){var O=I.listType,N=I.downloadAll,Z=I.uploadFiles,oe=I.t,re;return O==="text"&&(re=N?y("div",{class:"hidden sm:inline-block align-middle"},[y($("tiny-button"),{onClick:function(){return N(Z)}},{default:function(){return[y("div",{class:"flex items-center"},[y($("icon-download"),null,null),y("span",{class:"ml-2"},[oe("ui.fileUpload.downloadAll")])])]}})]):null),re},Ut=function(I){var O=I.displayOnly,N=I.slots,Z=I.listType,oe=I.t,re=I.type,X=I.disabled;return!O||O&&["picture-card","picture-single"].includes(re)?N.trigger?N.trigger():M({listType:Z,t:oe,type:re,disabled:X}):null},je=ce?null:x({listType:ne,title:Qe,showTitle:Re,isEdm:f,accept:k,fileSize:Me,slots:W});je&&je.data&&(je.data.slot="tip");var Je=ce?null:J({listType:ne,downloadAll:s,uploadFiles:w,t:Ue});Je&&Je.data&&(Je.data.slot="operate");var ho=function(I){var O=Ut({displayOnly:ce,slots:W,listType:ne,t:Ue,type:I,disabled:b}),N={default:function(){return O},tip:function(){return!ze&&je},operate:function(){return Je}};return N},fo=W.tip&&W.tip()||this.getTipMessage({accept:f?k:this.accept,fileSize:Me,limit:this.limit}),et={props:{type:Ze,drag:Te,action:E,multiple:be,withCredentials:Ye,headers:Ke,name:gt,data:vt,edm:we,accept:f?k:this.accept,fileList:w,autoUpload:yt,listType:ne,disabled:b,limit:wt,onExceed:r,onStart:Fe,onProgress:Tt,onSuccess:bt,onError:St,onPreview:i,httpRequest:d,isFolder:Be,edmToken:_,scale:fe,displayOnly:ce,customClass:kt,handleTriggerClick:Ct,mode:$e,showTitle:Re,isHwh5:V,tipMessage:fo,promptTip:Ge,showFileList:qe},ref:"upload-inner"},Ft=function(I){return et.props.sourceType=I,B(ye,et,ho(I))},mo={props:{disabled:b,isFolder:Be,isEdm:f,edm:we,displayOnly:ce,listType:ne,files:w,isFolderTitle:ht,listOption:ft,maxNameLength:he,scale:fe,showName:mt,types:K,isDragover:L,handlePreview:i,handleDownloadFile:a,handleReUpload:c,openDownloadFile:We,selected:q,triggerClick:p,isHwh5:V,triggerPlay:u,mode:$e,lockScroll:_t,compact:Ne,imageBgColor:Le},scopedSlots:{default:function(I){if(W.file)return W.file({file:I.file})},upload:function(I){var O=I.type;return xe?null:Ft(O)},tip:function(){return je},"assist-content":function(I){if(W["assist-content"])return W["assist-content"]({file:I.file})},operate:function(I){if(W.operate)return W.operate({file:I.file})}},on:{remove:A,update:ee,start:Fe,"click-file-list":Et,"update:visible":function(I){return t.state.visible=I}},ref:"upload-list-inner"},tt;qe&&(tt=B(ve,mo),$e==="bubble"&&(tt=B("tiny-modal",{props:{customClass:"sm:w-[theme(spacing.112)]",title:Ue("ui.fileUpload.uploadList"),position:"bottom-right",mask:!1,showClose:!1,showFooter:!1,modelValue:this.state.visible},on:{"update:modelValue":function(I){return t.state.visible=I}}},[tt])));var Zt=null,Yt=null,Kt=this.slots.notice&&this.slots.notice(),go=this.state.current!=="default"?Kt:"",vo=this.state.current==="default"?Kt:"";f&&S&&(et.props.accept=k,et.props.edmToken=_),we.preview&&(Zt=B("tiny-dialog-box",xt({minHeight:"600px",width:"60%"},v,{scopedSlots:{default:function(){return y("iframe",{id:"_iframe",style:"display: block;width: 100%;height: 500px;display: inline-block;",allowfullscreen:!0,allowtransparency:"true",frameborder:"0",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",src:C},null)}}}))),It.enabled&&(Yt=B("tiny-dialog-box",{style:"",props:{dataTag:"encrypt-config-dialog",lockScroll:!0,visible:this.state.encryptDialogConfig.show,dragable:!0,title:this.t("ui.fileUpload.encryptDialogTitle"),width:"380px",height:"auto","modal-append-to-body":!1},on:{"update:visible":function(I){return t.state.encryptDialogConfig.show=I}},scopedSlots:{default:function(){return y("div",{"data-tag":"encrypt-config-dialog-body"},[y("div",null,[t.t("ui.fileUpload.addWatermark")]),y("div",null,[y(_n,{modelValue:t.encryptConfig.watermark,"onUpdate:modelValue":function(O){return t.encryptConfig.watermark=O}},null)]),y("p",null,[Ae("\xA0")]),y("div",null,[t.t("ui.fileUpload.encrypted")]),y("div",null,[y(In,{modelValue:t.encryptConfig.encrypt,"onUpdate:modelValue":function(O){return t.encryptConfig.encrypt=O}},null)])])},footer:function(){var I,O;return[y(_e,{onClick:function(){return t.state.encryptDialogConfig.show=!1}},mn(I=t.t("ui.base.cancel"))?I:{default:function(){return[I]}}),[y(_e,{type:"primary",customClass:"ml-2",onClick:function(){return Se()}},mn(O=t.t("ui.popupload.uploadButtonText"))?O:{default:function(){return[O]}})]]}}}));var yo=pt(ut,["^on[A-Z]"]);return y("div",Fn(yo,{"data-tag":"tiny-file-upload",class:ze?"relative inline-block":""}),[Xe({listType:ne,title:Qe,showTitle:Re,displayOnly:ce,mode:$e}),go,xe&&!ce?W.trigger?[Ft()]:Ft():null,vo,tt,Zt,Yt])}});function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Bt.apply(null,arguments)}var xu=function(t){var n,o=typeof process=="object"?(n={})==null?void 0:n.TINY_MODE:null;return(o||t)==="pc"?fn:(o||t)==="mobile-first"?zu:fn},gn={FILE_UPLOAD_INNER_TEMPLATE:"file-upload-inner-template",UPLOAD_INNER:"upload-inner",UPLOAD_INNER_TEMPLATE:"upload-inner-template",UPLOAD_LIST_INNER:"upload-list-inner",UPLOAD_LIST_INNER_TEMPLATE:"upload-list-inner-template",ONLY_SUPPORT:"ui.fileUpload.onlySupport",COMMA:"ui.base.comma",FILE_NOT_LESS_THAN:"ui.fileUpload.fileNotLessThan",FILE_NOT_MORE_THAN:"ui.fileUpload.fileNotMoreThan",FILE_SIZE_RANGE:"ui.fileUpload.fileSizeRange",NUMBER_LIMIT:"ui.fileUpload.numberLimit",FILE_STATUS:{READY:"ready",SUCESS:"success",UPLOADING:"uploading",FAIL:"fail",DOWNLOADING:"downloading"},LIST_TYPE:{TEXT:"text",PICTURE_CARD:"picture-card",PICTURE:"picture",THUMB:"thumb",PICTURE_SINGLE:"picture-single",DRAG_SINGLE:"drag-single",SAAS:"saas"},EDM:{CHUNKINIT:"chunkInit",FILESIZE:"fileSize",CHUNKS:"chunks",FILENAME:"fileName",ISCHECKCODE:"isCheckCode",CHECKCODE:"checkCode",MULTIPART:"multipartFile",DOCID:"docId",CHUNK:"chunk",SINGLEUPLOAD:"uploadFile",LOWERNAME:"filename",FOLDERKEY:"ui.fileUpload.folder",FORMAT:"docFormat=wm&",WATER:"usageScenes=water&wmType=wm&",SOURCE:"usageScenes=source&",URLCONTS:"&type=doc&pageNum=1&docVersion=",EDMTOKEN:"EDM-Authorization",TRACEID:"x-trace-id",TEXT:"edm-text",JSLIB:"./jslib/",I18NKEY:"ui.fileUpload.token",LARGEFILEKEY:"ui.fileUpload.largefile",EXCEED:"ui.fileUpload.exceed",SIZE:"ui.fileUpload.fileSize",SIZE_17G:17*1024*1024,SIZE_2G:2*1024*1024,SIZE_64M:64*1024,SIZE_32M:32*1024,SIZE_20M:20*1024,SIZE_16M:16*1024,SIZE_8M:8*1024,SIZE_4M:4*1024,SIZE_2M:2*1024,SIZE_0M:0*1024,FILEEMPTY:"ui.fileUpload.empty",KIASCANTIP:"ui.fileUpload.kiaScanTip",FILENAMEEXCEEDS:"ui.fileUpload.fileNameExceeds",THEFILENAME:"ui.fileUpload.fileName",CALCHASH:"ui.fileUpload.calcHash",KIASTATUS:12079,NumberExceed:"ui.fileUpload.numberExceed",notSupport:"ui.fileUpload.notSupport",NOT_SUPPORT_NO_SUFFIX:"ui.fileUpload.notSupportNoSuffix",STATUS_SPECIAL_CHARACTERS:11005,NOT_SUPPORT_SPECIAL_CHARACTERS:"ui.fileUpload.notSupportSpecialCharacters",DOC_PREVIEW:"ui.fileUpload.docPreview"},IMAGE_TYPE:"image/*",FILE_TYPE:{EXCEL:"xls/xlsx",FILE:"file",PDF:"pdf",PICTURE:"png/jpg/jpeg/gif/svg/webp/bmp/tif/pjp/apng/xbm/jxl/svgz/ico/tiff/jfif/pjpeg/avif",PPT:"ppt/pptx",TEXT:"txt",WORD:"doc/docx",ZIP:"zip/rar/arj/z/jar/lzh",VIDEO:"mp4/m4v/3gp/mpg/flv/f4v/swf/avi/wmv/rmvb/mov/mts/m2t/ogg/webm/mkv",AUDIO:"mp3/aac/ape/flac/wav/wma/amr/mid/pcm"},SOURCE_TYPE:{SOURCE_VIDEO:"video",SOURCE_AUDIO:"audio",SOURCE_PICTURE:"picture"},MODE:{BUBBLE:"bubble"}},Bu=Bt({},Ve,{_constants:{type:Object,default:function(){return gn}},accept:String,action:String,autoUpload:{type:Boolean,default:function(){return!0}},beforeRemove:Function,beforeUpload:Function,data:Object,disabled:Boolean,display:{type:Boolean,default:function(){return!0}},drag:Boolean,dragger:Boolean,edm:{type:Object,default:function(){return{}}},fileIconList:{type:Array,default:function(){return[]}},fileList:{type:Array,default:function(){return[]}},fileSize:{type:[Number,Array],validator:function(t){return Array.isArray(t)?t[0]<t[1]:typeof t=="number"}},fileTitle:{type:String,default:function(){return"\u9644\u4EF6"}},headerShow:{type:Boolean,default:function(){return!0}},headers:{type:Object,default:function(){return{}}},httpRequest:Function,limit:Number,listType:{type:String,default:function(){return"text"},validator:function(t){return!!gn.LIST_TYPE[t.toUpperCase().replace("-","_")]}},mergeService:{type:Boolean,default:function(){return!1}},multiple:Boolean,name:{type:String,default:function(){return"file"}},openDownloadFile:{type:Boolean,default:function(){return!1}},showFileList:{type:Boolean,default:function(){return!0}},size:String,successStatistics:{type:Boolean,default:function(){return!0}},thumbOption:{type:Object,default:function(){return{popperClass:"",width:270,showDownload:!1,downloadFile:Function,showDel:!1,icon:"icon-attachment",showTooltip:!1}}},type:{type:String,default:function(){return"select"}},uploadIcon:{type:Boolean,default:function(){return!0}},withCredentials:{type:Boolean,default:function(){return!0}},isFolderTitle:{type:Boolean,default:!1},listOption:{type:Object,default:function(){return{showUpdate:!0,showDel:!0}}},maxNameLength:{type:Number,default:20},scale:{type:[Number,String],default:1},showName:{type:Boolean,default:!1},sourceType:{type:String,default:"picture",validator:function(t){return t.split("/").every(function(n){return["picture","video","audio"].includes(n)})}},showTitle:{type:Boolean,default:!0},title:{type:String,default:""},displayOnly:{type:Boolean,default:!1},customClass:[String,Object,Array],hwh5:Object,mode:{type:String,default:"",validator:function(t){return["","bubble"].includes(t)}},cacheToken:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},beforeAddFile:Function,encryptConfig:{type:Object,default:function(){return{enabled:!1,encrypt:!1,watermark:""}}},promptTip:{type:Boolean,default:!1},isHidden:{type:Boolean,default:!1},pasteUpload:{type:Boolean,default:!1},reUploadable:Boolean,reUploadTip:Function,imageBgColor:String}),nt=Q({name:se+"FileUpload",props:Bu,setup:function(t,n){return He({props:t,context:n,template:xu,extend:{ref:"file-upload-inner-template"}})}}),ju="3.undefined";nt.install=function(e){e.component(nt.name,nt)};nt.version=ju;export{nt as F};
