(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42125,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},71695,68981,705,32402,37194,15890,68395,62931,31157,e=>{"use strict";var t=e.i(56860);function r(e){return t.default.post("/user/login",e)}function n(){return t.default.post("/user/logout")}function a(){return t.default.get("/user/userInfo")}function i(e){return t.default.post("/connections",e)}function s(e){return t.default.post("/disconnection",e)}function o(e){return t.default.post("/subscriptions/topics",e)}function l(){return t.default.get("/metric/topic")}function c(e){return t.default.post("/system/user/list",e||{})}function u(e){return t.default.post("/system/user/add",e)}function d(e){return t.default.post("/system/user/delete",e)}function p(e){return t.default.post("/system/user/update",e)}function f(){return t.default.get("/api/bridge/list")}function g(e){return t.default.post("/api/bridge/add",e)}function m(e){return t.default.post("/api/bridge/update",e)}function h(e){return t.default.post("/api/bridge/remove",e)}function x(e){return t.default.post("/api/bridge/start",e)}function y(e){return t.default.post("/api/bridge/stop",e)}function b(e){return t.default.post("/api/bridge/test",e)}function v(){return t.default.post("/api/system/settings/get")}function k(e){return t.default.post("/api/system/settings/save",e)}function j(){return t.default.post("/api/system/version")}function w(){return t.default.post("/api/acl/get")}function N(e){return t.default.post("/api/acl/save",e)}function C(e){return t.default.post("/api/acl/secret",e)}function L(){return t.default.get("/api/content-data")}function _(e){return t.default.get("/api/popular/list",{params:e})}function P(e){return t.default.get(`/api/dashboard/data-overview/${e}`)}function S(e){return t.default.get("/api/dashboard/visit",{params:e})}function T(){return t.default.get("/api/dashboard/period-visits")}function M(e){return t.default.get("/api/dashboard/visits-detail",{params:e})}e.s(["getUserInfo",()=>a,"login",()=>r,"logout",()=>n],68981),e.i(84521),e.s(["disconnectConnection",()=>s,"getConnections",()=>i],705),e.s(["getTopicList",()=>o,"getTopicMetrics",()=>l],32402),e.i(43040),e.s(["addUser",()=>u,"deleteUser",()=>d,"getUserList",()=>c,"updateUser",()=>p],37194),e.s(["addBridge",()=>g,"getBridgeList",()=>f,"removeBridge",()=>h,"startBridge",()=>x,"stopBridge",()=>y,"testBridge",()=>b,"updateBridge",()=>m],15890),e.s(["getSystemSettings",()=>v,"getVersionInfo",()=>j,"saveSystemSettings",()=>k],68395),e.s(["generateAclSecret",()=>C,"getAclConfig",()=>w,"saveAclConfig",()=>N],62931),e.i(93573),e.s(["getContentData",()=>L,"getDataOverview",()=>P,"getPeriodVisits",()=>T,"getPopularList",()=>_,"getVisitData",()=>S,"getVisitsDetail",()=>M],31157),e.i(52352),e.s([],71695)},43040,e=>{"use strict";var t=e.i(56860);function r(e){return t.default.post("/plugin/list",e||{})}function n(){return t.default.get("/plugin/current")}function a(e){return t.default.get(`/plugin/${e}/config`)}function i(e){return t.default.get(`/plugin/${e}/config?format=json`)}function s(e,r,n){return t.default.post(`/plugin/${e}/config/save`,{config:r,restart:n})}function o(e){return t.default.post(`/plugin/enable?id=${e}`)}function l(e){return t.default.post(`/plugin/disable?id=${e}`)}function c(e){return t.default.post(`/plugin/uninstall?id=${e}`)}function u(){return t.default.get("/plugin/market")}function d(e,t,r){let n=new EventSource(`/api/plugin/download?url=${encodeURIComponent(e)}`);return n.onmessage=t,r&&(n.onerror=r),{close:()=>n.close()}}function p(e){let r=new FormData;return r.append("plugin",e),t.default.post("/plugin/upload",r,{headers:{"Content-Type":"multipart/form-data"}})}function f(e){return t.default.get(`/plugin/${e}/schema`)}e.s(["disablePlugin",()=>l,"enablePlugin",()=>o,"getCurrentPlugin",()=>n,"getMarketPlugins",()=>u,"getPluginConfig",()=>a,"getPluginConfigAsJson",()=>i,"getPluginList",()=>r,"getPluginSchema",()=>f,"installPlugin",()=>d,"uninstallPlugin",()=>c,"updatePluginConfig",()=>s,"uploadPlugin",()=>p])},93573,52352,e=>{"use strict";var t=e.i(56860),r=e.i(28237),n=e.i(57171);let a="SUXJUU52RK6DTPZOKOOOWG0BLYEK1BHT7YERNSK6",i=n.default.create({baseURL:"https://api.moark.com/v1",timeout:3e4,headers:{"Content-Type":"application/json"}}),s=null;function o(e){s=e}async function l(e,t){let r={};return t&&(r["X-Dev-Mode"]="true"),(await i.get("/app",{params:{appid:e},headers:r})).data}async function c(e,t){return(await i.post("/token",{app_id:t?.app_id,expired_in:t?.expired_in||3600},{headers:{Authorization:`Bearer ${e}`}})).data}async function u(e){return(await i.post("/app/auth/vcode",{appid:e.appid,mobile:e.mobile,email:e.email,channel_type:e.channel_type},{headers:{Authorization:`Bearer ${a}`}})).data}async function d(e){return(await i.post("/app/auth/token",{appid:e.appid,channel_type:e.channel_type||"sms",mobile:e.mobile,email:e.email,code:e.code},{headers:{Authorization:`Bearer ${a}`}})).data.access_token}async function p(e){return(await i.get("/token/packageBalance",{headers:{Authorization:`Bearer ${e}`}})).data}async function f(e,t){return(await i.post("/app/pay",{plan_ident:t.plan_ident,quantity:t.quantity||1,amount:t.amount,type:t.type},{headers:{Authorization:`Bearer ${e}`}})).data}async function g(e,t){return(await i.get("/app/pay",{params:{ident:t},headers:{Authorization:`Bearer ${e}`}})).data}async function m(e,t){return(await i.get("/app/pays",{params:{page:t?.page||1,size:t?.size||10,status:t?.status},headers:{Authorization:`Bearer ${e}`}})).data}async function h(e){return(await i.get("/app/user",{headers:{Authorization:`Bearer ${e}`}})).data}i.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(sessionStorage.removeItem("moark_access_token"),s&&s()),Promise.reject(e)));let x=r.default.env.NEXT_PUBLIC_LICENSE_SERVER_URL||"/api/license-server",y=n.default.create({baseURL:x,timeout:3e4,headers:{"Content-Type":"application/json"}});async function b(e){return(await y.post("/order/create",{app_id:e.appId,plan_ident:e.planIdent,period_quantity:e.periodQuantity,applicant:e.applicant,contact_phone:e.contactPhone,moark_token:e.moarkToken})).data}async function v(e,t){return(await y.get(`/order/${e}/status`,{headers:{"X-Moark-Token":t}})).data}async function k(e,t){return(await y.get(`/order/${e}/download`,{headers:{"X-Moark-Token":t},responseType:"blob"})).data}function j(e){return e?new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}):""}async function w(){var e,r;let n=await t.default.post("/license/get"),a=n.trialDuration>0;return{type:a?"试用版":"企业版",valid:!(e=n.expireTime)||Date.now()<e,isTrial:a,trialMinutes:a?n.trialDuration:0,trialDurationText:function(e){if(e<=0)return"";let t=Math.floor(e/1440),r=Math.floor(e%1440/60);return t>0?`${t}天`:r>0?`${r}小时`:`${e%60}分钟`}(n.trialDuration),startDate:j(n.startTime),expireDate:j(n.expireTime),applicant:n.applicant||"",sn:n.sn||"",maxConnections:function(e){if(!e||"无限制"===e)return 1/0;let t=e.match(/(\d+)/);return t?parseInt(t[1],10):0}(n.limit),features:(r=n.available)?r.split(",").filter(e=>e.trim()):[]}}function N(e){return t.default.post("/license/import",e,{headers:{"Content-Type":"multipart/form-data"}})}async function C(e){return(await c(e)).token}async function L(e){return await l(e,!1)}async function _(e){return await b(e)}async function P(e,t){return await v(e,t)}async function S(e,t){return await k(e,t)}e.s(["PaymentStatus",0,{PENDING:"pending",PAID:"paid",EXPIRED:"expired",FAILED:"failed"},"createLicenseOrder",()=>b,"createMoarkPayment",()=>f,"createTemporaryToken",()=>c,"downloadLicenseFile",()=>k,"getAppInfo",()=>l,"getMoarkUserInfo",()=>h,"getUserAccessToken",()=>d,"queryLicenseOrderStatus",()=>v,"queryMoarkOrderStatus",()=>g,"queryMoarkPaymentList",()=>m,"queryPackageBalance",()=>p,"sendVerifyCode",()=>u,"setMoarkUnauthorizedCallback",()=>o],52352),e.s(["applyStepAuthenticate",()=>C,"applyStepCreateOrder",()=>_,"applyStepDownloadLicense",()=>S,"applyStepGetAppInfo",()=>L,"applyStepQueryStatus",()=>P,"getLicenseInfo",()=>w,"importLicense",()=>N],93573)},80421,e=>{"use strict";let t=(0,e.i(20790).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],80421)},88805,e=>{"use strict";var t=e.i(46398),r=e.i(50596),n=e.i(16730),a=e.i(49627);let i=(0,r.cva)("h-5 gap-1 rounded-4xl border border-transparent px-2 py-0.5 text-xs font-medium transition-all has-data-[icon=inline-end]:pr-1.5 has-data-[icon=inline-start]:pl-1.5 [&>svg]:size-3! inline-flex items-center justify-center w-fit whitespace-nowrap shrink-0 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive overflow-hidden group/badge",{variants:{variant:{default:"bg-primary text-primary-foreground [a]:hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground [a]:hover:bg-secondary/80",destructive:"bg-destructive/10 [a]:hover:bg-destructive/20 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 text-destructive dark:bg-destructive/20",outline:"border-border text-foreground [a]:hover:bg-muted [a]:hover:text-muted-foreground",ghost:"hover:bg-muted hover:text-muted-foreground dark:hover:bg-muted/50",link:"text-primary underline-offset-4 hover:underline"}},defaultVariants:{variant:"default"}});function s({className:e,variant:r="default",asChild:s=!1,...o}){let l=s?n.Slot.Root:"span";return(0,t.jsx)(l,{"data-slot":"badge","data-variant":r,className:(0,a.cn)(i({variant:r}),e),...o})}e.s(["Badge",()=>s])},84521,e=>{"use strict";var t=e.i(56860);function r(){return t.default.post("/cluster/nodes")}function n(){return t.default.get("/cluster/metricCodes")}function a(e){return t.default.post("/cluster/metrics",e)}function i(){return t.default.post("/brokers")}function s(e){return e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(0)} KB`:e<0x40000000?`${(e/1024/1024).toFixed(0)} MB`:`${(e/1024/1024/1024).toFixed(2)} GB`}e.s(["formatMemory",()=>s,"getBrokerList",()=>i,"getClusterMetrics",()=>a,"getClusterNodes",()=>r,"getMetricCodes",()=>n,"metricNameMap",0,{topic_count:"Topic 数量",subscribe_relation:"订阅关系",bytes_sent:"发送字节数",bytes_received:"接收字节数",packets_publish_rate:"发布成功率",connection_count:"连接数",message_received:"接收消息数",message_sent:"发送消息数"}])},88374,e=>{"use strict";var t=e.i(46398),r=e.i(49627);function n({className:e,size:n="default",...a}){return(0,t.jsx)("div",{"data-slot":"card","data-size":n,className:(0,r.cn)("bg-card text-card-foreground gap-6 overflow-hidden rounded-xl border border-border/50 py-6 text-sm","shadow-sm transition-all duration-300","hover:shadow-md hover:border-border/80","has-[>img:first-child]:pt-0 data-[size=sm]:gap-4 data-[size=sm]:py-4","*:[img:first-child]:rounded-t-xl *:[img:last-child]:rounded-b-xl","group/card flex flex-col",e),...a})}function a({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("gap-1 rounded-t-xl px-6 group-data-[size=sm]/card:px-4 [.border-b]:pb-6 group-data-[size=sm]/card:[.border-b]:pb-4 group/card-header @container/card-header grid auto-rows-min items-start has-data-[slot=card-action]:grid-cols-[1fr_auto] has-data-[slot=card-description]:grid-rows-[auto_auto]",e),...n})}function i({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("text-base leading-normal font-medium group-data-[size=sm]/card:text-sm",e),...n})}function s({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...n})}function o({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6 group-data-[size=sm]/card:px-4",e),...n})}function l({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("rounded-b-xl px-6 group-data-[size=sm]/card:px-4 [.border-t]:pt-6 group-data-[size=sm]/card:[.border-t]:pt-4 flex items-center",e),...n})}e.s(["Card",()=>n,"CardContent",()=>o,"CardDescription",()=>s,"CardFooter",()=>l,"CardHeader",()=>a,"CardTitle",()=>i])},94578,e=>{"use strict";let t=(0,e.i(20790).default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);e.s(["Hash",()=>t],94578)},27470,e=>{"use strict";let t=(0,e.i(20790).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],27470)},26759,e=>{"use strict";let t=(0,e.i(20790).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],26759)},45300,e=>{"use strict";var t=e.i(46398),r=e.i(49627);let n={sm:{container:"h-8 w-8",icon:"h-4 w-4",text:"text-sm"},md:{container:"h-10 w-10",icon:"h-5 w-5",text:"text-base"},lg:{container:"h-12 w-12",icon:"h-6 w-6",text:"text-lg"},xl:{container:"h-16 w-16",icon:"h-8 w-8",text:"text-2xl"}};function a({className:e,size:a="lg",variant:i="default"}){let s=n[a];return(0,t.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center gap-4",e),children:[(0,t.jsx)("div",{className:(0,r.cn)("relative flex items-center justify-center rounded-2xl","default"===i?"bg-gradient-to-br from-primary to-primary/80":"bg-white/10 backdrop-blur","shadow-xl shadow-primary/30",s.container,"animate-pulse"),children:(0,t.jsxs)("svg",{viewBox:"0 0 48 48",fill:"none",className:(0,r.cn)(s.icon,"default"===i?"text-primary-foreground":"text-white"),xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("g",{className:"origin-center animate-[spin_8s_linear_infinite]",children:(0,t.jsx)("circle",{cx:"24",cy:"24",r:"20",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"6 4",opacity:"0.5"})}),(0,t.jsx)("g",{className:"origin-center animate-[spin_6s_linear_infinite_reverse]",children:(0,t.jsx)("circle",{cx:"24",cy:"24",r:"14",stroke:"currentColor",strokeWidth:"2",opacity:"0.7"})}),(0,t.jsx)("circle",{cx:"24",cy:"24",r:"7",fill:"currentColor",className:"animate-pulse"}),(0,t.jsx)("line",{x1:"24",y1:"4",x2:"24",y2:"10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"24",y1:"38",x2:"24",y2:"44",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"4",y1:"24",x2:"10",y2:"24",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"38",y1:"24",x2:"44",y2:"24",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),(0,t.jsx)("circle",{cx:"24",cy:"4",r:"3",fill:"currentColor"}),(0,t.jsx)("circle",{cx:"24",cy:"44",r:"3",fill:"currentColor"}),(0,t.jsx)("circle",{cx:"4",cy:"24",r:"3",fill:"currentColor"}),(0,t.jsx)("circle",{cx:"44",cy:"24",r:"3",fill:"currentColor"})]})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("span",{className:(0,r.cn)("block font-bold tracking-tight text-xl","default"===i?"text-foreground":"text-white"),children:"Smart MQTT"}),(0,t.jsx)("span",{className:(0,r.cn)("text-sm tracking-wide","default"===i?"text-muted-foreground":"text-white/70"),children:"企业级 MQTT Broker 管理平台"})]})]})}e.s(["LogoAnimated",()=>a])},49670,e=>{"use strict";var t=e.i(93573),r=e.i(52352);e.s(["PaymentStatus",()=>r.PaymentStatus,"applyStepAuthenticate",()=>t.applyStepAuthenticate,"applyStepCreateOrder",()=>t.applyStepCreateOrder,"applyStepDownloadLicense",()=>t.applyStepDownloadLicense,"applyStepGetAppInfo",()=>t.applyStepGetAppInfo,"applyStepQueryStatus",()=>t.applyStepQueryStatus,"createLicenseOrder",()=>r.createLicenseOrder,"createMoarkPayment",()=>r.createMoarkPayment,"createTemporaryToken",()=>r.createTemporaryToken,"downloadLicenseFile",()=>r.downloadLicenseFile,"getAppInfo",()=>r.getAppInfo,"getLicenseInfo",()=>t.getLicenseInfo,"getMoarkUserInfo",()=>r.getMoarkUserInfo,"getUserAccessToken",()=>r.getUserAccessToken,"importLicense",()=>t.importLicense,"queryLicenseOrderStatus",()=>r.queryLicenseOrderStatus,"queryMoarkOrderStatus",()=>r.queryMoarkOrderStatus,"queryMoarkPaymentList",()=>r.queryMoarkPaymentList,"queryPackageBalance",()=>r.queryPackageBalance,"sendVerifyCode",()=>r.sendVerifyCode])},40512,e=>{"use strict";let t=(0,e.i(20790).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],40512)},90289,e=>{"use strict";let t=(0,e.i(20790).default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);e.s(["Key",()=>t],90289)},15120,e=>{"use strict";let t=(0,e.i(20790).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],15120)},26538,e=>{"use strict";let t=(0,e.i(20790).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],26538)},45466,e=>{"use strict";let t=(0,e.i(20790).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],45466)},14458,e=>{"use strict";let t=(0,e.i(20790).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],14458)},17144,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={assign:function(){return l},searchParamsToUrlQuery:function(){return i},urlQueryToSearchParams:function(){return o}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});function i(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function s(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,s(e));else t.set(r,s(n));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,n]of r.entries())e.append(t,n)}return e}},83646,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={formatUrl:function(){return o},formatWithValidation:function(){return c},urlObjectKeys:function(){return l}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let i=e.r(15246)._(e.r(17144)),s=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,n=e.protocol||"",a=e.pathname||"",o=e.hash||"",l=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),l&&"object"==typeof l&&(l=String(i.urlQueryToSearchParams(l)));let u=e.search||l&&`?${l}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||s.test(n))&&!1!==c?(c="//"+(c||""),a&&"/"!==a[0]&&(a="/"+a)):c||(c=""),o&&"#"!==o[0]&&(o="#"+o),u&&"?"!==u[0]&&(u="?"+u),a=a.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${n}${c}${a}${u}${o}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return o(e)}},96365,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return a}});let n=e.r(55372);function a(e,t){let r=(0,n.useRef)(null),a=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=i(e,n)),t&&(a.current=i(t,n))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},52586,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return x},MiddlewareNotFoundError:function(){return k},MissingStaticPage:function(){return v},NormalizeError:function(){return y},PageNotFoundError:function(){return b},SP:function(){return m},ST:function(){return h},WEB_VITALS:function(){return i},execOnce:function(){return s},getDisplayName:function(){return d},getLocationOrigin:function(){return c},getURL:function(){return u},isAbsoluteUrl:function(){return l},isResSent:function(){return p},loadGetInitialProps:function(){return g},normalizeRepeatedSlashes:function(){return f},stringifyError:function(){return j}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let i=["CLS","FCP","FID","INP","LCP","TTFB"];function s(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>o.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=c();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function p(e){return e.finished||e.headersSent}function f(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function g(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await g(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&p(r))return n;if(!n)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let m="u">typeof performance,h=m&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class x extends Error{}class y extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class k extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function j(e){return JSON.stringify({message:e.message,stack:e.stack})}},60105,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return i}});let n=e.r(52586),a=e.r(35484);function i(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,a.hasBasePath)(r.pathname)}catch(e){return!1}}},7973,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},2605,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return x},useLinkStatus:function(){return b}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let i=e.r(15246),s=e.r(46398),o=i._(e.r(55372)),l=e.r(83646),c=e.r(74855),u=e.r(96365),d=e.r(52586),p=e.r(82123);e.r(42125);let f=e.r(96531),g=e.r(60105),m=e.r(59846);function h(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function x(t){var r;let n,a,i,[l,x]=(0,o.useOptimistic)(f.IDLE_LINK_STATUS),b=(0,o.useRef)(null),{href:v,as:k,children:j,prefetch:w=null,passHref:N,replace:C,shallow:L,scroll:_,onClick:P,onMouseEnter:S,onTouchStart:T,legacyBehavior:M=!1,onNavigate:O,ref:A,unstable_dynamicOnHover:B,...E}=t;n=j,M&&("string"==typeof n||"number"==typeof n)&&(n=(0,s.jsx)("a",{children:n}));let U=o.default.useContext(c.AppRouterContext),$=!1!==w,z=!1!==w?null===(r=w)||"auto"===r?m.FetchStrategy.PPR:m.FetchStrategy.Full:m.FetchStrategy.PPR,{href:D,as:I}=o.default.useMemo(()=>{let e=h(v);return{href:e,as:k?h(k):e}},[v,k]);if(M){if(n?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=o.default.Children.only(n)}let R=M?a&&"object"==typeof a&&a.ref:A,F=o.default.useCallback(e=>(null!==U&&(b.current=(0,f.mountLinkInstance)(e,D,U,z,$,x)),()=>{b.current&&((0,f.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,f.unmountPrefetchableInstance)(e)}),[$,D,U,z,x]),q={ref:(0,u.useMergedRef)(F,R),onClick(t){M||"function"!=typeof P||P(t),M&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!U||t.defaultPrevented||function(t,r,n,a,i,s,l){if("u">typeof window){let c,{nodeName:u}=t.currentTarget;if("A"===u.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,g.isLocalURL)(r)){i&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(99048);o.default.startTransition(()=>{d(n||r,i?"replace":"push",s??!0,a.current)})}}(t,D,I,b,C,_,O)},onMouseEnter(e){M||"function"!=typeof S||S(e),M&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),U&&$&&(0,f.onNavigationIntent)(e.currentTarget,!0===B)},onTouchStart:function(e){M||"function"!=typeof T||T(e),M&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),U&&$&&(0,f.onNavigationIntent)(e.currentTarget,!0===B)}};return(0,d.isAbsoluteUrl)(I)?q.href=I:M&&!N&&("a"!==a.type||"href"in a.props)||(q.href=(0,p.addBasePath)(I)),i=M?o.default.cloneElement(a,q):(0,s.jsx)("a",{...E,...q,children:n}),(0,s.jsx)(y.Provider,{value:l,children:i})}e.r(7973);let y=(0,o.createContext)(f.IDLE_LINK_STATUS),b=()=>(0,o.useContext)(y);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},94273,e=>{"use strict";let t=(0,e.i(20790).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["ArrowUpRight",()=>t],94273)},318,e=>{"use strict";var t=e.i(46398),r=e.i(55372),n=e.i(2605),a=e.i(38433),i=e.i(88374),s=e.i(88805),o=e.i(15120),l=e.i(27470);let c=(0,e.i(20790).default)("file-check",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);var u=e.i(80421),d=e.i(16378),p=e.i(90289),f=e.i(14458),g=e.i(26759),m=e.i(94578),h=e.i(45466),x=e.i(26538),y=e.i(40512),b=e.i(94273),v=e.i(45300),k=e.i(10369);e.i(71695);var j=e.i(49670),w=e.i(49627);function N({license:e}){if(!e)return null;let r=!e.valid;return(0,t.jsx)("div",{className:(0,w.cn)("rounded-lg border p-4 mb-6",r?"bg-red-50/50 border-red-200 dark:bg-red-900/10 dark:border-red-800":e.isTrial?"bg-amber-50/50 border-amber-200 dark:bg-amber-900/10 dark:border-amber-800":"bg-blue-50/50 border-blue-200 dark:bg-blue-900/10 dark:border-blue-800"),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:(0,w.cn)("p-2 rounded-lg shrink-0",r?"bg-red-100 text-red-600":e.isTrial?"bg-amber-100 text-amber-600":"bg-blue-100 text-blue-600"),children:r?(0,t.jsx)(x.XCircle,{className:"h-5 w-5"}):e.isTrial?(0,t.jsx)(f.Clock,{className:"h-5 w-5"}):(0,t.jsx)(y.Shield,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:r?"License 已过期":e.isTrial?`试用版 License（剩余 ${e.trialDurationText}）`:"License 信息"}),e.isTrial&&(0,t.jsx)(s.Badge,{variant:"secondary",className:"text-xs bg-amber-100 text-amber-700",children:"试用版"}),!e.valid&&(0,t.jsx)(s.Badge,{variant:"destructive",className:"text-xs",children:"已过期"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs mt-3",children:[e.applicant&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[(0,t.jsx)(g.User,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"truncate",children:e.applicant})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[(0,t.jsx)(f.Clock,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:["到期: ",e.expireDate]})]}),e.sn&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground col-span-2",children:[(0,t.jsx)(m.Hash,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"font-mono",children:e.sn})]})]})]})]})})}function C(){let{license:e,loading:s}=function(){let[e,t]=(0,r.useState)(null),[n,a]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(0,j.getLicenseInfo)().then(t).catch(()=>t(null)).finally(()=>a(!1))},[]),{license:e,loading:n}}(),f=!s&&e&&e.applicant,g=(0,r.useRef)(null),[m,x]=(0,r.useState)(!1),[C,L]=(0,r.useState)(null),[_,P]=(0,r.useState)(!1),S=e=>{if(e){if(!e.name.endsWith(".shield"))return void k.toast.error("请选择正确的 License 文件 (.shield)");if(e.size>0xa00000)return void k.toast.error("文件大小超过限制 (最大 10MB)");L(e),k.toast.success(`已选择文件: ${e.name}`)}},T=async()=>{if(!C)return void k.toast.error("请先选择 License 文件");x(!0);try{let e=new FormData;e.append("license",C),await (0,j.importLicense)(e),k.toast.success("License 导入成功！",{description:"正在跳转到应用页面..."}),setTimeout(()=>{window.location.href="/dashboard"},1500)}catch(e){k.toast.error("导入失败",{description:e.message||"请检查文件是否正确"}),x(!1)}},M=()=>{L(null),g.current&&(g.current.value="")};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/50 p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-lg",children:[(0,t.jsx)("div",{className:"flex justify-center mb-6",children:(0,t.jsx)(v.LogoAnimated,{size:"lg"})}),(0,t.jsxs)(i.Card,{className:"shadow-xl border-border/50",children:[(0,t.jsxs)(i.CardHeader,{className:"space-y-4 pb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(n.default,{href:"/login",children:(0,t.jsxs)(a.Button,{variant:"ghost",size:"sm",className:"gap-1 text-muted-foreground hover:text-foreground",children:[(0,t.jsx)(o.ArrowLeft,{className:"h-4 w-4"}),"返回登录"]})}),(0,t.jsx)(n.default,{href:"/license/apply",children:(0,t.jsxs)(a.Button,{variant:"default",size:"sm",className:"text-xs gap-1 group",children:["授权中心",(0,t.jsx)(b.ArrowUpRight,{className:"h-3 w-3 group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-transform"})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.CardTitle,{className:"text-2xl flex items-center gap-2",children:[(0,t.jsx)(y.Shield,{className:"h-6 w-6 text-primary"}),f?"更新 License":"导入 License"]}),(0,t.jsx)(i.CardDescription,{className:"text-muted-foreground mt-2",children:f?"您的当前 License 已过期或即将过期，请导入新的授权文件":"请导入您的授权证书以使用完整功能"})]})]}),(0,t.jsxs)(i.CardContent,{className:"space-y-6 pt-0",children:[f&&(0,t.jsx)(N,{license:e}),!f&&(0,t.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg text-sm",children:[(0,t.jsx)(p.Key,{className:"h-5 w-5 text-primary shrink-0 mt-0.5"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"导入 License 后即可获得完整商业授权，包括软件更新、技术支持等服务。"})]}),(0,t.jsxs)("div",{onClick:()=>!C&&g.current?.click(),onDrop:e=>{e.preventDefault(),P(!1);let t=e.dataTransfer.files?.[0];t&&S(t)},onDragOver:e=>{e.preventDefault(),P(!0)},onDragLeave:e=>{e.preventDefault(),P(!1)},className:(0,w.cn)("relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-200",_&&"border-primary bg-primary/5 scale-[1.02]",C?"border-green-500 bg-green-50/50 dark:bg-green-900/10 cursor-default":"border-muted-foreground/20 hover:border-muted-foreground/40 hover:bg-muted/30 cursor-pointer"),children:[(0,t.jsx)("input",{ref:g,type:"file",accept:".shield",onChange:e=>{S(e.target.files?.[0]||null)},className:"hidden"}),C?(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 animate-in fade-in zoom-in duration-200",children:[(0,t.jsx)("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-full",children:(0,t.jsx)(c,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:C.name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-0.5",children:[(C.size/1024).toFixed(1)," KB"]})]}),(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),M()},className:"text-xs h-8",children:"重新选择"})]}):(0,t.jsxs)("div",{className:(0,w.cn)("flex flex-col items-center gap-3 transition-all duration-200",_&&"scale-110"),children:[(0,t.jsx)("div",{className:"p-3 bg-muted rounded-full",children:(0,t.jsx)(l.Upload,{className:"h-8 w-8 text-muted-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:_?"释放以上传文件":"点击或拖拽上传 License"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"支持 .shield 格式，最大 10MB"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(a.Button,{onClick:T,disabled:!C||m,className:"w-full h-11",size:"lg",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"导入中..."]}):C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.CheckCircle,{className:"mr-2 h-4 w-4"}),"确认导入"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Upload,{className:"mr-2 h-4 w-4"}),"导入 License"]})}),C&&!m&&(0,t.jsx)(a.Button,{variant:"outline",onClick:M,className:"w-full",size:"sm",children:"取消选择"})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2 text-xs text-muted-foreground bg-muted/30 p-3 rounded-lg",children:[(0,t.jsx)(u.AlertCircle,{className:"h-4 w-4 mt-0.5 shrink-0 text-muted-foreground/70"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{children:"导入成功后系统将自动刷新并跳转到应用页面。"}),(0,t.jsxs)("p",{children:["如需帮助，请",(0,t.jsx)("a",{href:"//smartboot.tech/service.html",target:"_blank",className:"text-primary hover:underline mx-0.5",children:"联系技术支持"})]})]})]})]})]}),(0,t.jsx)("p",{className:"text-center text-xs text-muted-foreground mt-6",children:"© 2024 smart-mqtt 企业版 · 保留所有权利"})]})})}e.s(["default",()=>C],318)}]);