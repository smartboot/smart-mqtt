(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26538,e=>{"use strict";let t=(0,e.i(20790).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],26538)},97473,e=>{"use strict";let t=(0,e.i(20790).default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);e.s(["Wifi",()=>t],97473)},43753,e=>{"use strict";let t=(0,e.i(20790).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],43753)},77246,67917,e=>{"use strict";var t=e.i(20790);let s=(0,t.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>s],77246);let a=(0,t.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],67917)},80421,e=>{"use strict";let t=(0,e.i(20790).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],80421)},88374,e=>{"use strict";var t=e.i(46398),s=e.i(49627);function a({className:e,size:a="default",...r}){return(0,t.jsx)("div",{"data-slot":"card","data-size":a,className:(0,s.cn)("bg-card text-card-foreground gap-6 overflow-hidden rounded-xl border border-border/50 py-6 text-sm","shadow-sm transition-all duration-300","hover:shadow-md hover:border-border/80","has-[>img:first-child]:pt-0 data-[size=sm]:gap-4 data-[size=sm]:py-4","*:[img:first-child]:rounded-t-xl *:[img:last-child]:rounded-b-xl","group/card flex flex-col",e),...r})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("gap-1 rounded-t-xl px-6 group-data-[size=sm]/card:px-4 [.border-b]:pb-6 group-data-[size=sm]/card:[.border-b]:pb-4 group/card-header @container/card-header grid auto-rows-min items-start has-data-[slot=card-action]:grid-cols-[1fr_auto] has-data-[slot=card-description]:grid-rows-[auto_auto]",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("text-base leading-normal font-medium group-data-[size=sm]/card:text-sm",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6 group-data-[size=sm]/card:px-4",e),...a})}function d({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("rounded-b-xl px-6 group-data-[size=sm]/card:px-4 [.border-t]:pt-6 group-data-[size=sm]/card:[.border-t]:pt-4 flex items-center",e),...a})}e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>i,"CardFooter",()=>d,"CardHeader",()=>r,"CardTitle",()=>n])},43040,e=>{"use strict";var t=e.i(56860);function s(e){return t.default.post("/plugin/list",e||{})}function a(){return t.default.get("/plugin/current")}function r(e){return t.default.get(`/plugin/${e}/config`)}function n(e){return t.default.get(`/plugin/${e}/config?format=json`)}function i(e,s,a){return t.default.post(`/plugin/${e}/config/save`,{config:s,restart:a})}function l(e){return t.default.post(`/plugin/enable?id=${e}`)}function d(e){return t.default.post(`/plugin/disable?id=${e}`)}function c(e){return t.default.post(`/plugin/uninstall?id=${e}`)}function o(){return t.default.get("/plugin/market")}function u(e,t,s){let a=new EventSource(`/api/plugin/download?url=${encodeURIComponent(e)}`);return a.onmessage=t,s&&(a.onerror=s),{close:()=>a.close()}}function f(e){let s=new FormData;return s.append("plugin",e),t.default.post("/plugin/upload",s,{headers:{"Content-Type":"multipart/form-data"}})}function p(e){return t.default.get(`/plugin/${e}/schema`)}e.s(["disablePlugin",()=>d,"enablePlugin",()=>l,"getCurrentPlugin",()=>a,"getMarketPlugins",()=>o,"getPluginConfig",()=>r,"getPluginConfigAsJson",()=>n,"getPluginList",()=>s,"getPluginSchema",()=>p,"installPlugin",()=>u,"uninstallPlugin",()=>c,"updatePluginConfig",()=>i,"uploadPlugin",()=>f])},84521,e=>{"use strict";var t=e.i(56860);function s(){return t.default.post("/cluster/nodes")}function a(){return t.default.get("/cluster/metricCodes")}function r(e){return t.default.post("/cluster/metrics",e)}function n(){return t.default.post("/brokers")}function i(e){return e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(0)} KB`:e<0x40000000?`${(e/1024/1024).toFixed(0)} MB`:`${(e/1024/1024/1024).toFixed(2)} GB`}e.s(["formatMemory",()=>i,"getBrokerList",()=>n,"getClusterMetrics",()=>r,"getClusterNodes",()=>s,"getMetricCodes",()=>a,"metricNameMap",0,{topic_count:"Topic 数量",subscribe_relation:"订阅关系",bytes_sent:"发送字节数",bytes_received:"接收字节数",packets_publish_rate:"发布成功率",connection_count:"连接数",message_received:"接收消息数",message_sent:"发送消息数"}])},71695,68981,705,32402,37194,15890,68395,62931,31157,e=>{"use strict";var t=e.i(56860);function s(e){return t.default.post("/user/login",e)}function a(){return t.default.post("/user/logout")}function r(){return t.default.get("/user/userInfo")}function n(e){return t.default.post("/connections",e)}function i(e){return t.default.post("/disconnection",e)}function l(e){return t.default.post("/subscriptions/topics",e)}function d(){return t.default.get("/metric/topic")}function c(e){return t.default.post("/system/user/list",e||{})}function o(e){return t.default.post("/system/user/add",e)}function u(e){return t.default.post("/system/user/delete",e)}function f(e){return t.default.post("/system/user/update",e)}function p(){return t.default.get("/api/bridge/list")}function x(e){return t.default.post("/api/bridge/add",e)}function g(e){return t.default.post("/api/bridge/update",e)}function h(e){return t.default.post("/api/bridge/remove",e)}function m(e){return t.default.post("/api/bridge/start",e)}function b(e){return t.default.post("/api/bridge/stop",e)}function j(e){return t.default.post("/api/bridge/test",e)}function v(){return t.default.post("/api/system/settings/get")}function y(e){return t.default.post("/api/system/settings/save",e)}function N(){return t.default.post("/api/system/version")}function w(){return t.default.post("/api/acl/get")}function C(e){return t.default.post("/api/acl/save",e)}function k(e){return t.default.post("/api/acl/secret",e)}function T(){return t.default.get("/api/content-data")}function M(e){return t.default.get("/api/popular/list",{params:e})}function S(e){return t.default.get(`/api/dashboard/data-overview/${e}`)}function B(e){return t.default.get("/api/dashboard/visit",{params:e})}function z(){return t.default.get("/api/dashboard/period-visits")}function I(e){return t.default.get("/api/dashboard/visits-detail",{params:e})}e.s(["getUserInfo",()=>r,"login",()=>s,"logout",()=>a],68981),e.i(84521),e.s(["disconnectConnection",()=>i,"getConnections",()=>n],705),e.s(["getTopicList",()=>l,"getTopicMetrics",()=>d],32402),e.i(43040),e.s(["addUser",()=>o,"deleteUser",()=>u,"getUserList",()=>c,"updateUser",()=>f],37194),e.s(["addBridge",()=>x,"getBridgeList",()=>p,"removeBridge",()=>h,"startBridge",()=>m,"stopBridge",()=>b,"testBridge",()=>j,"updateBridge",()=>g],15890),e.s(["getSystemSettings",()=>v,"getVersionInfo",()=>N,"saveSystemSettings",()=>y],68395),e.s(["generateAclSecret",()=>k,"getAclConfig",()=>w,"saveAclConfig",()=>C],62931),e.i(93573),e.s(["getContentData",()=>T,"getDataOverview",()=>S,"getPeriodVisits",()=>z,"getPopularList",()=>M,"getVisitData",()=>B,"getVisitsDetail",()=>I],31157),e.i(52352),e.s([],71695)},1290,e=>{"use strict";var t=e.i(46398),s=e.i(49627);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto rounded-lg border border-border/50",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",e),...a})})}function r({className:e,...a}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("bg-muted/50 [&_tr]:border-b",e),...a})}function n({className:e,...a}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",e),...a})}function i({className:e,...a}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("border-b border-border/50 transition-colors duration-200","hover:bg-accent/30 data-[state=selected]:bg-accent",e),...a})}function l({className:e,...a}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("h-12 px-4 text-left align-middle font-semibold text-foreground/80","whitespace-nowrap [&:has([role=checkbox])]:pr-0",e),...a})}function d({className:e,...a}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-4 align-middle whitespace-nowrap","[&:has([role=checkbox])]:pr-0",e),...a})}e.s(["Table",()=>a,"TableBody",()=>n,"TableCell",()=>d,"TableHead",()=>l,"TableHeader",()=>r,"TableRow",()=>i])},14525,e=>{"use strict";let t=(0,e.i(20790).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],14525)},95303,e=>{"use strict";var t=e.i(46398),s=e.i(55372),a=e.i(38433),r=e.i(5545),n=e.i(88805),i=e.i(1290),l=e.i(88374),d=e.i(56769),c=e.i(8576),o=e.i(697),u=e.i(77246),f=e.i(10783),f=f,p=e.i(67917),x=e.i(26538),g=e.i(14525),h=e.i(97473);let m=(0,e.i(20790).default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var b=e.i(43753),j=e.i(44871),v=e.i(16378),y=e.i(80421);e.i(71695);var N=e.i(705);function w(){let[e,w]=(0,s.useState)(""),[C,k]=(0,s.useState)([]),[T,M]=(0,s.useState)([]),[S,B]=(0,s.useState)("all"),[z,I]=(0,s.useState)(!1),[P,_]=(0,s.useState)(null),D=async()=>{try{I(!0),_(null);let t=await (0,N.getConnections)({clientId:e||void 0,ipAddress:e||void 0,status:"all"===S?void 0:S,page:1,size:100});t?.list?(k(t.list),M(t.list)):(k([]),M([]))}catch(e){console.error("获取连接列表失败:",e),_("获取连接列表失败，请稍后重试"),k([]),M([])}finally{I(!1)}};(0,s.useEffect)(()=>{D()},[]),(0,s.useEffect)(()=>{M(C.filter(t=>(t.clientId.toLowerCase().includes(e.toLowerCase())||t.ip_address.includes(e))&&("all"===S||t.status===S)))},[e,S,C]);let $=C.filter(e=>"connected"===e.status).length,A=C.filter(e=>"offline"===e.status).length,H=async e=>{try{await (0,N.disconnectConnection)({clientId:e}),D()}catch(e){console.error("断开连接失败:",e),_("断开连接失败: "+(e.message||"未知错误"))}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"连接管理"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"管理 MQTT 客户端连接"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(a.Button,{size:"sm",onClick:D,disabled:z,children:[z?(0,t.jsx)(v.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(j.RefreshCw,{className:"mr-2 h-4 w-4"}),"刷新"]})})]}),P&&(0,t.jsxs)(o.Alert,{variant:"destructive",children:[(0,t.jsx)(y.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(o.AlertDescription,{children:P})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)(l.Card,{className:"relative overflow-hidden card-hover border-border/50 bg-gradient-to-br from-card to-muted/30",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500/5 rounded-full -translate-y-1/2 translate-x-1/2"}),(0,t.jsx)(l.CardContent,{className:"relative flex items-center justify-between p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 shadow-lg shadow-blue-500/20",children:(0,t.jsx)(g.Users,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"总连接数"}),(0,t.jsx)("p",{className:"text-3xl font-bold tracking-tight",children:C.length})]})]})})]}),(0,t.jsxs)(l.Card,{className:"relative overflow-hidden card-hover border-border/50 bg-gradient-to-br from-card to-muted/30",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-green-500/5 rounded-full -translate-y-1/2 translate-x-1/2"}),(0,t.jsx)(l.CardContent,{className:"relative flex items-center justify-between p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-green-500 to-green-600 shadow-lg shadow-green-500/20",children:(0,t.jsx)(h.Wifi,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"在线"}),(0,t.jsx)("p",{className:"text-3xl font-bold tracking-tight",children:$})]})]})})]}),(0,t.jsxs)(l.Card,{className:"relative overflow-hidden card-hover border-border/50 bg-gradient-to-br from-card to-muted/30",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gray-500/5 rounded-full -translate-y-1/2 translate-x-1/2"}),(0,t.jsx)(l.CardContent,{className:"relative flex items-center justify-between p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-500 to-gray-600 shadow-lg shadow-gray-500/20",children:(0,t.jsx)(m,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"离线"}),(0,t.jsx)("p",{className:"text-3xl font-bold tracking-tight",children:A})]})]})})]})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.CardTitle,{children:"连接列表"}),(0,t.jsx)(l.CardDescription,{children:"当前所有 MQTT 客户端连接信息"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(r.Input,{type:"search",placeholder:"搜索客户端ID或IP...",className:"w-64 pl-8",value:e,onChange:e=>w(e.target.value)})]}),(0,t.jsxs)(c.Select,{value:S,onValueChange:B,children:[(0,t.jsxs)(c.SelectTrigger,{className:"w-[120px]",children:[(0,t.jsx)(b.Filter,{className:"mr-2 h-4 w-4"}),(0,t.jsx)(c.SelectValue,{placeholder:"状态筛选"})]}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"all",children:"全部"}),(0,t.jsx)(c.SelectItem,{value:"connected",children:"在线"}),(0,t.jsx)(c.SelectItem,{value:"offline",children:"离线"})]})]})]})]})}),(0,t.jsx)(l.CardContent,{children:z?(0,t.jsx)("div",{className:"flex items-center justify-center h-48",children:(0,t.jsx)(v.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,t.jsxs)(i.Table,{children:[(0,t.jsx)(i.TableHeader,{children:(0,t.jsxs)(i.TableRow,{className:"hover:bg-transparent",children:[(0,t.jsx)(i.TableHead,{children:"客户端ID"}),(0,t.jsx)(i.TableHead,{children:"IP地址"}),(0,t.jsx)(i.TableHead,{children:"keepalive"}),(0,t.jsx)(i.TableHead,{children:"连接时间"}),(0,t.jsx)(i.TableHead,{children:"最后活动"}),(0,t.jsx)(i.TableHead,{children:"状态"}),(0,t.jsx)(i.TableHead,{className:"w-[80px]",children:"操作"})]})}),(0,t.jsx)(i.TableBody,{children:0===T.length?(0,t.jsx)(i.TableRow,{children:(0,t.jsx)(i.TableCell,{colSpan:8,className:"h-24 text-center text-muted-foreground",children:"暂无数据"})}):T.map(e=>(0,t.jsxs)(i.TableRow,{className:"group",children:[(0,t.jsx)(i.TableCell,{className:"font-medium",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:e.clientId}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.username})]})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsx)("code",{className:"px-2 py-1 bg-muted rounded text-xs",children:e.ip_address})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsxs)(n.Badge,{variant:"outline",className:"text-xs",children:[e.keepalive,"s"]})}),(0,t.jsx)(i.TableCell,{className:"text-muted-foreground text-sm",children:e.connect_time}),(0,t.jsx)(i.TableCell,{className:"text-muted-foreground text-sm",children:e.lastActivity}),(0,t.jsx)(i.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`h-2 w-2 rounded-full ${"connected"===e.status?"bg-green-500 animate-pulse":"bg-gray-400"}`}),(0,t.jsx)(n.Badge,{variant:"connected"===e.status?"default":"secondary",className:"text-xs",children:"connected"===e.status?"在线":"离线"})]})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsxs)(d.DropdownMenu,{children:[(0,t.jsx)(d.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(f.default,{className:"h-4 w-4"})})}),(0,t.jsxs)(d.DropdownMenuContent,{align:"end",children:["connected"===e.status&&(0,t.jsxs)(d.DropdownMenuItem,{onClick:()=>H(e.clientId),children:[(0,t.jsx)(x.XCircle,{className:"mr-2 h-4 w-4"}),"断开连接"]}),(0,t.jsx)(d.DropdownMenuSeparator,{}),(0,t.jsxs)(d.DropdownMenuItem,{onClick:()=>{var t;return t=e.id,void k(e=>e.filter(e=>e.id!==t))},className:"text-destructive focus:text-destructive",children:[(0,t.jsx)(p.Trash2,{className:"mr-2 h-4 w-4"}),"删除"]})]})]})})]},`${e.clientId}-${e.ip_address}`))})]})}),(0,t.jsxs)(l.CardFooter,{className:"flex items-center justify-between border-t pt-4",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["显示 ",T.length," 条，共 ",C.length," 条"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Button,{variant:"outline",size:"sm",disabled:!0,children:"上一页"}),(0,t.jsx)(a.Button,{variant:"outline",size:"sm",disabled:!0,children:"下一页"})]})]})]})]})}e.s(["default",()=>w],95303)}]);