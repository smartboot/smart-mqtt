import{d as F,o as V,a0 as B,D as E,a7 as I,a as C,b as M,e as b,C as q,h as A}from"./index-542e6b62.js";const P={name:"LayForm"},w=F({...P,props:{model:{default:function(){return{}}},required:{type:Boolean},rules:null,initValidate:{type:Boolean,default:!1},requiredIcons:{default:""},requiredErrorMessage:null,validateMessage:null,useCN:{type:Boolean,default:!0},pane:{type:Boolean,default:!1}},emits:["submit"],setup(f,{expose:m,emit:h}){const a=f,n=[],l={};V(()=>{var e;a.initValidate&&((e=c())==null||e.catch(t=>{}))});const v=function(){let e=!1;return c((t,o,r)=>{e=t,h("submit",t,o,r)}),e},c=function(e,t){let o=n;typeof e=="function"?t=e:(typeof e=="string"||Array.isArray(e)&&e.length>0)&&(o=[],(e?[].concat(e):[]).forEach(s=>l[s]&&o.push(l[s])));let r=[];o.forEach(u=>{u.validate((s,i)=>{r=r.concat(s)})});const d=r.length===0;return typeof t=="function"?(d?t(!0,a.model,null):t(!1,a.model,r),null):new Promise((u,s)=>{const i={isValidate:d,model:a.model,errors:d?null:r};i.isValidate?u(i):s(i)})},p=function(e){const t=e?[].concat(e):[];t.length===0?n.forEach(o=>o.clearValidate()):t.forEach(o=>l[o]&&l[o].clearValidate())},y=function(){for(const e in a.model)a.model[e]=null;setTimeout(()=>{var e;return(e=c())==null?void 0:e.catch(t=>{})},0)},_=function(e){n.push(e),l[e.prop]=e},g=function(e){for(var t=0;t<n.length;t++)n[t].prop==e.prop&&n.splice(t,1);e.prop!=null&&Reflect.deleteProperty(l,e.prop)};return m({validate:c,clearValidate:p,reset:y}),B("LayForm",E({formItems:n,addField:_,removeField:g,clearValidate:p,validate:c,...I(a)})),(e,t)=>(C(),M("form",{class:q(["layui-form",{"layui-form-pane":f.pane}]),onsubmit:v},[b(e.$slots,"default")],2))}}),R=A(w);export{R as c};
